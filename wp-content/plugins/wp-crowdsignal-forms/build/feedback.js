!function(e,t){for(var r in t)e[r]=t[r]}(window,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=21)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.React}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t,r){var n=r(15),o=r(16),c=r(17),i=r(19);e.exports=function(e,t){return n(e)||o(e,t)||c(e,t)||i()}},function(e,t,r){var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var c=typeof n;if("string"===c||"number"===c)e.push(n);else if(Array.isArray(n)&&n.length){var i=o.apply(null,n);i&&e.push(i)}else if("object"===c)for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){!function(){e.exports=this.regeneratorRuntime}()},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}e.exports=r},function(e,t,r){var n=r(20);e.exports=function(e,t){if(null==e)return{};var r,o,c=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}},function(e,t){function r(e,t,r,n,o,c,i){try{var a=e[c](i),l=a.value}catch(u){return void r(u)}a.done?t(l):Promise.resolve(l).then(n,o)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,c){var i=e.apply(t,n);function a(e){r(i,o,c,a,l,"next",e)}function l(e){r(i,o,c,a,l,"throw",e)}a(void 0)}))}}},function(e,t){!function(){e.exports=this.crowdsignalForms.apiFetch}()},function(e,t){!function(){e.exports=this.ReactDOM}()},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,c=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){o=!0,c=l}finally{try{n||null==a.return||a.return()}finally{if(o)throw c}}return r}}},function(e,t,r){var n=r(18);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(1),c=r(4),i=r.n(c),a=r(8),l=r.n(a),u=r(5),s=r.n(u),f=r(3),b=r(2),d=r(10),p=r.n(d),m=r(11),g=r.n(m),O=function(e){for(var t=window.getComputedStyle(e).backgroundColor;"rgba(0, 0, 0, 0)"===t&&e.parentNode&&e.parentNode.nodeType===window.Node.ELEMENT_NODE;)e=e.parentNode,t=window.getComputedStyle(e).backgroundColor;return t},w=function(){return Object(n.createElement)("div",{className:"crowdsignal-forms__style-probe"},Object(n.createElement)("p",null),Object(n.createElement)("h3",null,"Text"),Object(n.createElement)("div",{className:"wp-block-button"},Object(n.createElement)("div",{className:"wp-block-button__link"})),Object(n.createElement)("div",{className:"entry-content"},Object(n.createElement)("div",{className:"alignwide"})))},h=function(e){if(null===e)return{};var t,r=e.querySelector(".wp-block-button__link"),n=e.querySelector("p"),o=e.querySelector("h3"),c=e.querySelector(".alignwide"),i=O(r),a=O(n),l=window.getComputedStyle(n).color;if(i===a){var u=(t=r,"0px"!==window.getComputedStyle(t).borderBlockStartWidth?window.getComputedStyle(t).borderBlockStartColor:null);i=u||l}return{accentColor:i,backgroundColor:a,textColor:l,textColorInverted:window.getComputedStyle(r).color,textFont:window.getComputedStyle(n).fontFamily,textSize:window.getComputedStyle(n).fontSize,headingFont:window.getComputedStyle(o).fontFamily,contentWideWidth:window.getComputedStyle(c).maxWidth}},y=r(6),j=r(7),v=function(){return Object(n.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(n.createElement)("path",{d:"M17.7049 7.70504L16.2949 6.29504L11.9999 10.59L7.70492 6.29504L6.29492 7.70504L10.5899 12L6.29492 16.295L7.70492 17.705L11.9999 13.41L16.2949 17.705L17.7049 16.295L13.4099 12L17.7049 7.70504Z"}))},E="question",k="submit",x=(Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),Object.freeze({CLICK:"click",HOVER:"hover",PAGE_LOAD:"load"})),C=Object(o.forwardRef)((function(e,t){var r=e.attributes,c=e.className,i=e.isOpen,a=e.onClick,l=e.onToggle;Object(o.useLayoutEffect)(l,[i]),Object(o.useEffect)((function(){i||r.toggleOn!==x.PAGE_LOAD||a()}),[]);var u=Object(o.useCallback)((function(){i||r.toggleOn!==x.HOVER||a()}),[r.toggleOn,i]),f=s()("crowdsignal-forms-feedback__trigger","wp-block-button__link",c,{"is-active":i});return Object(n.createElement)("div",{className:"wp-block-button crowdsignal-forms-feedback__trigger-wrapper"},!i&&Object(n.createElement)("button",{ref:t,className:f,onClick:a,onMouseEnter:u},Object(n.createElement)(j.RichText.Content,{className:"crowdsignal-forms-feedback__trigger-text",value:r.triggerLabel})),i&&Object(n.createElement)("button",{ref:t,className:f,onClick:a},Object(n.createElement)(v,null),Object(y.__)("Close","crowdsignal-forms")))})),_=r(9),S=r.n(_),P=r(12),N=r.n(P),L=r(13),T=r.n(L),R=function(e,t){return r=T()({path:Object(b.trimEnd)("/crowdsignal-forms/v1/feedback/".concat(e||"","/response")),method:"POST",data:t}),new Promise((function(e,t){var n=setTimeout((function(){return t(new Error("Request timed out"))}),1e4);r.then(e,t).finally((function(){return clearTimeout(n)}))}));var r},D=function(e){var t=e.attributes,r=e.onSubmit,c=Object(o.useState)(""),a=i()(c,2),l=a[0],u=a[1],d=Object(o.useState)(""),p=i()(d,2),m=p[0],g=p[1],O=Object(o.useState)({}),w=i()(O,2),h=w[0],y=w[1],v=function(){var e=N()(S.a.mark((function e(n){var o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o={feedback:Object(b.isEmpty)(l),email:t.emailRequired&&(Object(b.isEmpty)(m)||m.match(/^\s+@\s+$/))},y(o),!o.feedback&&!o.email){e.next=5;break}return e.abrupt("return");case 5:R(t.surveyId,{nonce:t.nonce,feedback:l,email:m}),r();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=s()("crowdsignal-forms-feedback__input",{"is-error":h.feedback}),k=s()("crowdsignal-forms-feedback__input",{"is-error":h.email});return Object(n.createElement)("form",{onSubmit:v},Object(n.createElement)(j.RichText.Content,{tagName:"h3",className:"crowdsignal-forms-feedback__header",value:t.header}),Object(n.createElement)(f.TextareaControl,{className:E,rows:6,placeholder:t.feedbackPlaceholder,value:l,onChange:u}),Object(n.createElement)(f.TextControl,{className:k,placeholder:t.emailPlaceholder,value:m,onChange:g}),Object(n.createElement)("div",{className:"wp-block-button crowdsignal-forms-feedback__button-wrapper"},Object(n.createElement)("button",{className:"wp-block-button__link crowdsignal-forms-feedback__feedback-button",type:"submit"},t.submitButtonLabel)))},A=function(e){var t=e.attributes;return Object(n.createElement)(j.RichText.Content,{tagName:"h3",className:"crowdsignal-forms-feedback__header",value:t.submitText})},M=Object(n.createElement)("span",null,"Hide Crowdsignal ads",Object(n.createElement)("br",null),"and get unlimited",Object(n.createElement)("br",null),"signals -"," ",Object(n.createElement)("a",{href:"https://crowdsignal.com/pricing",target:"_blank",rel:"noopener noreferrer"},"Upgrade")),F=function(e){var t=e.showLogo,r=e.editing,o=e.message,c=e.trackRef,i=void 0===c?"cs-forms-poll":c;return Object(n.createElement)("div",{className:"crowdsignal-forms__footer-branding"},Object(n.createElement)("a",{className:"crowdsignal-forms__footer-cs-link",href:"https://crowdsignal.com?ref="+i,target:"_blank",rel:"noopener noreferrer"},o||Object(y.__)("Create your own poll with Crowdsignal","crowdsignal-forms")),r&&Object(n.createElement)(f.Tooltip,{text:M,position:"top center"},Object(n.createElement)("a",{href:"https://crowdsignal.com/pricing",target:"_blank",rel:"noopener noreferrer",className:"crowdsignal-forms__branding-promote"},Object(y.__)("Hide","crowdsignal-forms"))),t&&Object(n.createElement)("a",{href:"https://crowdsignal.com?ref="+i,target:"_blank",rel:"noopener noreferrer"},Object(n.createElement)("img",{className:"crowdsignal-forms__footer-branding-logo",src:"https://app.crowdsignal.com/images/svg/cs-logo-dots.svg",alt:"Crowdsignal sticker"})))},H=function(e){var t=e.attributes,r=Object(o.useState)(E),c=i()(r,2),a=c[0],l=c[1],u=Object(o.useState)("auto"),s=i()(u,2),f=s[0],b=s[1],d=Object(o.useRef)(null),p={height:f};return Object(n.createElement)("div",{ref:d,className:"crowdsignal-forms-feedback__popover",style:p},a===E&&Object(n.createElement)(D,{attributes:t,onSubmit:function(){b(d.current.offsetHeight),l(k)}}),a===k&&Object(n.createElement)(A,{attributes:t}),!t.hideBranding&&Object(n.createElement)(F,{trackRef:"cs-forms-feedback",showLogo:a===k,message:Object(y.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms")}))};function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=function(e,t){return{left:e.left+t.x+window.scrollX,right:e.right+(window.innerWidth>t.left+t.width?window.innerWidth-t.left-t.width:0),top:e.top+t.y+window.scrollY,bottom:e.bottom+(window.innerHeight>t.top+t.height?window.innerHeight-t.top-t.height:0)}},B=function(e,t,r){return{left:"left"===e?r.left:null,right:"right"===e?r.right:null}},z=function(e,t,r){return"center"===e?{top:(window.innerHeight-t)/2,bottom:null}:{top:"top"===e?r.top:null,bottom:"bottom"===e?r.bottom:null}};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U,V=(U=function(e){var t=e.attributes,r=e.fallbackStyles,c=e.renderStyleProbe,a=Object(o.useState)({}),l=i()(a,2),u=l[0],d=l[1],p=Object(o.useRef)(null),m=Object(o.useCallback)((function(){d(function(e,t,r,n){return"center"!==t?e:K({},e,{left:null!==e.left?e.left-r+n:null,right:null!==e.right?e.right-r+n:null})}(function(e,t,r,n,o){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i={left:Object(b.isObject)(o)?o.left:o,right:Object(b.isObject)(o)?o.right:o,top:Object(b.isObject)(o)?o.top:o,bottom:Object(b.isObject)(o)?o.bottom:o};return c&&(i=W(i,c.getBoundingClientRect())),I({},B(e,0,i),{},z(t,n,i))}(t.x,t.y,p.current.offsetWidth,"center"===t.y?p.current.offsetWidth:p.current.offsetHeight,{top:20,bottom:20,left:"center"===t.y?0:20,right:"center"===t.y?0:20},document.body),t.y,p.current.offsetWidth,p.current.offsetHeight))}),[t.x,t.y,p.current]);Object(o.useLayoutEffect)((function(){m()}),[t.x,t.y,m]);var g,O,w=s()("crowdsignal-forms-feedback","align-".concat(t.x),{"no-shadow":t.hideTriggerShadow,"is-vertical":"center"===t.y}),h=K({},u,{},function(e,t){return Object(b.mapKeys)({backgroundColor:e.backgroundColor||"#ffffff",buttonColor:e.buttonColor||t.accentColor,buttonTextColor:e.buttonTextColor||t.textColorInverted,textColor:e.textColor||t.textColor,textSize:t.textSize,triggerBackgroundColor:e.triggerBackgroundColor||t.accentColor,triggerTextColor:e.triggerTextColor||t.textColorInverted},(function(e,t){return"--crowdsignal-forms-".concat(Object(b.kebabCase)(t))}))}(t,r));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:w,style:h},Object(n.createElement)(f.Dropdown,{popoverProps:{className:"crowdsignal-forms-feedback__popover-wrapper",position:(g=t.x,O=t.y,"center"!==O?"":"left"===g?"middle right":"middle left")},renderToggle:function(e){var r=e.isOpen,o=e.onToggle;return Object(n.createElement)(C,{ref:p,isOpen:r,onClick:o,onToggle:m,attributes:t})},renderContent:function(){return Object(n.createElement)(H,{attributes:t})}})),c())},Object(f.withFallbackStyles)((function(e){return{fallbackStyles:h(e.querySelector(".crowdsignal-forms__style-probe"))}}))((function(e){var t=e.fallbackStyles,r=g()(e,["fallbackStyles"]);return Object(n.createElement)(U,p()({fallbackStyles:t||{},renderStyleProbe:function(){return t?null:Object(n.createElement)(w,null)}},r))}))),$=r(14),J=function(e,t){return Object(b.forEach)(document.querySelectorAll("div[".concat(e,"]")),(function(r){try{var n=JSON.parse(r.dataset[Object(b.camelCase)(e.substr("data-".length))]),o=t(n,r);r.removeAttribute(e),Object($.render)(o,r)}catch(c){console.error("WP Crowdsignal Forms: Failed to parse block data for: %s",e)}}))},X=function(e,t){(Object(b.isEmpty)(window.CrowdsignalMutationObservers)||!0!==window.CrowdsignalMutationObservers[e])&&(new window.MutationObserver((function(){return J(e,t)})).observe(document.body,{attributes:!0,attributeFilter:[e],childList:!0,subtree:!0}),Object(b.isEmpty)(window.CrowdsignalMutationObservers)&&(window.CrowdsignalMutationObservers=[]),window.CrowdsignalMutationObservers[e]=!0,J(e,t))};(function(e,t){if("complete"===document.readyState)return X(e,t);window.addEventListener("load",(function(){return X(e,t)}))})("data-crowdsignal-feedback",(function(e){return Object(n.createElement)(V,{attributes:e})}))}]));