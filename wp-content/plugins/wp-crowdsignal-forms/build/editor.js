!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=51)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.React}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t,n){var r=n(40),o=n(41),a=n(29),l=n(42);e.exports=function(e,t){return r(e)||o(e,t)||a(e,t)||l()}},function(e,t,n){e.exports=n(43)()},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var l=o.apply(null,r);l&&e.push(l)}else if("object"===a)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){!function(){e.exports=this.regeneratorRuntime}()},function(e,t){!function(){e.exports=this.wp.data}()},function(e,t){!function(){e.exports=this.wp.compose}()},function(e,t){function n(e,t,n,r,o,a,l){try{var c=e[a](l),i=c.value}catch(s){return void n(s)}c.done?t(i):Promise.resolve(i).then(r,o)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var l=e.apply(t,r);function c(e){n(l,o,a,c,i,"next",e)}function i(e){n(l,o,a,c,i,"throw",e)}c(void 0)}))}}},function(e,t){!function(){e.exports=this.wp.htmlEntities}()},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t,n){var r=n(37),o=n(38),a=n(29),l=n(39);e.exports=function(e){return r(e)||o(e)||a(e)||l()}},function(e,t,n){var r=n(50);e.exports=function(e,t){if(null==e)return{};var n,o,a=r(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(a){if(void 0===(o="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=a(),!!0){var l=window.Cookies,c=window.Cookies=a();c.noConflict=function(){return window.Cookies=l,c}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function a(t,n,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var l=JSON.stringify(n);/^[\{\[]/.test(l)&&(n=l)}catch(s){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var i in a)a[i]&&(c+="; "+i,!0!==a[i]&&(c+="="+a[i].split(";")[0]));return document.cookie=t+"="+n+c}}function l(e,n){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],l=0;l<a.length;l++){var c=a[l].split("="),i=c.slice(1).join("=");n||'"'!==i.charAt(0)||(i=i.slice(1,-1));try{var s=t(c[0]);if(i=(r.read||r)(i,s)||t(i),n)try{i=JSON.parse(i)}catch(u){}if(o[s]=i,e===s)break}catch(u){}}return e?o[e]:o}}return o.set=a,o.get=function(e){return l(e,!1)},o.getJSON=function(e){return l(e,!0)},o.remove=function(t,n){a(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},function(e,t){!function(){e.exports=this.ReactDOM}()},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){!function(){e.exports=this.wp.hooks}()},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){var r=n(23);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},,function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){var r=n(28);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t,n){var r=n(45),o=n(46);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t,n){var r=n(20),o=n(23),a=n(47),l=n(48);function c(t){var n="function"==typeof Map?new Map:void 0;return e.exports=c=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return l(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},c(t)}e.exports=c},function(e,t){!function(){e.exports=this.wp.editor}()},function(e,t){!function(){e.exports=this.wp.keycodes}()},,,,function(e,t,n){var r=n(28);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(i){o=!0,a=i}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";var r=n(44);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,l){if(l!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(23),o=n(49);function a(t,n,l){return o()?e.exports=a=Reflect.construct:e.exports=a=function(e,t,n){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return n&&r(a,n.prototype),a},a.apply(null,arguments)}e.exports=a},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}},function(e,t,n){"use strict";n.r(t);var r=n(17),o=n(24),a=n(0),l=n(1),c=function(){return Object(a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 6L5.5 18C5.5 18.2761 5.72386 18.5 6 18.5L18 18.5C18.2761 18.5 18.5 18.2761 18.5 18L18.5 6C18.5 5.72386 18.2761 5.5 18 5.5L6 5.5C5.72386 5.5 5.5 5.72386 5.5 6ZM4 18L4 6C4 4.89543 4.89543 4 6 4L18 4C19.1046 4 20 4.89543 20 6L20 18C20 19.1046 19.1046 20 18 20L6 20C4.89543 20 4 19.1046 4 18Z"}),Object(a.createElement)("rect",{x:"15",y:"17",width:"6",height:"1.5",transform:"rotate(-90 15 17)"}),Object(a.createElement)("rect",{x:"11.5",y:"17",width:"9",height:"1.5",transform:"rotate(-90 11.5 17)"}),Object(a.createElement)("rect",{x:"8",y:"17",width:"5",height:"1.5",transform:"rotate(-90 8 17)"}))},i=n(18),s=n.n(i),u=n(5),d=n.n(u),f=n(12),b=n(3);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={tryFetch:!1,isFetching:!1,pollsByClientId:{},pollClientIds:[]},O={setTryFetchPollData:function(e){return{type:"SET_TRY_FETCH",tryFetch:e}},setIsFetchingPollData:function(e){return{type:"IS_FETCHING",isFetching:e}},setPollApiDataForClientId:function(e,t){return{type:"SET_POLL",clientId:e,pollData:t}},addPollClientId:function(e){return{type:"ADD_POLL_CLIENT_ID",clientId:e}},removePollClientId:function(e){return{type:"REMOVE_POLL_CLIENT_ID",clientId:e}}},v=(Object(f.registerStore)("crowdsignal-forms/polls",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRY_FETCH":return p({},e,{tryFetch:!!t.tryFetch});case"IS_FETCHING":return p({},e,{isFetching:!!t.isFetching});case"SET_POLL":return p({},e,{pollsByClientId:p({},e.pollsByClientId,d()({},t.clientId,t.pollData))});case"ADD_POLL_CLIENT_ID":return p({},e,{pollClientIds:e.pollClientIds.indexOf(t.clientId)<0?[].concat(s()(e.pollClientIds),[t.clientId]):e.pollClientIds});case"REMOVE_POLL_CLIENT_ID":return p({},e,{pollClientIds:Object(b.filter)(e.pollClientIds,(function(e){return e!==t.clientId}))});default:return e}},actions:O,selectors:{shouldTryFetchingPollData:function(e){return!!e.tryFetch},getPollDataByClientId:function(e,t){return e.pollsByClientId[t]||null},getPollClientIds:function(e){return e.pollClientIds},isFetchingPollData:function(e){return!!e.isFetching}},controls:{},resolvers:{}}),n(10)),w=n.n(v),h=n(7),j=n.n(h),_=n(2),y=n.n(_),C=n(6),E=n(4),k=n(15),x=n(13),S=n(9),T=n.n(S),I=function(e){var t=e.hasVoted,n=e.isPollClosed,r=e.isPollHidden,o=e.showSubmitMessage,c=T()({"is-transparent":o},"crowdsignal-forms-poll__closed-banner");return Object(a.createElement)("div",{className:c},r&&Object(l.__)("This Poll is Hidden","crowdsignal-forms"),n&&!r&&Object(l.__)("This Poll is Closed","crowdsignal-forms"),t&&Object(l.__)("Thanks For Voting!","crowdsignal-forms"))},P=n(8),L=n.n(P),N=n(11),A=n.n(N),R=n(14),D=n.n(R),B=n(21),F=n.n(B),M=n(25),H=n.n(M),V=n(26),W=n.n(V),U=n(30),z=n.n(U),q=n(20),K=n.n(q),G=n(31),Z=n.n(G),Y=n(16),Q=n.n(Y);function J(e){return function(){var t,n=K()(e);if(X()){var r=K()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return z()(this,t)}}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var $=function(){var e=D()(A.a.mark((function e(t){var n,r,o=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(o.length>1&&void 0!==o[1])||o[1],r="https://api.crowdsignal.com/v3/polls",n){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",window.fetch("".concat(r,"/").concat(t,"/results"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e})).then((function(e){if(404===e.status)return{};if(e.error)throw new Error(e.message);return e.results.votes_by_answer})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=D()(A.a.mark((function e(t){var n,r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"5430eeac3911395001d731d9702fc38b",n=(new Date).getTime(),e.next=4,window.fetch("https://poll.fm/n/".concat("5430eeac3911395001d731d9702fc38b","/").concat(t,"?").concat(n,"&format=json"));case 4:if((r=e.sent).ok){e.next=7;break}throw new re;case 7:return e.next=9,r.json();case 9:if((o=e.sent).nonce){e.next=12;break}throw new re;case 12:return e.abrupt("return",o.nonce);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=D()(A.a.mark((function e(t,n,r,o){var a,l,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.join(","),e.next=3,window.fetch("https://polls.polldaddy.com/vote-js.php?format=json&p=".concat(n,"&b=1&a=").concat(a,"&o=&va=16&cookie=0&n=").concat(t,"&url=").concat(encodeURIComponent(window.location),"&vi=").concat(o));case 3:if((l=e.sent).ok){e.next=6;break}throw new re;case 6:return e.next=8,l.json();case 8:if("error"!==(c=e.sent).status){e.next=11;break}throw new ne(c.error);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),ne=function(e){W()(n,e);var t=J(n);function n(){return H()(this,n),t.apply(this,arguments)}return n}(Z()(Error)),re=function(e){W()(n,e);var t=J(n);function n(){return H()(this,n),t.call(this,Object(l.__)("Server error. Please try again.","crowdsignal-forms"))}return n}(ne),oe=function(){var e=D()(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q()({path:"/crowdsignal-forms/v1/account/info",method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(e,t){var n=Object(_.useState)(null),r=j()(n,2),o=r[0],a=r[1],l=Object(_.useState)(null),c=j()(l,2),i=c[0],s=c[1],u=Object(_.useState)(!0),d=j()(u,2),f=d[0],b=d[1];return Object(_.useEffect)((function(){b(!0),s(null),a(null),e().then(a).catch(s).finally((function(){return b(!1)}))}),t),{data:o,error:i,loading:f}},le=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=ae((function(){return $(e,t)}),[e]),r=n.data,o=n.error,a=n.loading;return{error:o,loading:a,results:r}},ce={is_verified:!0,capabilities:["hide-branding"],signal_count:{count:0,userLimit:2500,shouldDisplay:!1}},ie=function(){var e=Object(_.useState)(ce),t=j()(e,2),n=t[0],r=t[1],o=function(){var e=D()(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:return t=e.sent,r(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(_.useEffect)((function(){o()}),[]),{accountInfo:n,reloadAccountInfo:o}},se=function(e){var t=e.error,n=e.loading,r=e.text,o=e.totalVotes,c=e.votes,i=T()("crowdsignal-forms-poll__answer-results",{"is-error":t,"is-loading":n}),s=!n&&!t,u=0===o?0:100*c/o,d={width:"".concat(parseInt(u,10),"%")};return Object(a.createElement)("div",{className:i},Object(a.createElement)("div",{className:"crowdsignal-forms-poll__answer-results-labels"},Object(a.createElement)("span",{className:"crowdsignal-forms-poll__answer-results-answer"},Object(k.decodeEntities)(r)),Object(a.createElement)("span",{className:"crowdsignal-forms-poll__answer-results-votes"},s&&Object(l.sprintf)(Object(l._n)("%s vote","%s votes",c,"crowdsignal-forms"),c.toLocaleString())),Object(a.createElement)("span",{className:"crowdsignal-forms-poll__answer-results-percent"},s&&"".concat(u.toFixed(2),"%"))),Object(a.createElement)("div",{className:"crowdsignal-forms-poll__answer-results-progress-track"},Object(a.createElement)("div",{className:"crowdsignal-forms-poll__answer-results-progress-bar",style:d})))};se.propTypes={loading:L.a.bool,text:L.a.string.isRequired,totalVotes:L.a.number,votes:L.a.number};var ue,de=se,fe=Object(a.createElement)("span",null,"Hide Crowdsignal ads",Object(a.createElement)("br",null),"and get unlimited",Object(a.createElement)("br",null),"signals -"," ",Object(a.createElement)("a",{href:"https://crowdsignal.com/pricing",target:"_blank",rel:"noopener noreferrer"},"Upgrade")),be=function(e){var t=e.showLogo,n=e.editing,r=e.message,o=e.trackRef,c=void 0===o?"cs-forms-poll":o;return Object(a.createElement)("div",{className:"crowdsignal-forms__footer-branding"},Object(a.createElement)("a",{className:"crowdsignal-forms__footer-cs-link",href:"https://crowdsignal.com?ref="+c,target:"_blank",rel:"noopener noreferrer"},r||Object(l.__)("Create your own poll with Crowdsignal","crowdsignal-forms")),n&&Object(a.createElement)(E.Tooltip,{text:fe,position:"top center"},Object(a.createElement)("a",{href:"https://crowdsignal.com/pricing",target:"_blank",rel:"noopener noreferrer",className:"crowdsignal-forms__branding-promote"},Object(l.__)("Hide","crowdsignal-forms"))),t&&Object(a.createElement)("a",{href:"https://crowdsignal.com?ref="+c,target:"_blank",rel:"noopener noreferrer"},Object(a.createElement)("img",{className:"crowdsignal-forms__footer-branding-logo",src:"https://app.crowdsignal.com/images/svg/cs-logo-dots.svg",alt:"Crowdsignal sticker"})))},me=Object.freeze({THANK_YOU:"thank-you",CUSTOM_TEXT:"custom-text",REDIRECT:"redirect",RESULTS:"results"}),pe=Object.freeze({THEME_DEFAULT:"theme-default",GEORGIA:"georgia",PALATINO:"palatino",TIMES_NEW_ROMAN:"times-new-roman",ARIAL:"arial",IMPACT:"impact",LUCIDA:"lucida",TAHOMA:"tahoma",TREBUCHET:"trebuchet",VERDANA:"verdana",COURIER:"courier",CABIN:"Cabin",CHIVO:"Chivo",OPEN_SANS:"Open+Sans",FIRA_SANS:"Fira+Sans",ROBOTO:"Roboto",NUNITO:"Nunito",OVERPASS:"Overpass",LATO:"Lato",LIBRE_FRANKLIN:"Libre+Franklin",MONTSERRAT:"Montserrat",POPPINS:"Poppins",RUBIK:"Rubik",RALEWAY:"Raleway",JOSEFIN_SANS:"Josefin+Sans",ALEGREYA_SANS:"Alegreya+Sans",OSWALD:"Oswald"}),ge=Object.freeze([pe.CABIN,pe.CHIVO,pe.OPEN_SANS,pe.FIRA_SANS,pe.ROBOTO,pe.NUNITO,pe.OVERPASS,pe.LATO,pe.LIBRE_FRANKLIN,pe.MONTSERRAT,pe.POPPINS,pe.RUBIK,pe.RALEWAY,pe.JOSEFIN_SANS,pe.ALEGREYA_SANS,pe.OSWALD]),Oe=Object.freeze((ue={},d()(ue,pe.THEME_DEFAULT,null),d()(ue,pe.GEORGIA,"Georgia, serif"),d()(ue,pe.PALATINO,'"Palatino Linotype", "Book Antiqua", Palatino, serif'),d()(ue,pe.TIMES_NEW_ROMAN,'"Times New Roman", Times, serif'),d()(ue,pe.ARIAL,"Arial, Helvetica, sans-serif"),d()(ue,pe.IMPACT,"Impact, Charcoal, sans-serif"),d()(ue,pe.LUCIDA,'"Lucida Sans Unicode", "Lucida Grande", sans-serif'),d()(ue,pe.TAHOMA,"Tahoma, Geneva, sans-serif"),d()(ue,pe.TREBUCHET,'"Trebuchet MS", Helvetica, sans-serif'),d()(ue,pe.VERDANA,"Verdana, Geneva, sans-serif"),d()(ue,pe.COURIER,'"Courier New", Courier, monospace'),d()(ue,pe.CABIN,'"Cabin", sans-serif'),d()(ue,pe.CHIVO,'"Chivo", sans-serif'),d()(ue,pe.OPEN_SANS,'"Open Sans", sans-serif'),d()(ue,pe.FIRA_SANS,'"Fira Sans", sans-serif'),d()(ue,pe.ROBOTO,'"Roboto", sans-serif'),d()(ue,pe.NUNITO,'"Nunito", sans-serif'),d()(ue,pe.OVERPASS,'"Overpass", sans-serif'),d()(ue,pe.LATO,'"Lato", sans-serif'),d()(ue,pe.LIBRE_FRANKLIN,'"Libre Franklin", sans-serif'),d()(ue,pe.MONTSERRAT,'"Montserrat", sans-serif'),d()(ue,pe.POPPINS,'"Poppins", sans-serif'),d()(ue,pe.RUBIK,'"Rubik", sans-serif'),d()(ue,pe.RALEWAY,'"Raleway", sans-serif'),d()(ue,pe.JOSEFIN_SANS,'"Josefin Sans", sans-serif'),d()(ue,pe.ALEGREYA_SANS,'"Alegreya Sans", sans-serif'),d()(ue,pe.OSWALD,'"Oswald", sans-serif'),ue)),ve=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),we=Object.freeze({SHOW_RESULTS:"show-results",SHOW_CLOSED_BANNER:"show-closed-banner",HIDDEN:"hidden"}),he=Object.freeze({RADIO:"radio",BUTTON:"button"}),je=Object.freeze({LIST:"list",INLINE:"inline"});function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ye=function(e,t){return Object(b.map)(e,(function(e){return void 0!==e.answerIdFromApi?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{answerIdFromApi:t[e.answerId]})}))},Ce=function(e){return Object(b.isEmpty)(e)||void 0===e.text||null===e.text||""===e.text},Ee=function(e){var t=e.answers,n=e.pollIdFromApi,r=e.setErrorMessage,o=e.hideBranding,c=le(n),i=c.error,s=c.loading,u=c.results;Object(_.useEffect)((function(){r(i?Object(l.__)("Unfortunately, we're having some trouble retrieving the results for this poll at this time.","crowdsignal-forms"):"")}),[i]);var d=T()("crowdsignal-forms-poll__results",{"is-error":!!i,"is-loading":s}),f=Object(b.sum)(Object(b.values)(u));return Object(a.createElement)("div",{className:d},Object(a.createElement)("div",{className:"crowdsignal-forms-poll__results-list"},Object(b.map)(t,(function(e){var t;return!Ce(e)&&Object(a.createElement)(de,{key:e.answerId,error:!!i,loading:s,text:e.text,totalVotes:f,votes:u&&null!==(t=u[e.answerIdFromApi])&&void 0!==t?t:0})}))),Object(a.createElement)("div",{className:"crowdsignal-forms-poll__results-footer"},Object(a.createElement)("span",{className:"crowdsignal-forms-poll__results-total"},Object(l.sprintf)(Object(l._n)("%s total vote","%s total votes",f,"crowdsignal-forms"),f?f.toLocaleString():0)),!o&&Object(a.createElement)(be,null)))};Ee.propTypes={pollIdFromApi:L.a.number,answers:L.a.arrayOf(L.a.shape({answerId:L.a.string.isRequired,answerIdFromApi:L.a.number,text:L.a.string})).isRequired,setErrorMessage:L.a.func.isRequired,hideBranding:L.a.bool};var ke=Ee,xe=n(19),Se=n.n(xe),Te=function(e){for(var t=window.getComputedStyle(e).backgroundColor;"rgba(0, 0, 0, 0)"===t&&e.parentNode&&e.parentNode.nodeType===window.Node.ELEMENT_NODE;)e=e.parentNode,t=window.getComputedStyle(e).backgroundColor;return t},Ie=function(){return Object(a.createElement)("div",{className:"crowdsignal-forms__style-probe"},Object(a.createElement)("p",null),Object(a.createElement)("h3",null,"Text"),Object(a.createElement)("div",{className:"wp-block-button"},Object(a.createElement)("div",{className:"wp-block-button__link"})),Object(a.createElement)("div",{className:"entry-content"},Object(a.createElement)("div",{className:"alignwide"})))},Pe=function(e){if(null===e)return{};var t,n=e.querySelector(".wp-block-button__link"),r=e.querySelector("p"),o=e.querySelector("h3"),a=e.querySelector(".alignwide"),l=Te(n),c=Te(r),i=window.getComputedStyle(r).color;if(l===c){var s=(t=n,"0px"!==window.getComputedStyle(t).borderBlockStartWidth?window.getComputedStyle(t).borderBlockStartColor:null);l=s||i}return{accentColor:l,backgroundColor:c,textColor:i,textColorInverted:window.getComputedStyle(n).color,textFont:window.getComputedStyle(r).fontFamily,textSize:window.getComputedStyle(r).fontSize,headingFont:window.getComputedStyle(o).fontFamily,contentWideWidth:window.getComputedStyle(a).maxWidth}},Le=function(e){return Object(E.withFallbackStyles)((function(e){return{fallbackStyles:Pe(e.querySelector(".crowdsignal-forms__style-probe"))}}))((function(t){var n=t.fallbackStyles,r=Se()(t,["fallbackStyles"]);return Object(a.createElement)(e,w()({fallbackStyles:n||{},renderStyleProbe:function(){return n?null:Object(a.createElement)(Ie,null)}},r))}))};function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ae=function(e){var t=e.answer,n=e.answerStyle,r=e.index,o=e.isMultipleChoice,c=e.onChange,i=e.onDelete,s=e.onNewAnswer,u=e.disabled,f=function(e){return c(r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{text:e}))},m=function(){return i(r)},p=function(){return s(r+1)},g=T()("crowdsignal-forms-poll__answer",{"is-multiple-choice":o,"is-button":he.BUTTON===n});return Object(a.createElement)("div",{className:g},he.RADIO===n&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"crowdsignal-forms-poll__check"}),Object(a.createElement)("div",{className:"crowdsignal-forms-poll__answer-label-wrapper"},u?Object(a.createElement)("div",{className:"crowdsignal-forms-poll__answer-label"},t.text?Object(k.decodeEntities)(t.text):Object(l.__)("Enter an answer","crowdsignal-forms")):Object(a.createElement)(C.RichText,{className:"crowdsignal-forms-poll__answer-label",placeholder:Object(l.__)("Enter an answer","crowdsignal-forms"),multiline:!1,preserveWhiteSpace:!1,onChange:f,onSplit:p,onReplace:b.noop,onRemove:m,value:t.text,allowedFormats:[],withoutInteractiveFormatting:!0}))),he.BUTTON===n&&Object(a.createElement)("div",{className:"wp-block-button crowdsignal-forms-poll__block-button"},u?Object(a.createElement)("div",{className:"wp-block-button__link crowdsignal-forms-poll__submit-button"},t.text?Object(k.decodeEntities)(t.text):Object(l.__)("Enter an answer","crowdsignal-forms")):Object(a.createElement)(C.RichText,{className:"wp-block-button__link crowdsignal-forms-poll__submit-button",placeholder:Object(l.__)("Enter an answer","crowdsignal-forms"),multiline:!1,preserveWhiteSpace:!1,onChange:f,onSplit:p,onReplace:b.noop,onRemove:m,value:t.text,allowedFormats:[],withoutInteractiveFormatting:!0})))},Re=function(e,t){return Object(b.tap)(e.querySelectorAll("[role=textbox]")[t],(function(e){return e&&e.focus()}))},De=function(e){var t=e.attributes,n=e.isSelected,r=e.setAttributes,o=e.disabled,l=e.answerStyle,c=e.buttonAlignment,i=Object(_.useRef)(),u=function(e,n){return r({answers:Object(b.tap)(s()(t.answers),(function(t){t[e]=n}))})},d=function(e){Re(i.current,Math.max(e-1,0)),r({answers:Object(b.filter)(t.answers,(function(n){return t.answers.length<=2||n!==t.answers[e]}))})},f=function(e){e<t.answers.length&&r({answers:[].concat(s()(Object(b.slice)(t.answers,0,e)),[{}],s()(Object(b.slice)(t.answers,e,t.answers.length)))}),Re(i.current,Math.min(e,t.answers.length))},m=n&&Object(b.last)(t.answers).text?[].concat(s()(t.answers),[{}]):t.answers,p=T()({"is-button":he.BUTTON===l,"is-inline-button-alignment":je.INLINE===c},"crowdsignal-forms-poll__options"),g=he.RADIO===l;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{ref:i,className:p},Object(b.map)(m,(function(e,r){return function(e){return n&&!o||!Ce(e)}(e)&&Object(a.createElement)(Ae,{key:"poll-answer-".concat(r),answer:e,answerStyle:l,index:r,isMultipleChoice:t.isMultipleChoice,onChange:u,onDelete:d,onNewAnswer:f,disabled:o})}))),g&&Object(a.createElement)("div",{className:"crowdsignal-forms-poll__actions"},Object(a.createElement)("div",{className:"wp-block-button crowdsignal-forms-poll__block-button"},o?Object(a.createElement)("div",{className:"wp-block-button__link crowdsignal-forms-poll__submit-button"},t.submitButtonLabel):Object(a.createElement)(C.RichText,{className:"wp-block-button__link crowdsignal-forms-poll__submit-button",onChange:function(e){return r({submitButtonLabel:e})},value:t.submitButtonLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0}))))},Be=function(e){return Object(b.includes)(pe,e)?Oe[e]:null},Fe=function(e,t){var n,r,o,a,l=Object(b.isEmpty)(e.textColor)?t.textColor:e.textColor;return Object(b.mapKeys)({borderColor:null!==(n=e.borderColor)&&void 0!==n?n:t.accentColor,borderRadius:"".concat(e.borderRadius,"px"),borderWidth:"".concat(e.borderWidth,"px"),bgColor:e.backgroundColor,bodyFontFamily:null!==(r=Be(e.fontFamily))&&void 0!==r?r:t.textFont,questionFontFamily:null!==(o=Be(e.fontFamily))&&void 0!==o?o:t.headingFont,submitButtonBgColor:e.submitButtonBackgroundColor||t.accentColor,submitButtonTextColor:e.submitButtonTextColor||t.textColorInverted,textColor:l,textColorProperties:null!==(a=Me(l))&&void 0!==a?a:"0, 0, 0",contentWideWidth:t.contentWideWidth},(function(e,t){return"--crowdsignal-forms-".concat(Object(b.kebabCase)(t))}))},Me=function(e){return!e||"string"!=typeof e||-1===e.indexOf("rgb")&&0!==e.indexOf("#")||-1<e.indexOf("rgba")?null:(0===e.indexOf("#")&&(e=He(e)),e.match(/\((.*?)\)/)[1])},He=function(e){var t=0,n=0,r=0,o=4===e.length?"#".concat(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]):e;return 7===o.length&&(t=parseInt(o.substr(1,2),16)||0,n=parseInt(o.substr(3,2),16)||0,r=parseInt(o.substr(5,2),16)||0),"rgb(".concat(t,", ").concat(n,", ").concat(r,")")},Ve=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return T()({"has-bg-color":e.backgroundColor,"has-text-color":e.textColor,"has-submit-button-bg-color":e.submitButtonBackgroundColor,"has-submit-button-text-color":e.submitButtonTextColor,"has-border-radius":null!==(t=e.borderRadius)&&void 0!==t&&t,"has-box-shadow":e.hasBoxShadow},r)},We=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(ve.CLOSED===e)return!0;if(ve.CLOSED_AFTER===e){var r=new Date(t);return r<n}return!1},Ue=function(e,t){return e.isMultipleChoice?he.RADIO:!Object(b.isEmpty)(t)&&t.indexOf("is-style-buttons")>-1?he.BUTTON:he.RADIO},ze=function(e){e?Object(r.registerBlockStyle)("crowdsignal-forms/poll",{name:"buttons",label:Object(l.__)("Buttons","crowdsignal-forms")}):Object(r.unregisterBlockStyle)("crowdsignal-forms/poll","buttons")},qe=function(e){var t=e.signalWarning;return Object(a.createElement)("div",{className:"crowdsignal-forms__row"},Object(a.createElement)(E.Button,{href:"https://crowdsignal.com/pricing",isSecondary:!0,target:"_blank"},Object(l.__)("Upgrade","crowdsignal-forms")),t?Object(a.createElement)("div",{className:"crowdsignal-forms__sidebar-promote"},Object(a.createElement)("em",null,Object(l.__)("Your free Crowdsignal account has ","crowdsignal-forms"),Object(a.createElement)("strong",null,Object(a.createElement)(E.ExternalLink,{href:"https://crowdsignal.com/support/what-is-a-signal/"},Object(l.__)("reached the signals limit.","crowdsignal-forms"))))):Object(a.createElement)("div",{className:"crowdsignal-forms__sidebar-promote"},Object(a.createElement)("em",null,Object(l.__)("Hide Crowdsignal branding and get ","crowdsignal-forms"),Object(a.createElement)(E.ExternalLink,{href:"https://crowdsignal.com/support/what-is-a-signal/"},Object(l.__)("unlimited signals","crowdsignal-forms")))))},Ke=function(e){var t,n=e.attributes,r=e.className,o=e.setAttributes,c=e.fallbackBackgroundColor,i=e.fallbackTextColor,s=e.fallbackSubmitButtonBackgroundColor,u=e.fallbackSubmitButtonTextColor,d=e.viewResultsUrl,f=e.shouldPromote,m=e.signalWarning,p=""!==d,g=Ue(n,r);return me.REDIRECT===n.confirmMessageType&&(n.confirmMessageType=me.THANK_YOU),Object(a.createElement)(C.InspectorControls,null,Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Results","crowdsignal-forms"),initialOpen:!0},Object(a.createElement)("p",null,p?Object(l.__)("Manage results on ","crowdsignal-forms"):Object(l.__)("Publish this post to enable results on ","crowdsignal-forms"),Object(a.createElement)(E.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),Object(a.createElement)("p",null,Object(a.createElement)(E.Button,{href:d,isSecondary:!0,target:"_blank",disabled:!p},Object(l.__)("View results","crowdsignal-forms"))),Object(a.createElement)(E.TextControl,{value:Object(k.decodeEntities)(null!==(t=n.title)&&void 0!==t?t:n.question),label:Object(l.__)("Title of the poll block","crowdsignal-forms"),onChange:function(e){return o({title:e})}}),f&&Object(a.createElement)(qe,{signalWarning:m})),Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Confirmation message","crowdsignal-forms"),initialOpen:!1},Object(a.createElement)(E.SelectControl,{value:n.confirmMessageType,label:Object(l.__)("On submission","crowdsignal-forms"),options:[{label:Object(l.__)("Show results","crowdsignal-forms"),value:me.RESULTS},{label:Object(l.__)('Show "Thank You" message',"crowdsignal-forms"),value:me.THANK_YOU},{label:Object(l.__)("Show a custom text message","crowdsignal-forms"),value:me.CUSTOM_TEXT}],onChange:function(e){return Object(b.includes)(me,e)&&o({confirmMessageType:e})}}),me.CUSTOM_TEXT===n.confirmMessageType&&Object(a.createElement)(E.TextareaControl,{value:n.customConfirmMessage,label:Object(l.__)("Message text","crowdsignal-forms"),placeholder:Object(l.__)("Thanks for voting!","crowdsignal-forms"),onChange:function(e){return o({customConfirmMessage:e})}}),me.REDIRECT===n.confirmMessageType&&Object(a.createElement)(C.URLInput,{className:"crowdsignal-forms__redirect-url",value:n.redirectAddress,label:Object(l.__)("Redirect address","crowdsignal-forms"),onChange:function(e){return o({redirectAddress:e})}})),Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Settings","crowdsignal-forms"),initialOpen:!1},Object(a.createElement)(E.SelectControl,{value:n.pollStatus,label:Object(l.__)("Status","crowdsignal-forms"),options:[{label:Object(l.__)("Open","crowdsignal-forms"),value:ve.OPEN},{label:Object(l.__)("Closed after","crowdsignal-forms"),value:ve.CLOSED_AFTER},{label:Object(l.__)("Closed","crowdsignal-forms"),value:ve.CLOSED}],onChange:function(e){Object(b.includes)(ve,e)&&o({closedAfterDateTime:e===ve.CLOSED_AFTER?new Date((new Date).getTime()+864e5).toISOString():null,pollStatus:e})}}),ve.CLOSED_AFTER===n.pollStatus&&Object(a.createElement)(E.TimePicker,{currentTime:n.closedAfterDateTime,label:Object(l.__)("Close poll on","crowdsignal-forms"),onChange:function(e){var t=new Date(e);o({closedAfterDateTime:t.toISOString()})},is12Hour:!0}),ve.OPEN!==n.pollStatus&&Object(a.createElement)(E.SelectControl,{value:n.closedPollState,label:Object(l.__)("When poll is closed","crowdsignal-forms"),options:[{label:Object(l.__)("Show results","crowdsignal-forms"),value:we.SHOW_RESULTS},{label:Object(l.__)('Show poll with "Closed" banner',"crowdsignal-forms"),value:we.SHOW_CLOSED_BANNER},{label:Object(l.__)("Hide poll","crowdsignal-forms"),value:we.HIDDEN}],onChange:function(e){return Object(b.includes)(we,e)&&o({closedPollState:e})}})),Object(a.createElement)(C.PanelColorSettings,{title:Object(l.__)("Block styling","crowdsignal-forms"),initialOpen:!1,colorSettings:[{value:n.textColor,onChange:function(e){return o({textColor:e})},label:Object(l.__)("Text color","crowdsignal-forms")},{value:n.backgroundColor,onChange:function(e){return o({backgroundColor:e})},label:Object(l.__)("Background color","crowdsignal-forms")},{value:n.borderColor,onChange:function(e){return o({borderColor:e})},label:Object(l.__)("Border color","crowdsignal-forms")}]},Object(a.createElement)(C.ContrastChecker,{textColor:n.textColor,backgroundColor:n.backgroundColor,fallbackBackgroundColor:c,fallbackTextColor:i}),Object(a.createElement)(E.SelectControl,{value:n.fontFamily,label:Object(l.__)("Choose font","crowdsignal-forms"),options:[{label:Object(l.__)("Default theme font","crowdsignal-forms"),value:pe.THEME_DEFAULT},{label:"Alegreya Sans",value:pe.ALEGREYA_SANS},{label:"Arial",value:pe.ARIAL},{label:"Cabin",value:pe.CABIN},{label:"Chivo",value:pe.CHIVO},{label:"Courier",value:pe.COURIER},{label:"Fira Sans",value:pe.FIRA_SANS},{label:"Georgia",value:pe.GEORGIA},{label:"Impact",value:pe.IMPACT},{label:"Josefin Sans",value:pe.JOSEFIN_SANS},{label:"Lato",value:pe.LATO},{label:"Libre Franklin",value:pe.LIBRE_FRANKLIN},{label:"Lucida",value:pe.LUCIDA},{label:"Montserrat",value:pe.MONTSERRAT},{label:"Nunito",value:pe.NUNITO},{label:"Open Sans",value:pe.OPEN_SANS},{label:"Oswald",value:pe.OSWALD},{label:"Overpass",value:pe.OVERPASS},{label:"Palatino",value:pe.PALATINO},{label:"Poppins",value:pe.POPPINS},{label:"Raleway",value:pe.RALEWAY},{label:"Roboto",value:pe.ROBOTO},{label:"Rubik",value:pe.RUBIK},{label:"Tahoma",value:pe.TAHOMA},{label:"Times New Roman",value:pe.TIMES_NEW_ROMAN},{label:"Trebuchet",value:pe.TREBUCHET},{label:"Verdana",value:pe.VERDANA}],onChange:function(e){return Object(b.includes)(pe,e)&&o({fontFamily:e})}}),"full"!==n.align&&Object(a.createElement)("div",{className:"crowdsignal-forms__row"},Object(a.createElement)(E.TextControl,{type:"number",label:Object(l.__)("Width (%)","crowdsignal-forms"),value:n.width,onChange:function(e){return o({width:parseInt(e,10)})}}),Object(a.createElement)(E.Button,{isSmall:!0,className:"crowdsignal-forms__reset-width-button",onClick:function(){return o({width:100})}},Object(l.__)("Reset","crowdsignal-forms"))),Object(a.createElement)("div",{className:"crowdsignal-forms__row"},Object(a.createElement)(E.TextControl,{label:Object(l.__)("Border thickness","crowdsignal-forms"),value:n.borderWidth,onChange:function(e){o({borderWidth:parseInt(e,10)||0})},type:"number",className:"crowdsignal-forms__small-text-input"}),Object(a.createElement)(E.TextControl,{label:Object(l.__)("Corner radius","crowdsignal-forms"),value:n.borderRadius,onChange:function(e){o({borderRadius:parseInt(e,10)||0})},type:"number",className:"crowdsignal-forms__small-text-input"})),Object(a.createElement)(E.ToggleControl,{label:Object(l.__)("Drop shadow","crowdsignal-forms"),checked:n.hasBoxShadow,onChange:function(e){o({hasBoxShadow:e})}})),Object(a.createElement)(C.PanelColorSettings,{title:Object(l.__)("Button styling","crowdsignal-forms"),initialOpen:!1,colorSettings:[{value:n.submitButtonTextColor,onChange:function(e){return o({submitButtonTextColor:e})},label:Object(l.__)("Text color","crowdsignal-forms")},{value:n.submitButtonBackgroundColor,onChange:function(e){return o({submitButtonBackgroundColor:e})},label:Object(l.__)("Background color","crowdsignal-forms")}]},Object(a.createElement)(C.ContrastChecker,{textColor:n.submitButtonTextColor,backgroundColor:n.submitButtonBackgroundColor,fallbackBackgroundColor:s,fallbackTextColor:u}),he.BUTTON===g&&Object(a.createElement)(E.SelectControl,{value:n.buttonAlignment,label:Object(l.__)("Alignment","crowdsignal-forms"),options:[{value:je.LIST,label:Object(l.__)("List","crowdsignal-forms")},{value:je.INLINE,label:Object(l.__)("Inline","crowdsignal-forms")}],onChange:function(e){return o({buttonAlignment:e})}})),Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Answer settings","crowdsignal-forms"),initialOpen:!0},Object(a.createElement)(E.CheckboxControl,{checked:n.hasOneResponsePerComputer,label:Object(l.__)("One response per computer","crowdsignal-forms"),onChange:function(e){return o({hasOneResponsePerComputer:e})}}),Object(a.createElement)(E.CheckboxControl,{checked:n.randomizeAnswers,label:Object(l.__)("Randomize answer order","crowdsignal-forms"),onChange:function(e){return o({randomizeAnswers:e})}})))};function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ze=[{icon:function(){return Object(a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("path",{d:"M20 6.75H12V5.25H20V6.75Z"}),Object(a.createElement)("path",{d:"M20 12.5H12V11H20V12.5Z"}),Object(a.createElement)("path",{d:"M20 18.75H12V17.25H20V18.75Z"}),Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 7C6.55228 7 7 6.55228 7 6C7 5.44772 6.55228 5 6 5C5.44772 5 5 5.44772 5 6C5 6.55228 5.44772 7 6 7ZM6 8C7.10457 8 8 7.10457 8 6C8 4.89543 7.10457 4 6 4C4.89543 4 4 4.89543 4 6C4 7.10457 4.89543 8 6 8Z"}),Object(a.createElement)("path",{d:"M6 12.75C6.55228 12.75 7 12.3023 7 11.75C7 11.1977 6.55228 10.75 6 10.75C5.44772 10.75 5 11.1977 5 11.75C5 12.3023 5.44772 12.75 6 12.75ZM6 13.75C7.10457 13.75 8 12.8546 8 11.75C8 10.6454 7.10457 9.75 6 9.75C4.89543 9.75 4 10.6454 4 11.75C4 12.8546 4.89543 13.75 6 13.75Z"}),Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 19C6.55228 19 7 18.5523 7 18C7 17.4477 6.55228 17 6 17C5.44772 17 5 17.4477 5 18C5 18.5523 5.44772 19 6 19ZM6 20C7.10457 20 8 19.1046 8 18C8 16.8954 7.10457 16 6 16C4.89543 16 4 16.8954 4 18C4 19.1046 4.89543 20 6 20Z"}))},title:Object(l.__)("Choose one answer","crowdsignal-forms"),value:!1},{icon:function(){return Object(a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 10.75H5V12.75H7V10.75ZM4 9.75V13.75H8V9.75H4Z"}),Object(a.createElement)("path",{d:"M4 4H8V8H4V4Z"}),Object(a.createElement)("path",{d:"M4 16H8V20H4V16Z"}),Object(a.createElement)("path",{d:"M20 6.75H12V5.25H20V6.75Z"}),Object(a.createElement)("path",{d:"M20 12.5H12V11H20V12.5Z"}),Object(a.createElement)("path",{d:"M20 18.75H12V17.25H20V18.75Z"}))},title:Object(l.__)("Choose multiple answers","crowdsignal-forms"),value:!0}],Ye=function(e){var t=e.attributes,n=e.setAttributes,r=Object(b.map)(Ze,(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isActive:e.value===t.isMultipleChoice,onClick:function(){n({isMultipleChoice:e.value}),ze(e.value)}})}));return Object(a.createElement)(C.BlockControls,null,Object(a.createElement)(E.Toolbar,{controls:r}))},Qe=function(e){var t=e.children;return Object(a.createElement)("div",{className:"crowdsignal-forms-poll__error-banner"},t)},Je="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Xe=new Uint8Array(16);function $e(){if(!Je)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Je(Xe)}for(var et=[],tt=0;tt<256;++tt)et.push((tt+256).toString(16).substr(1));var nt=function(e,t){var n=t||0;return(et[e[n+0]]+et[e[n+1]]+et[e[n+2]]+et[e[n+3]]+"-"+et[e[n+4]]+et[e[n+5]]+"-"+et[e[n+6]]+et[e[n+7]]+"-"+et[e[n+8]]+et[e[n+9]]+"-"+et[e[n+10]]+et[e[n+11]]+et[e[n+12]]+et[e[n+13]]+et[e[n+14]]+et[e[n+15]]).toLowerCase()};var rt=function(e,t,n){var r=(e=e||{}).random||(e.rng||$e)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return nt(r)},ot=function(e){var t=e.onEditClick;return Object(a.createElement)("div",{className:"crowdsignal-forms-poll__edit-bar"},Object(a.createElement)("div",{className:"crowdsignal-forms-poll__edit-bar-message"},Object(l.__)("Warning! This poll is published. Deleting or reordering answers may cause the loss of existing responses.","crowdsignal-forms")),Object(a.createElement)("button",{className:"crowdsignal-forms-poll__edit-bar-button",onClick:function(){t()}},Object(l.__)("Edit","crowdsignal-forms")))},at=Object(b.debounce)((function(e,t){window._tkq=window._tkq||[],window._tkq.push(["recordEvent","crowdsignal_connection_failed",{author_id:e,block_name:t}])}),5e3),lt=function(e){var t=e.blockIcon,n=e.blockName,r=e.children,o=ie(),c=o.accountInfo,i=o.reloadAccountInfo,s=c&&0!==c.id,u=!!c.is_verified,d=Object(f.useSelect)((function(e){return e("core").getCurrentUser()})),b=function(){var e=D()(A.a.mark((function e(){var t,n,r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s,e.next=3,i();case 3:n=e.sent,r=0!==n.id,o=!!n.is_verified,r||window.open("/wp-admin/options-general.php?page=crowdsignal-forms-settings"),t&&!o&&window.open("https://wordpress.com/me/account");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(s&&u)return r;var m=!s,p=s&&!u;return at(d&&d.id?d.id:0,n),Object(a.createElement)("div",{className:"crowdsignal-forms__connect-to-crowdsignal"},Object(a.createElement)("div",{className:"crowdsignal-forms__connect-to-crowdsignal-header"},t,Object(a.createElement)("div",{className:"crowdsignal-forms__connect-to-crowdsignal-title"},n)),Object(a.createElement)("div",{className:"crowdsignal-forms__connect-to-crowdsignal-body"},m&&Object(l.__)("You need to connect to a Crowdsignal account to collect and manage your results.","crowdsignal-forms"),p&&Object(l.__)("Please verify your WordPress.com email address in order to publish your poll.","crowdsignal-forms")),Object(a.createElement)(E.Button,{isPrimary:!0,onClick:b},m&&Object(l.__)("Connect to Crowdsignal","crowdsignal-forms"),p&&Object(l.__)("Verify or Change your Email Address","crowdsignal-forms")))};function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var st=function(e){return!!e&&("crowdsignal-forms/poll"===e.name||"crowdsignal-forms/applause"===e.name||"crowdsignal-forms/vote"===e.name)},ut=!1,dt=!1;!function(){if(!ut){ut=!0;var e=Object(f.select)("core/editor"),t=e.isEditedPostDirty,n=e.isEditedPostNew,r=e.isSavingPost,o=e.isCleanNewPost,a=e.getCurrentPostId,l=Object(f.dispatch)("crowdsignal-forms/polls"),c=l.setTryFetchPollData,i=l.setPollApiDataForClientId,s=l.setIsFetchingPollData,u=Object(f.select)("crowdsignal-forms/polls"),d=u.shouldTryFetchingPollData,m=u.getPollDataByClientId,p=u.isFetchingPollData;Object(f.subscribe)((function(){var e=Object(b.filter)(Object(f.select)("core/block-editor").getBlocks(),st);if(!(e.length<1)&&(!p()&&!(o()||n()||r()||t())&&a())){var l=Object(b.filter)(e,(function(e){var t=e.attributes;return t.pollId&&null===m(t.pollId)}));l.length<1||(d()?p()||(s(!0),Promise.all(Object(b.map)(l,(function(e){var t=e.attributes.pollId;return Q()({path:"/crowdsignal-forms/v1/polls/".concat(t,"?cached=1"),method:"GET"}).then((function(e){return i(t,it({},e,{viewResultsUrl:"https://app.crowdsignal.com/polls/".concat(e.id,"/results")}))}),(function(){return i(t,null)}))}))).finally((function(){return s(!1)}))):c(!0))}}))}}();var ft=function(e){return function(t){var n=t.attributes,r=t.setAttributes,o=t.addPollClientId,l=t.removePollClientId;return Object(_.useEffect)((function(){return("p2tenberg"in window||"p2editor"in window)&&function(){if(!dt){dt=!0;var e=null,t=function(){null!==e&&clearTimeout(e),e=setTimeout((function(){return n()}),1e3+1e3*Math.random())},n=function(){var e=Object(f.select)("crowdsignal-forms/polls"),n=e.getPollClientIds,r=e.getPollDataByClientId,o=e.shouldTryFetchingPollData,a=e.isFetchingPollData,l=Object(b.filter)(n(),(function(e){return null===r(e)}));if(l.length<1)return t();var c=Object(f.dispatch)("crowdsignal-forms/polls"),i=c.setTryFetchPollData,s=c.setPollApiDataForClientId,u=c.setIsFetchingPollData;return o()?a()||(u(!0),Promise.all(Object(b.map)(l,(function(e){return Q()({path:"/crowdsignal-forms/v1/polls/".concat(e,"?cached=1"),method:"GET"}).then((function(t){return s(e,it({},t,{viewResultsUrl:"https://app.crowdsignal.com/polls/".concat(t.id,"/results")}))}),(function(){return s(e,null)}))}))).finally((function(){return u(!1)}))):i(!0),t()};n()}}(),n.pollId&&o(n.pollId),function(){n.pollId&&l(n.pollId)}}),[]),function(e,t,n,r){Object(_.useEffect)((function(){if(!Object(b.isEmpty)(t))if(window.csPolls||(window.csPolls={}),window.csPolls[t])if(window.csPolls[t].indexOf(e)>-1);else{var o=Object(b.map)(n,(function(e){return Object(b.omit)(e,["answerId"])}));r({pollId:null,answers:o})}else window.csPolls[t]=[e]}),[t])}(t.clientId,n.pollId,n.answers,r),Object(a.createElement)(e,t)}},bt=function(e){return Object(x.compose)([Object(f.withSelect)((function(e,t){var n=e("crowdsignal-forms/polls"),r=n.getPollDataByClientId,o=n.shouldTryFetchingPollData,a=n.isFetchingPollData,l=t.attributes;return{pollDataFromApi:l.pollId?r(l.pollId):null,getPollDataByClientId:r,shouldTryFetchingPollData:o,isFetchingPollData:a}})),Object(f.withDispatch)((function(e){var t=e("crowdsignal-forms/polls");return{setTryFetchPollData:t.setTryFetchPollData,setPollApiDataForClientId:t.setPollApiDataForClientId,setIsFetchingPollData:t.setIsFetchingPollData,addPollClientId:t.addPollClientId,removePollClientId:t.removePollClientId}})),ft])(e)},mt=function(e){var t=e.icon,n=e.children,r=e.componentActions,o=void 0===r?[]:r,l=Se()(e,["icon","children","componentActions"]);return Object(a.createElement)(E.Notice,w()({className:"crowdsignal-forms__editor-notice"},l),t&&Object(a.createElement)("div",{className:"crowdsignal-forms__editor-notice-icon"},Object(a.createElement)(E.Icon,{icon:t})),Object(a.createElement)("div",{className:"crowdsignal-forms__editor-notice-text"},n),o.map((function(e){return e})))},pt=function(){return Object(a.createElement)(mt,{icon:"warning",status:"warn",isDismissible:!1,actions:[{label:Object(l.__)("Please upgrade","crowdsignal-forms"),url:"https://crowdsignal.com/pricing",className:"is-secondary",noDefaultClasses:!0}]},Object(l.__)("Your free Crowdsignal account has ","crowdsignal-forms"),Object(a.createElement)(E.ExternalLink,{href:"https://crowdsignal.com/support/what-is-a-signal/"},Object(l.__)("exceeded 2500 signals.","crowdsignal-forms")))};function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ot=Object(x.compose)([Le,bt,function(e){return function(t){var n=t.attributes,r=t.setAttributes;return Object(_.useEffect)((function(){if(!n.pollId){var e=rt();r({pollId:e})}if(Object(b.some)(n.answers,(function(e){return!e.answerId&&e.text}))){var t=Object(b.map)(n.answers,(function(e){return e.answerId||!e.text?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{answerId:rt()})}));r({answers:t})}})),Object(a.createElement)(e,t)}}])((function(e){var t=e.attributes,n=e.className,r=e.fallbackStyles,o=e.isSelected,i=e.setAttributes,s=e.renderStyleProbe,u=e.pollDataFromApi,d=Object(_.useState)(!0),f=j()(d,2),m=f[0],p=f[1],g=Object(_.useState)(""),O=j()(g,2),v=O[0],h=O[1],y=!Object(b.isEmpty)(u),x=u?u.viewResultsUrl:"",S=u?u.id:null,T={};u&&Object(b.map)(u.answers,(function(e){T[e.client_id]=e.id}));var P=o&&"full"!==t.align,L="full"!==t.align?"".concat(t.width,"%"):"auto",N=We(t.pollStatus,t.closedAfterDateTime),A=t.note||o&&m,R=N&&we.SHOW_RESULTS===t.closedPollState,D=N&&we.HIDDEN===t.closedPollState,B=ie().accountInfo,F=Object(b.get)(B,"capabilities",[]).includes("hide-branding");Object(_.useEffect)((function(){return p(!y)}),[o]),Object(_.useEffect)((function(){o&&ze(!t.isMultipleChoice)}),[t.isMultipleChoice,o]);var M=o&&y&&!m,H=Ue(t,n);t.fontFamily&&function(e){if(!Object(b.isEmpty)(e)&&pe.THEME_DEFAULT!==e&&-1!==ge.indexOf(e)){var t="https://fonts.googleapis.com/css2?family=".concat(e,":wght@400;600;700&display=swap");0===Object(b.filter)(Array.from(document.head.childNodes),(function(e){return"link"===e.nodeName.toLowerCase()&&e.href===t})).length&&document.head.appendChild(Object(b.tap)(document.createElement("link"),(function(e){e.type="text/css",e.rel="stylesheet",e.href=t})))}}(t.fontFamily);var V=Object(b.get)(B,["signalCount","shouldDisplay"]),W=V&&Object(b.get)(B,["signalCount","count"])>=Object(b.get)(B,["signalCount","userLimit"]);return Object(a.createElement)(lt,{blockIcon:Object(a.createElement)(c,null),blockName:Object(l.__)("Crowdsignal Poll","crowdsignal-forms")},Object(a.createElement)(Ye,e),Object(a.createElement)(Ke,w()({},e,{viewResultsUrl:x,shouldPromote:V,signalWarning:W})),W&&Object(a.createElement)(pt,null),Object(a.createElement)(E.ResizableBox,{className:"crowdsignal-forms-poll__resize-wrapper",size:{height:"auto",width:L},minWidth:"25%",maxWidth:"100%",enable:{left:!0,right:!0},onResizeStop:function(e,t,n){"right"!==t&&"left"!==t||i({width:Object(b.round)(n.offsetWidth/n.parentNode.offsetWidth*100)})},showHandle:P,resizeRatio:2},Object(a.createElement)("div",{className:Ve(t,n,{"is-selected-in-editor":o,"is-closed":N,"is-hidden":D},"crowdsignal-forms-poll"),style:Fe(t,r)},M&&Object(a.createElement)(ot,{onEditClick:function(){p(!0)}}),v&&Object(a.createElement)(Qe,null,v),Object(a.createElement)("div",{className:"crowdsignal-forms-poll__content"},m?Object(a.createElement)(C.RichText,{tagName:"h3",className:"crowdsignal-forms-poll__question",placeholder:Object(l.__)("Enter your question","crowdsignal-forms"),onChange:function(e){return i({question:e})},value:t.question,allowedFormats:[]}):Object(a.createElement)(C.RichText.Content,{tagName:"h3",className:"crowdsignal-forms-poll__question",placeholder:Object(l.__)("Enter your question","crowdsignal-forms"),value:Object(k.decodeEntities)(t.question)}),A&&(m?Object(a.createElement)(C.RichText,{tagName:"p",className:"crowdsignal-forms-poll__note",placeholder:Object(l.__)("Add a note (optional)","crowdsignal-forms"),onChange:function(e){return i({note:e})},value:t.note,allowedFormats:[]}):Object(a.createElement)(C.RichText.Content,{tagName:"div",className:"crowdsignal-forms-poll__note",placeholder:Object(l.__)("Add a note (optional)","crowdsignal-forms"),value:Object(k.decodeEntities)(t.note)})),!R&&Object(a.createElement)(De,w()({},e,{setAttributes:i,disabled:!m,answerStyle:H,buttonAlignment:t.buttonAlignment})),R&&Object(a.createElement)(ke,{answers:ye(Object(b.filter)(t.answers,(function(e){return!Ce(e)})),T),pollIdFromApi:S,hideBranding:F,setErrorMessage:h}),!F&&Object(a.createElement)(be,{editing:!0})),N&&Object(a.createElement)(I,{isPollHidden:D,isPollClosed:N}),s())))})),vt={pollId:{type:"string",default:null},isMultipleChoice:{type:"boolean",default:!1},title:{type:"string",default:null},question:{type:"string",default:""},note:{type:"string",default:""},answers:{type:"array",default:[{},{},{}],items:{type:"object",properties:{answerId:{type:"string",default:null},text:{type:"string",default:""}}}},submitButtonLabel:{type:"string",default:Object(l.__)("Submit","crowdsignal-forms")},submitButtonTextColor:{type:"string"},submitButtonBackgroundColor:{type:"string"},confirmMessageType:{type:"string",default:me.RESULTS},customConfirmMessage:{type:"string"},redirectAddress:{type:"string"},textColor:{type:"string"},backgroundColor:{type:"string"},borderColor:{type:"string"},borderWidth:{type:"number",default:2},borderRadius:{type:"number",default:0},hasBoxShadow:{type:"boolean",default:!1},fontFamily:{type:"string",default:pe.THEME_DEFAULT},hasOneResponsePerComputer:{type:"boolean",default:!1},randomizeAnswers:{type:"boolean",default:!1},align:{type:"string"},width:{type:"number",default:100},pollStatus:{type:"string",default:ve.OPEN},closedPollState:{type:"string",default:we.SHOW_RESULTS},closedAfterDateTime:{type:"string",default:null},hideBranding:{type:"boolean",default:!1},buttonAlignment:{type:"string",default:je.LIST}},wt={title:Object(l.__)("Poll","crowdsignal-forms"),description:Object(l.__)("Create polls and get your audiences opinion  powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",keywords:[Object(l.__)("ask","crowdsignal-forms"),"crowdsignal",Object(l.__)("feedback","crowdsignal-forms"),Object(l.__)("form","crowdsignal-forms"),Object(l.__)("opinion","crowdsignal-forms"),Object(l.__)("poll","crowdsignal-forms"),Object(l.__)("pop","crowdsignal-forms"),Object(l.__)("question","crowdsignal-forms"),Object(l.__)("quiz","crowdsignal-forms"),Object(l.__)("research","crowdsignal-forms"),Object(l.__)("survey","crowdsignal-forms"),Object(l.__)("vote","crowdsignal-forms")],icon:Object(a.createElement)(c,null),edit:Ot,attributes:vt,supports:{align:["center","wide","full"]},getEditWrapperProps:function(e){return{"data-align":e.align}},example:{attributes:{question:Object(l.__)("How did you hear about us?","crowdsignal-forms"),answers:[{text:Object(l.__)("Search","crowdsignal-forms")},{text:Object(l.__)("Friend","crowdsignal-forms")},{text:Object(l.__)("Email","crowdsignal-forms")}]}},styles:[{name:"default",label:Object(l.__)("List","crowdsignal-forms"),isDefault:!0},{name:"buttons",label:Object(l.__)("Buttons","crowdsignal-forms")}],variations:[{isDefault:!0,attributes:{className:"is-style-buttons"}}]},ht=function(){return Object(a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("mask",{id:"maskVote","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"3",y:"3",width:"18",height:"18"},Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.5999 9.525H13.3942L14.1779 5.75475L14.2027 5.49075C14.2027 5.1525 14.0624 4.839 13.8397 4.61625L12.9652 3.75L7.53666 9.18675C7.23142 9.48374 7.04992 9.89621 7.04991 10.3499H3.75V18.6824H7.05V18.6178C7.05963 19.5172 7.79834 20.25 8.69991 20.25H16.1249C16.8097 20.25 17.3954 19.8375 17.6429 19.2435L20.1344 13.4273C20.2087 13.2375 20.2499 13.0395 20.2499 12.825V11.175C20.2499 10.2675 19.5074 9.525 18.5999 9.525ZM7.05 18.6178V10.3499H7.04991C7.04991 10.35 7.04991 10.35 7.04991 10.35V18.6C7.04991 18.6059 7.04994 18.6119 7.05 18.6178ZM18.5999 12.825L16.1249 18.6H8.69986V10.35L12.2804 6.76952L11.3646 11.175H18.5999V12.825Z",fill:"white"})),Object(a.createElement)("g",{mask:"url(#maskVote)"},Object(a.createElement)("rect",{x:"1.00024",y:"1.25",width:"22",height:"22"})))},jt=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),_t=(Object.freeze({CONNECTED:"connected",NOT_CONNECTED:"not-connected",NOT_VERIFIED:"not-verified"}),[{title:Object(l.__)("Small","crowdsignal-forms"),size:"small"},{title:Object(l.__)("Medium","crowdsignal-forms"),size:"medium"},{title:Object(l.__)("Large","crowdsignal-forms"),size:"large"}]),yt={position:"bottom right",isAlternate:!0,className:"crowdsignal-forms-vote__size-dropdown"},Ct=function(e){var t=e.attributes,n=e.setAttributes,r=e.viewResultsUrl,o=e.signalWarning,c=e.shouldPromote,i=""!==r;return Object(a.createElement)(C.InspectorControls,null,Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Results","crowdsignal-forms"),initialOpen:!0},Object(a.createElement)("p",null,i?Object(l.__)("Manage results on ","crowdsignal-forms"):Object(l.__)("Publish this post to enable results on ","crowdsignal-forms"),Object(a.createElement)(E.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),Object(a.createElement)("p",null,Object(a.createElement)(E.Button,{href:r,isSecondary:!0,target:"_blank",disabled:!i},Object(l.__)("View results","crowdsignal-forms"))),Object(a.createElement)(E.TextControl,{value:t.title,label:Object(l.__)("Title of the vote block","crowdsignal-forms"),onChange:function(e){return n({title:e})}}),c&&Object(a.createElement)(qe,{signalWarning:o})),Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Settings","crowdsignal-forms")},Object(a.createElement)(E.SelectControl,{value:t.pollStatus,label:Object(l.__)("Status","crowdsignal-forms"),options:[{label:Object(l.__)("Open","crowdsignal-forms"),value:jt.OPEN},{label:Object(l.__)("Closed after","crowdsignal-forms"),value:jt.CLOSED_AFTER},{label:Object(l.__)("Closed","crowdsignal-forms"),value:jt.CLOSED}],onChange:function(e){Object(b.includes)(jt,e)&&n({closedAfterDateTime:e===jt.CLOSED_AFTER?new Date((new Date).getTime()+864e5).toISOString():null,pollStatus:e})}}),jt.CLOSED_AFTER===t.pollStatus&&Object(a.createElement)(E.TimePicker,{currentTime:t.closedAfterDateTime,label:Object(l.__)("Close vote block on","crowdsignal-forms"),onChange:function(e){var t=new Date(e);n({closedAfterDateTime:t.toISOString()})},is12Hour:!0})))},Et=function(){return Object(a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.1894 5.75L13.6668 5.75L13.6668 4.25H19.0002H19.7502L19.7502 5V10.3333H18.2502V6.81054L6.81072 18.25L10.3333 18.25V19.75L5 19.75H4.25V19V13.6666L5.75 13.6666L5.75 17.1894L17.1894 5.75Z"}))},kt=function(){return Object(a.createElement)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("line",{x1:"8",y1:"8.5",x2:"24",y2:"8.5",stroke:"currentColor"}),Object(a.createElement)("line",{x1:"8",y1:"15",x2:"24",y2:"15",stroke:"currentColor",strokeWidth:"2"}),Object(a.createElement)("line",{x1:"8",y1:"22.5",x2:"24",y2:"22.5",stroke:"currentColor",strokeWidth:"3"}))},xt=function(){return Object(a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("path",{d:"M12.0078 18.2266C14.7656 18.2266 16.4062 15.9531 16.4062 12.3438C16.4062 8.73438 14.75 6.5 12.0078 6.5C9.25781 6.5 7.59375 8.75 7.59375 12.3516C7.59375 15.9688 9.24219 18.2266 12.0078 18.2266ZM12.0078 16.5781C10.5078 16.5781 9.625 15 9.625 12.3438C9.625 9.73438 10.5234 8.14844 12.0078 8.14844C13.4844 8.14844 14.3672 9.71875 14.3672 12.3516C14.3672 15.0078 13.5 16.5781 12.0078 16.5781Z"}))};function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tt=function(e){var t=e.attributes,n=e.setAttributes,r=Object(b.get)(t,"size","medium"),o=_t,c=Object(_.useState)(!1),i=j()(c,2),s=i[0],u=i[1],f=function(){return u(!s)},m=t.hideResults?Object(l.__)("Show vote counters","crowdsignal-forms"):Object(l.__)("Hide vote counters","crowdsignal-forms");return Object(a.createElement)(C.BlockControls,null,Object(a.createElement)(E.ToolbarGroup,{isCollapsed:!0,icon:Et,label:Object(l.__)("Change block size","crowdsignal-forms"),popoverProps:yt,controls:o.map((function(e){var t=e.size;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isActive:r===t,role:"menuitemradio",onClick:function(){return n({size:t})}})}))}),Object(a.createElement)(E.Toolbar,{controls:[{icon:kt,onClick:f},{icon:xt,label:m,onClick:function(){return n({hideResults:!t.hideResults})},isActive:!t.hideResults,isPressed:!t.hideResults}]}),s&&Object(a.createElement)(E.Popover,{className:"crowdsignal-forms__border-popover",onFocusOutside:f},Object(a.createElement)("div",{className:"crowdsignal-forms__row"},Object(a.createElement)(E.TextControl,{label:Object(l.__)("Border thickness","crowdsignal-forms"),type:"number",className:"crowdsignal-forms__small-text-input",onChange:function(e){n({borderWidth:parseInt(e,10)||0})},value:t.borderWidth||0}),Object(a.createElement)(E.TextControl,{label:Object(l.__)("Corner radius","crowdsignal-forms"),type:"number",className:"crowdsignal-forms__small-text-input",onChange:function(e){n({borderRadius:parseInt(e,10)||0})},value:t.borderRadius||0}))))},It=function(e){return function(t){return function(n){var r=n.attributes,o=n.setAttributes;return Object(_.useEffect)((function(){Object(b.forEach)(e,(function(e){r[e]||o(d()({},e,rt()))}))}),[]),Object(a.createElement)(t,n)}}},Pt=function(e,t,n,r){return Object(_.useEffect)((function(){Object(b.isEmpty)(window.csBlockTypeCount)&&(window.csBlockTypeCount={}),Object(b.isNil)(window.csBlockTypeCount[e])&&(window.csBlockTypeCount[e]=0),window.csBlockTypeCount[e]++,null===n.title&&(1===window.csBlockTypeCount[e]?r({title:t}):r({title:"".concat(t," ").concat(window.csBlockTypeCount[e])}))}),[])},Lt=Object(x.compose)([bt,It(["pollId"])])((function(e){var t=e.attributes,n=e.setAttributes,r=e.className,o=e.pollDataFromApi;Pt(e.name,Object(l.__)("Untitled Vote","crowdsignal-forms"),t,n);var c=o?o.viewResultsUrl:"",i=We(t.pollStatus,t.closedAfterDateTime),s=T()(r,"crowdsignal-forms-vote","size-".concat(t.size),{"no-results":t.hideResults,"is-closed":i}),u=function(e){return Object(b.mapKeys)({borderRadius:"".concat(e.borderRadius,"px"),borderWidth:"".concat(e.borderWidth,"px")},(function(e,t){return"--crowdsignal-forms-vote-".concat(Object(b.kebabCase)(t))}))}(t),d=ie().accountInfo,f=Object(b.get)(d,["signalCount","shouldDisplay"]),m=f&&Object(b.get)(d,["signalCount","count"])>=Object(b.get)(d,["signalCount","userLimit"]);return Object(a.createElement)(lt,{blockIcon:null,blockName:Object(l.__)("Crowdsignal Vote","crowdsignal-forms")},Object(a.createElement)(Ct,w()({},e,{shouldPromote:f,signalWarning:m,viewResultsUrl:c})),Object(a.createElement)(Tt,e),Object(a.createElement)("div",{className:s,style:u},Object(a.createElement)("div",{className:"crowdsignal-forms-vote__items"},Object(a.createElement)(C.InnerBlocks,{template:[["crowdsignal-forms/vote-item",{type:"up"}],["crowdsignal-forms/vote-item",{type:"down"}]],templateInsertUpdatesSelection:!1,templateLock:"insert",allowedBlocks:["crowdsignal-forms/vote-item"],orientation:"horizontal",__experimentalMoverDirection:"horizontal"}))))})),Nt={pollId:{type:"string",default:null},hideBranding:{type:"boolean",default:!1},title:{type:"string",default:null},pollStatus:{type:"string",default:jt.OPEN},closedAfterDateTime:{type:"string",default:null},size:{type:"string",default:"medium"},borderWidth:{type:"number",default:1},borderRadius:{type:"number",default:5},hideResults:{type:"boolean",default:!1}},At={title:Object(l.__)("Vote","crowdsignal-forms"),description:Object(l.__)("Allow your audience to rate your work or express their opinion  powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",keywords:[Object(l.__)("ballot","crowdsignal-forms"),Object(l.__)("button","crowdsignal-forms"),Object(l.__)("count","crowdsignal-forms"),"crowdsignal",Object(l.__)("deciding","crowdsignal-forms"),Object(l.__)("decision","crowdsignal-forms"),Object(l.__)("elect","crowdsignal-forms"),Object(l.__)("election","crowdsignal-forms"),Object(l.__)("feedback","crowdsignal-forms"),Object(l.__)("form","crowdsignal-forms"),Object(l.__)("like","crowdsignal-forms"),Object(l.__)("nero","crowdsignal-forms"),Object(l.__)("opinion","crowdsignal-forms"),Object(l.__)("poll","crowdsignal-forms"),Object(l.__)("polling","crowdsignal-forms"),Object(l.__)("rate","crowdsignal-forms"),Object(l.__)("rating","crowdsignal-forms"),Object(l.__)("research","crowdsignal-forms"),Object(l.__)("survey","crowdsignal-forms"),Object(l.__)("thumb down","crowdsignal-forms"),Object(l.__)("thumb up","crowdsignal-forms"),Object(l.__)("thumbs","crowdsignal-forms"),Object(l.__)("vote","crowdsignal-forms"),Object(l.__)("voting","crowdsignal-forms")],icon:Object(a.createElement)(ht,null),edit:Lt,save:function(){return Object(a.createElement)(C.InnerBlocks.Content,null)},attributes:Nt,example:{attributes:{className:"crowdsignal-forms-vote__example",size:"large"}}},Rt=function(e){var t=e.attributes,n=e.setAttributes;return Object(a.createElement)(C.InspectorControls,null,Object(a.createElement)(C.PanelColorSettings,{title:Object(l.__)("Styling","crowdsignal-forms"),initialOpen:!0,colorSettings:[{value:t.textColor,onChange:function(e){return n({textColor:e})},label:Object(l.__)("Text color","crowdsignal-forms")},{value:t.backgroundColor,onChange:function(e){return n({backgroundColor:e})},label:Object(l.__)("Background color","crowdsignal-forms")},{value:t.borderColor,onChange:function(e){return n({borderColor:e})},label:Object(l.__)("Border color","crowdsignal-forms")}]}))};function Dt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Bt(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var Ft=n(22),Mt=n.n(Ft),Ht=!1,Vt=y.a.createContext(null),Wt="entering",Ut="entered",zt=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(o="exited",r.appearStatus=Wt):o=Ut:o=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:o},r.nextCallback=null,r}Dt(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Wt&&n!==Ut&&(t=Wt):n!==Wt&&n!==Ut||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Wt?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[Mt.a.findDOMNode(this),r],a=o[0],l=o[1],c=this.getTimeouts(),i=r?c.appear:c.enter;!e&&!n||Ht?this.safeSetState({status:Ut},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,l),this.safeSetState({status:Wt},(function(){t.props.onEntering(a,l),t.onTransitionEnd(i,(function(){t.safeSetState({status:Ut},(function(){t.props.onEntered(a,l)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Mt.a.findDOMNode(this);t&&!Ht?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Mt.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=o[0],l=o[1];this.props.addEndListener(a,l)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Bt(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return y.a.createElement(Vt.Provider,{value:null},"function"==typeof n?n(e,r):y.a.cloneElement(y.a.Children.only(n),r))},t}(y.a.Component);function qt(){}zt.contextType=Vt,zt.propTypes={},zt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:qt,onEntering:qt,onEntered:qt,onExit:qt,onExiting:qt,onExited:qt},zt.UNMOUNTED="unmounted",zt.EXITED="exited",zt.ENTERING=Wt,zt.ENTERED=Ut,zt.EXITING="exiting";var Kt,Gt,Zt=zt;var Yt="out-in",Qt="in-out",Jt=function(e,t,n){return function(){var r;e.props[t]&&(r=e.props)[t].apply(r,arguments),n()}},Xt=((Kt={})[Yt]=function(e){var t=e.current,n=e.changeState;return y.a.cloneElement(t,{in:!1,onExited:Jt(t,"onExited",(function(){n(Wt,null)}))})},Kt[Qt]=function(e){var t=e.current,n=e.changeState,r=e.children;return[t,y.a.cloneElement(r,{in:!0,onEntered:Jt(r,"onEntered",(function(){n(Wt)}))})]},Kt),$t=((Gt={})[Yt]=function(e){var t=e.children,n=e.changeState;return y.a.cloneElement(t,{in:!0,onEntered:Jt(t,"onEntered",(function(){n(Ut,y.a.cloneElement(t,{in:!0}))}))})},Gt[Qt]=function(e){var t=e.current,n=e.children,r=e.changeState;return[y.a.cloneElement(t,{in:!1,onExited:Jt(t,"onExited",(function(){r(Ut,y.a.cloneElement(n,{in:!0}))}))}),y.a.cloneElement(n,{in:!0})]},Gt),en=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={status:Ut,current:null},t.appeared=!1,t.changeState=function(e,n){void 0===n&&(n=t.state.current),t.setState({status:e,current:n})},t}Dt(t,e);var n=t.prototype;return n.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===Wt&&e.mode===Qt?{status:Wt}:!t.current||(n=t.current,r=e.children,n===r||y.a.isValidElement(n)&&y.a.isValidElement(r)&&null!=n.key&&n.key===r.key)?{current:y.a.cloneElement(e.children,{in:!0})}:{status:"exiting"};var n,r},n.render=function(){var e,t=this.props,n=t.children,r=t.mode,o=this.state,a=o.status,l=o.current,c={children:n,current:l,changeState:this.changeState,status:a};switch(a){case Wt:e=$t[r](c);break;case"exiting":e=Xt[r](c);break;case Ut:e=l}return y.a.createElement(Vt.Provider,{value:{isMounting:!this.appeared}},e)},t}(y.a.Component);en.propTypes={},en.defaultProps={mode:Yt};var tn=en;function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var on=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=rn(n.className,r):n.setAttribute("class",rn(n.className&&n.className.baseVal||"",r)));var n,r}))},an=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),o=r[0],a=r[1];t.removeClasses(o,"exit"),t.addClass(o,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),o=r[0],a=r[1]?"appear":"enter";t.addClass(o,a,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),o=r[0],a=r[1]?"appear":"enter";t.removeClasses(o,a),t.addClass(o,a,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,o=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:r?o+"-active":n[e+"Active"],doneClassName:r?o+"-done":n[e+"Done"]}},t}Dt(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(r+=" "+o),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,a=n.done;this.appliedClasses[t]={},r&&on(e,r),o&&on(e,o),a&&on(e,a)},n.render=function(){var e=this.props,t=(e.classNames,Bt(e,["classNames"]));return y.a.createElement(Zt,nn({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(y.a.Component);an.defaultProps={classNames:""},an.propTypes={};var ln=an,cn=function(e){var t=e.className,n=e.fillColor,r=void 0===n?"black":n;return Object(a.createElement)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("g",{clipPath:"url(#clipThumbsUp)"},Object(a.createElement)("mask",{id:"maskThumbsUp","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"2",y:"-1",width:"20",height:"20"},Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.35 6.24998H13.5658L14.4366 2.06081L14.4641 1.76748C14.4641 1.39165 14.3083 1.04331 14.0608 0.795813L13.0891 -0.166687L7.05748 5.87415C6.71831 6.20415 6.51664 6.66248 6.51664 7.16665L2.84998 7.16665V16.425H6.51664V16.3333C6.51664 17.3416 7.34164 18.1666 8.34998 18.1666H16.6C17.3608 18.1666 18.0116 17.7083 18.2866 17.0483L21.055 10.5858C21.1375 10.375 21.1833 10.155 21.1833 9.91665V8.08331C21.1833 7.07498 20.3583 6.24998 19.35 6.24998ZM19.35 9.91665L16.6 16.3333H8.34998V7.16665L12.3283 3.18831L11.3108 8.08331H19.35V9.91665Z",fill:"white"})),Object(a.createElement)("g",{mask:"url(#maskThumbsUp)"},Object(a.createElement)("rect",{x:"0.999878",y:"-3.05176e-05",width:"22",height:"22",fill:r}))),Object(a.createElement)("defs",null,Object(a.createElement)("clipPath",{id:"clipThumbsUp"},Object(a.createElement)("rect",{width:"24",height:"24",fill:"white"}))))},sn=function(e){var t=e.className,n=e.fillColor,r=void 0===n?"black":n;return Object(a.createElement)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("g",{clipPath:"url(#clipThumbsDown)"},Object(a.createElement)("mask",{id:"maskThumbsDown","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"2",y:"5",width:"20",height:"20"},Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.65002 17.75H10.4342L9.56336 21.9392L9.53586 22.2325C9.53586 22.6083 9.69169 22.9567 9.93919 23.2042L10.9109 24.1667L16.9425 18.1258C17.2817 17.7958 17.4834 17.3375 17.4834 16.8333L21.15 16.8333L21.15 7.57499H17.4834V7.66666C17.4834 6.65832 16.6584 5.83332 15.65 5.83332H7.40003C6.63919 5.83332 5.98836 6.29165 5.71336 6.95166L2.94503 13.4142C2.86253 13.625 2.81669 13.845 2.81669 14.0833V15.9167C2.81669 16.925 3.64169 17.75 4.65002 17.75ZM4.65002 14.0833L7.40002 7.66666H15.65L15.65 16.8333L11.6717 20.8117L12.6892 15.9167H4.65002V14.0833Z",fill:"white"})),Object(a.createElement)("g",{mask:"url(#maskThumbsDown)"},Object(a.createElement)("rect",{x:"23.0001",y:"24",width:"22",height:"22",transform:"rotate(-180 23.0001 24)",fill:r}))),Object(a.createElement)("defs",null,Object(a.createElement)("clipPath",{id:"clipThumbsDown"},Object(a.createElement)("rect",{width:"24",height:"24",fill:"white"}))))},un=function(e){return e?e>=1e7?"".concat(Object(b.round)(e/1e6),"M"):e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e4?"".concat(Object(b.round)(e/1e3),"K"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString():"0"},dn=function(e){var t=e.attributes,n=e.voteCount,r=e.apiAnswerId,o=e.onVote,l=e.disabled,c=e.isVotedOn,i=e.hideCount,s=e.fallbackStyles,u=e.isInEditor,d=t.className,f=t.type,m=Object(_.useState)(0),p=j()(m,2),g=p[0],O=p[1],v=function(){!l&&o&&(O(1),o(r))},w="up"===f?cn:sn,h="is-type-".concat(f),y=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return T()({"has-bg-color":e.backgroundColor,"has-text-color":e.textColor,"has-border-color":e.borderColor},n)}(t,"crowdsignal-forms-vote-item",d,{"is-voted-on":c,"is-disabled":l,"is-in-editor":u},h),C=function(e,t){var n=Object(b.isEmpty)(e.textColor)?t.textColor:e.textColor,r=Object(b.isEmpty)(e.backgroundColor)?t.backgroundColor:e.backgroundColor;return Object(b.mapKeys)({borderColor:e.borderColor,bgColor:r,textColor:n,votedColor:t.accentColor},(function(e,t){return"--crowdsignal-forms-vote-".concat(Object(b.kebabCase)(t))}))}(t,s),E=n+g;return Object(a.createElement)("div",{className:y,onClick:v,onKeyPress:v,role:"button",style:C,tabIndex:0},Object(a.createElement)(w,{className:"crowdsignal-forms-vote-item__icon",fillColor:"currentColor"}),!i&&Object(a.createElement)(tn,{mode:"in-out"},Object(a.createElement)(ln,{key:g,classNames:"crowdsignal-forms-vote-item__count",timeout:300},Object(a.createElement)("div",{className:"crowdsignal-forms-vote-item__count"},un(E)))))};dn.propTypes={apiAnswerId:L.a.number,className:L.a.string,disabled:L.a.bool,isVotedOn:L.a.bool,onVote:L.a.func,type:L.a.string.isRequired,voteCount:L.a.number.isRequired};var fn=dn,bn=Object(x.compose)([Le,It(["answerId"])])((function(e){var t=e.attributes,n=e.className,r=e.fallbackStyles,o=e.renderStyleProbe;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(Rt,e),Object(a.createElement)(fn,{attributes:t,fallbackStyles:r,className:n,voteCount:0,isInEditor:!0,type:t.type}),o())})),mn={title:Object(l.__)("Vote Item","crowdsignal-forms"),description:Object(l.__)("Allow your audience to rate your work or express their opinion  powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",parent:["crowdsignal-forms/vote"],icon:Object(a.createElement)(ht,null),edit:bn,attributes:{answerId:{type:"string",default:null},type:{type:"string"},textColor:{type:"string"},backgroundColor:{type:"string"},borderColor:{type:"string"}}},pn=function(e){var t=e.showBranding,n=e.referralCode;return Object(a.createElement)("div",{className:"crowdsignal-forms__branding"},t&&Object(a.createElement)("a",{className:"crowdsignal-forms__branding-link with-external-icon",href:"https://crowdsignal.com?ref=".concat(n),target:"blank",rel:"noopener noreferrer"},Object(l.__)("Powered by Crowdsignal","crowdsignal-forms")),!t&&Object(a.createElement)("span",{className:"crowdsignal-forms__branding-link"},""))};pn.propTypes={showBranding:L.a.bool,referralCode:L.a.string.isRequired};var gn=pn,On=function(e){var t=e.active,n=e.className,r=T()("crowdsignal-forms-applause__animation",n,{"is-active":t});return Object(a.createElement)("svg",{className:r,width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("g",{className:"crowdsignal-forms-applause__animation-right"},Object(a.createElement)("path",{className:"crowdsignal-forms-applause__animation-inner-fill",fillRule:"evenodd",clipRule:"evenodd",d:"M24.5287 18.5813L21.719 22.432C20.771 23.7312 18.9509 24.0157 17.6517 23.0676L9.50948 17.1265C8.6982 16.5345 8.52021 15.3957 9.11218 14.5844C9.18511 14.4845 9.26979 14.3931 9.35606 14.3119L9.19145 14.1918C8.38017 13.5998 8.20218 12.461 8.79415 11.6497C8.93571 11.4557 9.10825 11.2933 9.30319 11.1743C9.10822 10.6266 9.17716 10.0013 9.54606 9.49567C10.1123 8.71967 11.1811 8.52659 11.9839 9.03133C12.0392 8.91852 12.1004 8.81 12.1733 8.71006C12.7653 7.89878 13.9042 7.72079 14.7154 8.31276L20.3297 12.4094L20.611 10.4435C20.6949 9.84704 21.1499 9.35925 21.7392 9.23069L23.703 8.79878L25.0454 16.3547C25.1822 17.1302 24.992 17.9464 24.5287 18.5813Z"}),Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.5287 18.5813L21.719 22.432C20.771 23.7312 18.9509 24.0157 17.6517 23.0676L9.50948 17.1265C8.6982 16.5345 8.52021 15.3957 9.11218 14.5844C9.18511 14.4845 9.26979 14.3931 9.35606 14.3119L9.19145 14.1918C8.38017 13.5998 8.20218 12.461 8.79415 11.6497C8.93571 11.4557 9.10825 11.2933 9.30319 11.1743C9.10822 10.6266 9.17716 10.0013 9.54606 9.49567C10.1123 8.71967 11.1811 8.52659 11.9839 9.03133C12.0392 8.91852 12.1004 8.81 12.1733 8.71006C12.7653 7.89878 13.9042 7.72079 14.7154 8.31276L20.3297 12.4094L20.611 10.4435C20.6949 9.84704 21.1499 9.35925 21.7392 9.23069L23.703 8.79878L25.0454 16.3547C25.1822 17.1302 24.992 17.9464 24.5287 18.5813ZM23.6104 16.605L22.538 10.5434L22.0547 10.6502L21.4234 15.0093L13.8574 9.48855C13.8574 9.48855 13.4691 9.4034 13.349 9.56801C13.2288 9.73262 13.2638 9.95632 13.4284 10.0764L17.667 13.1693L16.8091 14.345L11.2301 10.2742C11.0655 10.1541 10.8418 10.189 10.7217 10.3536C10.6016 10.5182 10.6365 10.7419 10.8012 10.862L16.3802 14.9329L15.5222 16.1087L10.4782 12.4282C10.3136 12.3081 10.0899 12.343 9.96978 12.5076C9.84967 12.6722 9.88463 12.8959 10.0492 13.0161L15.0933 16.6966L14.2353 17.8723L10.7962 15.3629C10.6316 15.2428 10.4079 15.2777 10.2878 15.4423C10.1677 15.607 10.2027 15.8307 10.3673 15.9508L18.5094 21.8919C19.1561 22.3638 20.0713 22.2207 20.5431 21.5741L23.3571 17.7175C23.5888 17.4001 23.6766 16.9957 23.6104 16.605Z"})),Object(a.createElement)("g",{className:"crowdsignal-forms-applause__animation-left"},Object(a.createElement)("path",{className:"crowdsignal-forms-applause__animation-inner-fill",fillRule:"evenodd",clipRule:"evenodd",d:"M21.2292 18.7813L18.4195 22.632C17.4715 23.9312 15.6513 24.2157 14.3521 23.2676L6.20992 17.3265C5.39864 16.7345 5.22065 15.5957 5.81262 14.7844C5.88554 14.6845 5.97023 14.5931 6.0565 14.5119L5.89189 14.3918C5.08061 13.7998 4.90262 12.661 5.49459 11.8497C5.63615 11.6557 5.80869 11.4933 6.00363 11.3743C5.80866 10.8266 5.8776 10.2013 6.2465 9.69567C6.81274 8.91967 7.88153 8.72658 8.68439 9.23133C8.73968 9.11852 8.80084 9.01 8.87377 8.91006C9.46573 8.09878 10.6046 7.92079 11.4159 8.51276L17.0302 12.6094L17.3115 10.6435C17.3953 10.047 17.8504 9.55925 18.4397 9.43069L20.4034 8.99877L21.7458 16.5547C21.8826 17.3302 21.6925 18.1464 21.2292 18.7813Z"}),Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2292 18.7813L18.4195 22.632C17.4715 23.9312 15.6513 24.2157 14.3521 23.2676L6.20992 17.3265C5.39864 16.7345 5.22065 15.5957 5.81262 14.7844C5.88554 14.6845 5.97023 14.5931 6.0565 14.5119L5.89189 14.3918C5.08061 13.7998 4.90262 12.661 5.49459 11.8497C5.63615 11.6557 5.80869 11.4933 6.00363 11.3743C5.80866 10.8266 5.8776 10.2013 6.2465 9.69567C6.81274 8.91967 7.88153 8.72658 8.68439 9.23133C8.73968 9.11852 8.80084 9.01 8.87377 8.91006C9.46573 8.09878 10.6046 7.92079 11.4159 8.51276L17.0302 12.6094L17.3115 10.6435C17.3953 10.047 17.8504 9.55925 18.4397 9.43069L20.4034 8.99877L21.7458 16.5547C21.8826 17.3302 21.6925 18.1464 21.2292 18.7813ZM20.3108 16.805L19.2384 10.7434L18.7551 10.8502L18.1239 15.2093L10.5578 9.68854C10.5578 9.68854 10.1695 9.6034 10.0494 9.76801C9.92928 9.93261 9.96425 10.1563 10.1289 10.2764L14.3675 13.3692L13.5096 14.545L7.93056 10.4742C7.76595 10.354 7.54224 10.389 7.42213 10.5536C7.30202 10.7182 7.33699 10.9419 7.50159 11.062L13.0806 15.1329L12.2227 16.3087L7.17864 12.6282C7.01403 12.5081 6.79033 12.543 6.67022 12.7076C6.55011 12.8722 6.58507 13.0959 6.74968 13.216L11.7937 16.8965L10.9358 18.0723L7.49667 15.5629C7.33206 15.4428 7.10836 15.4777 6.98825 15.6423C6.86814 15.8069 6.9031 16.0307 7.06771 16.1508L15.2099 22.0919C15.8566 22.5638 16.7717 22.4207 17.2436 21.7741L20.0576 17.9175C20.2892 17.6001 20.3771 17.1957 20.3108 16.805Z"})),Object(a.createElement)("g",{className:"crowdsignal-forms-applause__animation-wave-small"},Object(a.createElement)("rect",{x:"15.4854",y:"4.42176",width:"1.5",height:"3",transform:"rotate(8 15.4854 4.42176)"}),Object(a.createElement)("rect",{x:"19.9369",y:"5.15548",width:"1.5",height:"3",transform:"rotate(43 19.9369 5.15548)"}),Object(a.createElement)("rect",{x:"11.1523",y:"4.78963",width:"1.5",height:"3",transform:"rotate(-27 11.1523 4.78963)"})),Object(a.createElement)("g",{className:"crowdsignal-forms-applause__animation-wave-large"},Object(a.createElement)("rect",{x:"23.453",y:"2.41095",width:"1.5",height:"3",transform:"rotate(38 23.453 2.41095)"}),Object(a.createElement)("rect",{x:"26.9413",y:"5.27211",width:"1.5",height:"3",transform:"rotate(73 26.9413 5.27211)"}),Object(a.createElement)("rect",{x:"19.5165",y:"0.562988",width:"1.5",height:"3",transform:"rotate(3 19.5165 0.562988)"}),Object(a.createElement)("rect",{width:"1.5",height:"3",transform:"matrix(-0.788011 0.615662 0.615662 0.788011 8.52597 2.41095)"}),Object(a.createElement)("rect",{width:"1.5",height:"3",transform:"matrix(-0.292372 0.956305 0.956305 0.292372 5.03775 5.27211)"}),Object(a.createElement)("rect",{width:"1.5",height:"3",transform:"matrix(-0.99863 0.052336 0.052336 0.99863 12.4625 0.562988)"})))},vn=function(e){var t=e.attributes,n=e.fallbackStyles,r=e.renderStyleProbe,o=t.apiPollData?t.apiPollData.id:null,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="cs-poll-".concat(e),o=Object(_.useState)(!1),a=j()(o,2),l=a[0],c=a[1],i=Object(_.useState)(!1),s=j()(i,2),u=s[0],d=s[1],f=Object(_.useState)(""),b=j()(f,2),m=b[0],p=b[1];Object(_.useEffect)((function(){t&&void 0!==F.a.get(r)&&(d(!0),p(F.a.get(r)))}),[]);var g=function(){var o=D()(A.a.mark((function o(a){var l,i,s,u=arguments;return A.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=u.length>1&&void 0!==u[1]?u[1]:1,o.prev=1,c(!0),o.next=5,ee(e);case 5:return i=o.sent,o.next=8,te(i,e,a,l);case 8:d(!0),t&&(s=n?a.join(","):(new Date).getTime(),F.a.set(r,s,{sameSite:"Strict",expires:365}),p(s));case 10:return o.prev=10,c(!1),o.finish(10);case 13:case"end":return o.stop()}}),o,null,[[1,,10,13]])})));return function(e){return o.apply(this,arguments)}}();return{hasVoted:u,isVoting:l,vote:g,storedCookieValue:m}}(o,!0),c=l.hasVoted,i=l.vote,s=Object(_.useState)(0),u=j()(s,2),d=u[0],f=u[1],m=Object(_.useState)(0),p=j()(m,2),g=p[0],O=p[1],v=Object(_.useState)(null),w=j()(v,2),h=w[0],y=w[1],C=Object(_.useState)(!1),E=j()(C,2),k=E[0],x=E[1],S=Object(_.useState)(null),I=j()(S,2),P=I[0],L=I[1],N=le(o).results,R=We(t.pollStatus,t.closedAfterDateTime),B=function(){if(null!==o&&!R){P&&clearTimeout(P),x(!0),L(setTimeout((function(){x(!1)}),200));var e=g+1;O(e),f(d+1);var n=t.apiPollData.answers[0].id;null!==h&&clearTimeout(h);var r=setTimeout((function(){i([n],e),y(null),O(0)}),1e3);y(r)}},M=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return T()({"has-bg-color":e.backgroundColor,"has-text-color":e.textColor,"has-border-color":e.borderColor},n)}(t,"crowdsignal-forms-applause",t.className,"size-".concat(t.size),{"is-closed":R}),H=function(e,t){var n=Object(b.isEmpty)(e.textColor)?t.textColor:e.textColor;return Object(b.mapKeys)({bgColor:e.backgroundColor||t.backgroundColor,textColor:n,hoverColor:t.accentColor,borderRadius:"".concat(e.borderRadius||0,"px"),borderWidth:"".concat(e.borderWidth||0,"px"),borderColor:e.borderColor},(function(e,t){return"--crowdsignal-forms-applause-".concat(Object(b.kebabCase)(t))}))}(t,n),V=(null!==N?Object(b.values)(N)[0]:0)+d;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:M,style:H,onClick:B,onKeyPress:B,role:"button",tabIndex:0},Object(a.createElement)(On,{active:k}),Object(a.createElement)("p",{className:"crowdsignal-forms-applause__count"},un(V)," Claps"),r()),Object(a.createElement)(gn,{showBranding:c&&!t.hideBranding,referralCode:"cs-forms-applause"}))};vn.propTypes={className:L.a.string};var wn=Le(vn),hn=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),jn=[{title:Object(l.__)("Small","crowdsignal-forms"),size:"small"},{title:Object(l.__)("Medium","crowdsignal-forms"),size:"medium"},{title:Object(l.__)("Large","crowdsignal-forms"),size:"large"}],_n={position:"bottom right",isAlternate:!0,className:"crowdsignal-forms-vote__size-dropdown"};function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Cn=function(e){var t=e.attributes,n=e.setAttributes,r=Object(b.get)(t,"size","medium"),o=jn,c=Object(_.useState)(!1),i=j()(c,2),s=i[0],u=i[1],f=function(){return u(!s)};return Object(a.createElement)(C.BlockControls,null,Object(a.createElement)(E.ToolbarGroup,{isCollapsed:!0,icon:Et,label:Object(l.__)("Change block size","crowdsignal-forms"),popoverProps:_n,controls:o.map((function(e){var t=e.size;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isActive:r===t,role:"menuitemradio",onClick:function(){return n({size:t})}})}))}),Object(a.createElement)(E.Toolbar,{controls:[{icon:kt,onClick:f}]}),s&&Object(a.createElement)(E.Popover,{className:"crowdsignal-forms__border-popover",onFocusOutside:f},Object(a.createElement)("div",{className:"crowdsignal-forms__row"},Object(a.createElement)(E.TextControl,{label:Object(l.__)("Border thickness","crowdsignal-forms"),type:"number",className:"crowdsignal-forms__small-text-input",onChange:function(e){n({borderWidth:parseInt(e,10)||0})},value:t.borderWidth}),Object(a.createElement)(E.TextControl,{label:Object(l.__)("Corner radius","crowdsignal-forms"),type:"number",className:"crowdsignal-forms__small-text-input",onChange:function(e){n({borderRadius:parseInt(e,10)||0})},value:t.borderRadius}))))},En=function(e){var t=e.attributes,n=e.setAttributes,r=e.viewResultsUrl,o=e.shouldPromote,c=e.signalWarning,i=""!==r;return Object(a.createElement)(C.InspectorControls,null,Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Results","crowdsignal-forms"),initialOpen:!0},Object(a.createElement)("p",null,i?Object(l.__)("Manage results on ","crowdsignal-forms"):Object(l.__)("Publish this post to enable results on ","crowdsignal-forms"),Object(a.createElement)(E.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),Object(a.createElement)("p",null,Object(a.createElement)(E.Button,{href:r,isSecondary:!0,target:"_blank",disabled:!i},Object(l.__)("View results","crowdsignal-forms"))),Object(a.createElement)(E.TextControl,{value:t.title,label:Object(l.__)("Title of the applause block","crowdsignal-forms"),onChange:function(e){return n({title:e})}}),o&&Object(a.createElement)(qe,{signalWarning:c})),Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Settings","crowdsignal-forms")},Object(a.createElement)(E.SelectControl,{value:t.pollStatus,label:Object(l.__)("Status","crowdsignal-forms"),options:[{label:Object(l.__)("Open","crowdsignal-forms"),value:hn.OPEN},{label:Object(l.__)("Closed after","crowdsignal-forms"),value:hn.CLOSED_AFTER},{label:Object(l.__)("Closed","crowdsignal-forms"),value:hn.CLOSED}],onChange:function(e){Object(b.includes)(hn,e)&&n({closedAfterDateTime:e===hn.CLOSED_AFTER?new Date((new Date).getTime()+864e5).toISOString():null,pollStatus:e})}}),hn.CLOSED_AFTER===t.pollStatus&&Object(a.createElement)(E.TimePicker,{currentTime:t.closedAfterDateTime,label:Object(l.__)("Close applause block on","crowdsignal-forms"),onChange:function(e){var t=new Date(e);n({closedAfterDateTime:t.toISOString()})},is12Hour:!0})),Object(a.createElement)(C.PanelColorSettings,{title:Object(l.__)("Styling","crowdsignal-forms"),initialOpen:!0,colorSettings:[{value:t.textColor,onChange:function(e){return n({textColor:e})},label:Object(l.__)("Text color","crowdsignal-forms")},{value:t.backgroundColor,onChange:function(e){return n({backgroundColor:e})},label:Object(l.__)("Background color","crowdsignal-forms")},{value:t.borderColor,onChange:function(e){return n({borderColor:e})},label:Object(l.__)("Border color","crowdsignal-forms")}]}))},kn=Object(x.compose)([bt,It(["pollId","answerId"])])((function(e){var t=e.attributes,n=e.setAttributes,r=e.pollDataFromApi,o=r?r.viewResultsUrl:"";Pt(e.name,Object(l.__)("Untitled Applause","crowdsignal-forms"),t,n);var c=ie().accountInfo,i=Object(b.get)(c,["signalCount","shouldDisplay"]),s=i&&Object(b.get)(c,["signalCount","count"])>=Object(b.get)(c,["signalCount","userLimit"]);return Object(a.createElement)(lt,{blockIcon:null,blockName:Object(l.__)("Crowdsignal Applause","crowdsignal-forms")},Object(a.createElement)(En,w()({},e,{shouldPromote:i,signalWarning:s,viewResultsUrl:o})),Object(a.createElement)(Cn,e),Object(a.createElement)(wn,e))})),xn={pollId:{type:"string",default:null},hideBranding:{type:"boolean",default:!1},title:{type:"string",default:null},answerId:{type:"string",default:null},size:{type:"string",default:"medium"},pollStatus:{type:"string",default:hn.OPEN},closedAfterDateTime:{type:"string",default:null},textColor:{type:"string"},backgroundColor:{type:"string"},borderColor:{type:"string"},borderWidth:{type:"number",default:0},borderRadius:{type:"number",default:0}},Sn={title:Object(l.__)("Applause","crowdsignal-forms"),description:Object(l.__)("Let your audience cheer with a big round of applause  powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",keywords:["crowdsignal",Object(l.__)("applause","crowdsignal-forms"),Object(l.__)("cheer","crowdsignal-forms"),Object(l.__)("cheering","crowdsignal-forms"),Object(l.__)("clap","crowdsignal-forms"),Object(l.__)("feedback","crowdsignal-forms"),Object(l.__)("kudos","crowdsignal-forms"),Object(l.__)("like","crowdsignal-forms"),Object(l.__)("opinion","crowdsignal-forms"),Object(l.__)("praise","crowdsignal-forms"),Object(l.__)("rating","crowdsignal-forms"),Object(l.__)("upvote","crowdsignal-forms"),Object(l.__)("upvoting","crowdsignal-forms"),Object(l.__)("votes","crowdsignal-forms"),Object(l.__)("voting","crowdsignal-forms")],icon:Object(a.createElement)((function(){return Object(a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("g",{clipPath:"url(#clip0)"},Object(a.createElement)("rect",{width:"24",height:"24",fill:"white"}),Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5284 16.5813L18.7187 20.432C17.7707 21.7312 15.9506 22.0157 14.6513 21.0676L6.50915 15.1265C5.69788 14.5345 5.51988 13.3957 6.11185 12.5844C6.18478 12.4845 6.26946 12.3931 6.35573 12.3119L6.19112 12.1918C5.37984 11.5998 5.20185 10.461 5.79382 9.64968C5.93538 9.45568 6.10792 9.29329 6.30287 9.17428C6.1079 8.62662 6.17683 8.00125 6.54574 7.49567C7.11197 6.71967 8.18077 6.52659 8.98362 7.03133C9.03891 6.91852 9.10007 6.81 9.173 6.71006C9.76497 5.89878 10.9038 5.72079 11.7151 6.31276L17.3294 10.4094L17.6107 8.44349C17.6946 7.84704 18.1496 7.35925 18.7389 7.23069L20.7027 6.79878L22.045 14.3547C22.1819 15.1302 21.9917 15.9464 21.5284 16.5813ZM20.61 14.605L19.5377 8.54337L19.0543 8.65016L18.4231 13.0093L10.857 7.48855C10.857 7.48855 10.4687 7.4034 10.3486 7.56801C10.2285 7.73262 10.2635 7.95632 10.4281 8.07643L14.6667 11.1693L13.8088 12.345L8.22979 8.27416C8.06518 8.15405 7.84147 8.18902 7.72136 8.35362C7.60126 8.51823 7.63622 8.74194 7.80082 8.86204L13.3798 12.9329L12.5219 14.1087L7.47787 10.4282C7.31327 10.3081 7.08956 10.343 6.96945 10.5076C6.84934 10.6722 6.8843 10.8959 7.04891 11.0161L12.0929 14.6966L11.235 15.8723L7.7959 13.3629C7.6313 13.2428 7.40759 13.2777 7.28748 13.4423C7.16737 13.607 7.20233 13.8307 7.36694 13.9508L15.5091 19.8919C16.1558 20.3638 17.0709 20.2207 17.5428 19.5741L20.3568 15.7175C20.5884 15.4001 20.6763 14.9957 20.61 14.605Z"}),Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.2289 16.7813L15.4192 20.632C14.4711 21.9312 12.651 22.2157 11.3518 21.2676L3.20959 15.3265C2.39831 14.7345 2.22032 13.5957 2.81229 12.7844C2.88522 12.6845 2.9699 12.5931 3.05617 12.5119L2.89156 12.3918C2.08028 11.7998 1.90229 10.661 2.49426 9.84968C2.63582 9.65567 2.80836 9.49329 3.0033 9.37428C2.80834 8.82662 2.87727 8.20125 3.24618 7.69567C3.81241 6.91967 4.88121 6.72658 5.68406 7.23133C5.73935 7.11852 5.80051 7.01 5.87344 6.91006C6.46541 6.09878 7.60427 5.92079 8.41555 6.51276L14.0298 10.6094L14.3111 8.64348C14.395 8.04703 14.85 7.55925 15.4393 7.43069L17.4031 6.99877L18.7455 14.5547C18.8823 15.3302 18.6921 16.1464 18.2289 16.7813Z",fill:"white"}),Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.2289 16.7813L15.4192 20.632C14.4711 21.9312 12.651 22.2157 11.3518 21.2676L3.20959 15.3265C2.39831 14.7345 2.22032 13.5957 2.81229 12.7844C2.88522 12.6845 2.9699 12.5931 3.05617 12.5119L2.89156 12.3918C2.08028 11.7998 1.90229 10.661 2.49426 9.84968C2.63582 9.65567 2.80836 9.49329 3.0033 9.37428C2.80834 8.82662 2.87727 8.20125 3.24618 7.69567C3.81241 6.91967 4.88121 6.72658 5.68406 7.23133C5.73935 7.11852 5.80051 7.01 5.87344 6.91006C6.46541 6.09878 7.60427 5.92079 8.41555 6.51276L14.0298 10.6094L14.3111 8.64348C14.395 8.04703 14.85 7.55925 15.4393 7.43069L17.4031 6.99877L18.7455 14.5547C18.8823 15.3302 18.6921 16.1464 18.2289 16.7813ZM17.3105 14.805L16.2381 8.74337L15.7548 8.85016L15.1235 13.2093L7.55749 7.68854C7.55749 7.68854 7.16918 7.6034 7.04907 7.76801C6.92896 7.93261 6.96392 8.15632 7.12853 8.27643L11.3672 11.3692L10.5092 12.545L4.93023 8.47416C4.76562 8.35405 4.54191 8.38901 4.4218 8.55362C4.3017 8.71823 4.33666 8.94193 4.50126 9.06204L10.0803 13.1329L9.22235 14.3087L4.17831 10.6282C4.0137 10.5081 3.79 10.543 3.66989 10.7076C3.54978 10.8722 3.58474 11.0959 3.74935 11.216L8.79338 14.8965L7.93546 16.0723L4.49634 13.5629C4.33173 13.4428 4.10803 13.4777 3.98792 13.6423C3.86781 13.8069 3.90277 14.0307 4.06738 14.1508L12.2096 20.0919C12.8562 20.5638 13.7714 20.4207 14.2432 19.7741L17.0572 15.9175C17.2889 15.6001 17.3767 15.1957 17.3105 14.805Z"}),Object(a.createElement)("rect",{x:"12.4851",y:"1.42175",width:"1.5",height:"3",transform:"rotate(8 12.4851 1.42175)"}),Object(a.createElement)("rect",{x:"16.9365",y:"2.15547",width:"1.5",height:"3",transform:"rotate(43 16.9365 2.15547)"}),Object(a.createElement)("rect",{x:"8.15195",y:"1.78963",width:"1.5",height:"3",transform:"rotate(-27 8.15195 1.78963)"})),Object(a.createElement)("defs",null,Object(a.createElement)("clipPath",{id:"clip0"},Object(a.createElement)("rect",{width:"24",height:"24",fill:"white"}))))}),null),edit:kn,attributes:xn,example:{attributes:{size:"large"}}},Tn="rating",In="feedback",Pn=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),Ln={backgroundColor:{type:"string"},buttonColor:{type:"string"},buttonTextColor:{type:"string"},feedbackPlaceholder:{type:"string",default:Object(l.__)("Please help us understand your rating","crowdsignal-forms")},feedbackQuestion:{type:"string",default:Object(l.__)("Thanks so much for your response! How could we do better?","crowdsignal-forms")},hideBranding:{type:"boolean",default:!1},highRatingLabel:{type:"string",default:Object(l.__)("Extremely likely","crowdsignal-forms")},lowRatingLabel:{type:"string",default:Object(l.__)("Not likely at all","crowdsignal-forms")},ratingQuestion:{type:"string",default:Object(l.__)("How likely is it that you would recommend this project to a friend or colleague?","crowdsignal-forms")},submitButtonLabel:{type:"string",default:Object(l.__)("Submit","crowdsignal-forms")},surveyId:{type:"number",default:null},textColor:{type:"string"},title:{type:"string",default:""},viewThreshold:{type:"string",default:2},status:{type:"string",default:Pn.OPEN},closedAfterDateTime:{type:"string",default:null},isExample:{type:"boolean",default:!1}},Nn=n(32),An=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(_.useState)(!1),r=j()(n,2),o=r[0],a=r[1],l=Object(_.useRef)(0),c=Object(_.useCallback)(Object(b.debounce)((function(t,n){return e(t).catch(n)}),1500),[]),i=Object(_.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a(!1),c(t,(function(){e===l.current&&(n<3?i(e,n+1):a(!0))}))}),Object(b.values)(t));return Object(_.useEffect)((function(){0!=l.current++&&i(l.current)}),Object(b.values)(t)),{error:o,save:function(){return i(l.current)}}},Rn=function(e){return new Promise((function(t,n){var r=setTimeout((function(){return n(new Error("Request timed out"))}),1e4);e.then(t,n).finally((function(){return clearTimeout(r)}))}))},Dn=function(e){return Rn(Q()({path:Object(b.trimEnd)("/crowdsignal-forms/v1/nps/".concat(e.surveyId||""),"/"),method:"POST",data:e}))},Bn=function(e){var t=e.attributes,n=e.setAttributes,r=e.shouldPromote,o=e.signalWarning,c="https://app.crowdsignal.com/surveys/".concat(t.surveyId,"/report/overview"),i=function(e){return function(t){return n(d()({},e,t))}};return Object(a.createElement)(C.InspectorControls,null,Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Results","crowdsignal-forms"),initialOpen:!0},Object(a.createElement)("p",null,t.surveyId?Object(l.__)("Manage results on ","crowdsignal-forms"):Object(l.__)("Save the block to track results on ","crowdsignal-forms"),Object(a.createElement)(E.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),Object(a.createElement)("p",null,Object(a.createElement)(E.Button,{isSecondary:!0,disabled:!t.surveyId,href:c,target:"blank"},Object(l.__)("View results","crowdsignal-forms"))),Object(a.createElement)(E.TextControl,{label:Object(l.__)("Title (optional)","crowdsignal-forms"),onChange:function(e){return n({title:e})},value:Object(k.decodeEntities)(t.title)}),r&&Object(a.createElement)(qe,{signalWarning:o})),Object(a.createElement)(C.PanelColorSettings,{title:Object(l.__)("Block styling","crowdsignal-forms"),initialOpen:!1,colorSettings:[{label:Object(l.__)("Background color","crowdsignal-forms"),onChange:i("backgroundColor"),value:t.backgroundColor},{label:Object(l.__)("Text color","crowdsignal-forms"),onChange:i("textColor"),value:t.textColor},{label:Object(l.__)("Button color","crowdsignal-forms"),onChange:i("buttonColor"),value:t.buttonColor},{label:Object(l.__)("Button text color","crowdsignal-forms"),onChange:i("buttonTextColor"),value:t.buttonTextColor}]}),Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Settings","crowdsignal-forms"),initialOpen:!1},Object(a.createElement)(E.SelectControl,{value:t.status,label:Object(l.__)("Status","crowdsignal-forms"),options:[{label:Object(l.__)("Open","crowdsignal-forms"),value:Pn.OPEN},{label:Object(l.__)("Closed after","crowdsignal-forms"),value:Pn.CLOSED_AFTER},{label:Object(l.__)("Closed","crowdsignal-forms"),value:Pn.CLOSED}],onChange:function(e){return n({status:e})},help:Pn.CLOSED_AFTER===t.status&&null!==t.closedAfterDateTime&&(new Date).toISOString()>t.closedAfterDateTime?"Currently closed as date has passed":""}),Pn.CLOSED_AFTER===t.status&&Object(a.createElement)(E.DateTimePicker,{currentDate:t.closedAfterDateTime&&new Date(t.closedAfterDateTime)||new Date,label:Object(l.__)("Close on","crowdsignal-forms"),onChange:function(e){var t=new Date(e);n({closedAfterDateTime:t.toISOString()})},is12Hour:!0})))},Fn=function(e){var t=e.attributes,n=e.currentView,r=e.onViewChange,o=e.setAttributes,c=Object(_.useState)(!1),i=j()(c,2),s=i[0],u=i[1],d=function(e){return function(){return r(e)}};return Object(a.createElement)(C.BlockControls,null,Object(a.createElement)(E.ToolbarGroup,{label:Object(l.__)("Current view","crowdsignal-forms")},Object(a.createElement)(E.ToolbarButton,{className:"crowdsignal-forms-nps__toolbar-toggle",isActive:n===Tn,label:Object(l.__)("Rating","crowdsignal-forms"),onClick:d(Tn)},Object(l.__)("Rating","crowdsignal-forms")),Object(a.createElement)(E.ToolbarButton,{className:"crowdsignal-forms-nps__toolbar-toggle",isActive:n===In,label:Object(l.__)("Feedback","crowdsignal-forms"),onClick:d(In)},Object(l.__)("Feedback","crowdsignal-forms"))),Object(a.createElement)(E.ToolbarGroup,null,Object(a.createElement)(E.ToolbarButton,{className:"crowdsignal-forms-nps__toolbar-popover-button",icon:"visibility",label:Object(l.__)("Set view threshold","crowdsignal-forms"),onClick:function(){return u(!0)}},s&&Object(a.createElement)(E.Popover,{onClose:function(){return u(!1)}},Object(a.createElement)("div",{className:"crowdsignal-forms-nps__toolbar-popover"},Object(a.createElement)(E.TextControl,{label:Object(l.__)("Show this block after __ visits:","crowdsignal-forms"),value:t.viewThreshold,onChange:function(e){return o({viewThreshold:e})},type:"number",min:"1"}))))))},Mn=function(e,t){return Object(b.mapKeys)({backgroundColor:e.backgroundColor||"#ffffff",buttonColor:e.buttonColor||t.accentColor,buttonTextColor:e.buttonTextColor||t.textColorInverted,textColor:e.textColor||t.textColor,textSize:t.textSize},(function(e,t){return"--crowdsignal-forms-".concat(Object(b.kebabCase)(t))}))},Hn=function(e){var t=e.retryHandler;return Object(a.createElement)(mt,{status:"error",icon:"warning",isDismissible:!1,actions:[{className:"is-destructive",label:Object(l.__)("Retry","crowdsignal-forms"),onClick:t}]},Object(l.__)("Unfortunately, the block couldn't be saved to Crowdsignal.com.","crowdsignal-forms"))},Vn=Object(x.compose)([Object(f.withSelect)((function(e){var t=e("core/editor").getPermalink();return t||(t=e("core").getSite()&&e("core").getSite().url),{sourceLink:t}})),Le])((function(e){var t=Object(_.useState)(Tn),n=j()(t,2),r=n[0],o=n[1],c=e.attributes,i=e.clientId,s=e.fallbackStyles,u=e.isSelected,m=e.setAttributes,p=e.renderStyleProbe,g=e.sourceLink,O=c.feedbackQuestion,v=c.ratingQuestion,h=c.surveyId,y=c.title,k=c.isExample,x=c.viewThreshold,S=An(function(){var e=D()(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(f.dispatch)("core/editor").lockPostSaving(i),e.prev=1,e.next=4,Dn({feedbackQuestion:t.feedbackQuestion,ratingQuestion:t.ratingQuestion,sourceLink:t.sourceLink,surveyId:t.surveyId,title:t.title||t.ratingQuestion});case 4:n=e.sent,t.surveyId||m({surveyId:n.surveyId});case 6:return e.prev=6,Object(f.dispatch)("core/editor").unlockPostSaving(i),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t){return e.apply(this,arguments)}}(),{feedbackQuestion:O,ratingQuestion:v,sourceLink:g,surveyId:h,title:y}),I=S.error,P=S.save;Object(_.useEffect)((function(){k||c.surveyId||P()}),[]),Object(_.useEffect)((function(){u||o(Tn)}),[u]);var L=function(e){return function(t){return m(d()({},e,t))}},N=T()("crowdsignal-forms-nps",{"is-inactive":!k&&!u}),R=ie().accountInfo,B=Object(b.get)(R,"capabilities",[]).includes("hide-branding"),F=Object(b.get)(R,["signalCount","shouldDisplay"]),M=F&&Object(b.get)(R,["signalCount","count"])>=Object(b.get)(R,["signalCount","userLimit"]);return Object(a.createElement)(lt,{blockIcon:null,blockName:Object(l.__)("Crowdsignal NPS","crowdsignal-forms")},Object(a.createElement)(Fn,w()({currentView:r,onViewChange:o},e)),Object(a.createElement)(Bn,w()({shouldPromote:F,signalWarning:M},e)),!k&&M&&Object(a.createElement)(pt,null),!k&&I&&Object(a.createElement)(Hn,{retryHandler:P}),!k&&Object(a.createElement)(mt,{isDismissible:!1,icon:"visibility",componentActions:[Object(a.createElement)(Nn.PostPreviewButton,{key:1,className:["is-secondary","components-notice__action","crowdsignal-forms-nps__preview-button",c.surveyId?"":"is-disabled"],textContent:Object(l.__)("Preview","crowdsignal-forms")})]},Object(l.sprintf)(Object(l._n)("This block will appear as a popup window to people who have visited this page at least %d time.","This block will appear as a popup window to people who have visited this page at least %d times.",x,"crowdsignal-forms"),x)),(r===Tn||!u)&&Object(a.createElement)("div",{className:N,style:Mn(c,s)},Object(a.createElement)(C.RichText,{tagName:"h3",className:"crowdsignal-forms-nps__question",placeholder:Object(l.__)("Enter your rating question","crowdsignal-forms"),onChange:L("ratingQuestion"),value:v,allowedFormats:[]}),Object(a.createElement)("div",{className:"crowdsignal-forms-nps__rating"},Object(a.createElement)("div",{className:"crowdsignal-forms-nps__rating-labels"},Object(a.createElement)(C.RichText,{tagName:"span",placeholder:Object(l.__)("Not likely","crowdsignal-forms"),onChange:L("lowRatingLabel"),value:c.lowRatingLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0}),Object(a.createElement)(C.RichText,{tagName:"span",placeholder:Object(l.__)("Very likely","crowdsignal-forms"),onChange:L("highRatingLabel"),value:c.highRatingLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0})),Object(a.createElement)("div",{className:"crowdsignal-forms-nps__rating-scale"},Object(b.times)(11,(function(e){return Object(a.createElement)("div",{key:"rating-".concat(e),className:"crowdsignal-forms-nps__rating-button"},e)}))),!B&&Object(a.createElement)(be,{trackRef:"cs-forms-nps",editing:!0,message:Object(l.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms")}))),r===In&&u&&Object(a.createElement)("div",{className:N,style:Mn(c,s)},Object(a.createElement)("div",{className:"crowdsignal-forms-nps__feedback"},Object(a.createElement)(C.RichText,{tagName:"h3",className:"crowdsignal-forms-nps__question",placeholder:Object(l.__)("Enter your feedback question","crowdsignal-forms"),onChange:L("feedbackQuestion"),value:O,allowedFormats:[]}),Object(a.createElement)(E.TextareaControl,{className:"crowdsignal-forms-nps__feedback-text",rows:6,onChange:L("feedbackPlaceholder"),value:c.feedbackPlaceholder}),Object(a.createElement)("div",{className:"wp-block-button crowdsignal-forms-nps__feedback-button-wrapper"},Object(a.createElement)(C.RichText,{className:"wp-block-button__link crowdsignal-forms-nps__feedback-button",onChange:L("submitButtonLabel"),value:c.submitButtonLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0})),!B&&Object(a.createElement)(be,{trackRef:"cs-forms-nps",editing:!0,message:Object(l.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms")}))),p())})),Wn={title:Object(l.__)("Measure NPS","crowdsignal-forms"),description:Object(l.__)("Calculate your Net Promoter Score! Collect feedback and track customer satisfaction over time.  powered by Crowdsignal.","crowdsignal-forms"),category:"crowdsignal-forms",attributes:Ln,supports:{multiple:!1,html:!1,reusable:!1},icon:Object(a.createElement)((function(){return Object(a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("path",{d:"M4.49707 15V10.3857H4.54102L7.83691 15H9.05762V7.9541H7.64648V12.5439H7.60742L4.31641 7.9541H3.08594V15H4.49707ZM9.73438 7.9541V15H11.209V12.7783H12.5273C14.0117 12.7783 15.042 11.8115 15.042 10.3662C15.042 8.91602 14.0459 7.9541 12.6006 7.9541H9.73438ZM11.209 9.12109H12.21C13.0547 9.12109 13.543 9.57031 13.543 10.3711C13.543 11.1768 13.0498 11.626 12.2051 11.626H11.209V9.12109ZM15.1523 12.9932C15.1963 14.3164 16.2754 15.1221 17.9697 15.1221C19.7178 15.1221 20.8262 14.2578 20.8262 12.8906C20.8262 11.8164 20.2109 11.2109 18.7998 10.9082L17.9453 10.7275C17.1348 10.542 16.793 10.2979 16.793 9.86328C16.793 9.34082 17.2812 8.99414 18.0088 8.99414C18.7461 8.99414 19.2686 9.35547 19.3174 9.95117H20.6992C20.6748 8.67676 19.6445 7.83203 18.0039 7.83203C16.4316 7.83203 15.3086 8.69141 15.3086 9.99023C15.3086 11.0205 15.9482 11.6797 17.2471 11.958L18.165 12.1582C19.0146 12.3486 19.3516 12.6025 19.3516 13.0615C19.3516 13.5791 18.8145 13.9551 18.0283 13.9551C17.2471 13.9551 16.6416 13.5742 16.5732 12.9932H15.1523Z"}))}),null),edit:Vn,keywords:[Object(l.__)("ask","crowdsignal-forms"),"crowdsignal",Object(l.__)("CSAT","crowdsignal-forms"),Object(l.__)("customer experience","crowdsignal-forms"),Object(l.__)("customer satisfaction","crowdsignal-forms"),Object(l.__)("feedback","crowdsignal-forms"),Object(l.__)("form","crowdsignal-forms"),Object(l.__)("loyalty","crowdsignal-forms"),Object(l.__)("net promoter score","crowdsignal-forms"),Object(l.__)("nps","crowdsignal-forms"),Object(l.__)("opinion","crowdsignal-forms"),Object(l.__)("poll","crowdsignal-forms"),Object(l.__)("promoter","crowdsignal-forms"),Object(l.__)("research","crowdsignal-forms"),Object(l.__)("rating","crowdsignal-forms"),Object(l.__)("review","crowdsignal-forms"),Object(l.__)("score","crowdsignal-forms"),Object(l.__)("survey","crowdsignal-forms")],example:{attributes:{isExample:!0,ratingQuestion:Object(l.__)("How satisfied are you with the content of the site?","crowdsignal-forms"),feedbackQuestion:Object(l.__)("Any advise on how we could improve your experience?","crowdsignal-forms"),lowRatingLabel:Object(l.__)("Not satisfied","crowdsignal-forms"),highRatingLabel:Object(l.__)("Very satisfied","crowdsignal-forms")}}},Un=function(){return Object(a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(a.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 5.25V17.6893L6.42678 16.2626C6.75497 15.9344 7.20008 15.75 7.66421 15.75H18.75C18.8881 15.75 19 15.6381 19 15.5V5.5C19 5.36193 18.8881 5.25 18.75 5.25H5ZM3.5 5C3.5 4.30965 4.05964 3.75 4.75 3.75H18.75C19.7165 3.75 20.5 4.5335 20.5 5.5V15.5C20.5 16.4665 19.7165 17.25 18.75 17.25H7.66421C7.59791 17.25 7.53432 17.2763 7.48744 17.3232L3.5 21.3107V5Z"}),Object(a.createElement)("rect",{x:"7",y:"9.75",width:"1.5",height:"1.5"}),Object(a.createElement)("rect",{x:"11.25",y:"9.75",width:"1.5",height:"1.5"}),Object(a.createElement)("rect",{x:"15.5",y:"9.75",width:"1.5",height:"1.5"}))},zn="question",qn="submit",Kn=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),Gn=Object.freeze({CLICK:"click",HOVER:"hover",PAGE_LOAD:"load"}),Zn={backgroundColor:{type:"string"},buttonColor:{type:"string"},buttonTextColor:{type:"string"},emailPlaceholder:{type:"string",default:Object(l.__)("Your Email","crowdsignal-forms")},emailRequired:{type:"boolean",default:!1},feedbackPlaceholder:{type:"string",default:Object(l.__)("Please let us know how we can do better","crowdsignal-forms")},header:{type:"string",default:Object(l.__)(" Hey there!","crowdsignal-forms")},hideBranding:{type:"boolean",default:!1},hideTriggerShadow:{type:"boolean",default:!1},submitButtonLabel:{type:"string",default:Object(l.__)("Submit","crowdsignal-forms")},submitText:{type:"string",default:Object(l.__)("Thanks for letting us know!","crowdsignal-forms")},surveyId:{type:"number",default:null},textColor:{type:"string"},toggleOn:{type:"string",default:Gn.CLICK},triggerLabel:{type:"string",default:Object(l.__)("Feedback","crowdsignal-forms")},triggerBackgroundColor:{type:"string"},triggerTextColor:{type:"string"},title:{type:"string",default:""},x:{type:"string",default:"left"},y:{type:"string",default:"bottom"},status:{type:"string",default:Kn.OPEN},closedAfterDateTime:{type:"string",default:null},emailResponses:{type:"boolean",default:!0},isExample:{type:"boolean",default:!1},isWidget:{type:"boolean",default:!1}};function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jn,Xn=function(e,t){return{left:e.left+t.x+window.scrollX,right:e.right+(window.innerWidth>t.left+t.width?window.innerWidth-t.left-t.width:0),top:e.top+t.y+window.scrollY,bottom:e.bottom+(window.innerHeight>t.top+t.height?window.innerHeight-t.top-t.height:0)}},$n=function(e,t,n){return{left:"left"===e?n.left:null,right:"right"===e?n.right:null}},er=function(e,t,n){return"center"===e?{top:(window.innerHeight-t)/2,bottom:null}:{top:"top"===e?n.top:null,bottom:"bottom"===e?n.bottom:null}},tr=function(e){var t=e.attributes,n=e.setAttributes,r=e.shouldPromote,o=e.signalWarning,c=e.email,i="https://app.crowdsignal.com/surveys/".concat(t.surveyId,"/report/overview"),s=function(e){return function(t){return n(d()({},e,t))}};return Object(a.createElement)(C.InspectorControls,null,Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Results","crowdsignal-forms"),initialOpen:!0},Object(a.createElement)("p",null,t.surveyId?Object(l.__)("Manage results on ","crowdsignal-forms"):Object(l.__)("Save the block to track results on ","crowdsignal-forms"),Object(a.createElement)(E.ExternalLink,{href:"https://www.crowdsignal.com"},"crowdsignal.com")),Object(a.createElement)("p",null,Object(a.createElement)(E.Button,{isSecondary:!0,disabled:!t.surveyId,href:i,target:"blank"},Object(l.__)("View results","crowdsignal-forms"))),Object(a.createElement)(E.TextControl,{label:Object(l.__)("Title (optional)","crowdsignal-forms"),onChange:function(e){return n({title:e})},value:Object(k.decodeEntities)(t.title)}),Object(a.createElement)(E.ToggleControl,{label:Object(l.__)("Send me responses via email","crowdsignal-forms"),checked:t.emailResponses,onChange:s("emailResponses"),help:t.emailResponses&&c&&Object(l.sprintf)(Object(l.__)("Responses will be sent to %s","crowdsignal-forms"),c)}),r&&Object(a.createElement)(qe,{signalWarning:o})),Object(a.createElement)(C.PanelColorSettings,{title:Object(l.__)("Feedback Button","crowdsignal-forms"),initialOpen:!1,colorSettings:[{label:Object(l.__)("Background color","crowdsignal-forms"),onChange:s("triggerBackgroundColor"),value:t.triggerBackgroundColor},{label:Object(l.__)("Text color","crowdsignal-forms"),onChange:s("triggerTextColor"),value:t.triggerTextColor}]},Object(a.createElement)(E.ToggleControl,{label:Object(l.__)("Hide Shadow","crowdsignal-forms"),checked:t.hideTriggerShadow,onChange:s("hideTriggerShadow")})),Object(a.createElement)(C.PanelColorSettings,{title:Object(l.__)("Block styling","crowdsignal-forms"),initialOpen:!1,colorSettings:[{label:Object(l.__)("Background color","crowdsignal-forms"),onChange:s("backgroundColor"),value:t.backgroundColor},{label:Object(l.__)("Text color","crowdsignal-forms"),onChange:s("textColor"),value:t.textColor},{label:Object(l.__)("Button color","crowdsignal-forms"),onChange:s("buttonColor"),value:t.buttonColor},{label:Object(l.__)("Button text color","crowdsignal-forms"),onChange:s("buttonTextColor"),value:t.buttonTextColor}]}),Object(a.createElement)(E.PanelBody,{title:Object(l.__)("Settings","crowdsignal-forms"),initialOpen:!1},Object(a.createElement)(E.SelectControl,{value:t.status,label:Object(l.__)("Status","crowdsignal-forms"),options:[{label:Object(l.__)("Open","crowdsignal-forms"),value:Kn.OPEN},{label:Object(l.__)("Closed after","crowdsignal-forms"),value:Kn.CLOSED_AFTER},{label:Object(l.__)("Closed","crowdsignal-forms"),value:Kn.CLOSED}],onChange:function(e){return n({status:e})},help:Kn.CLOSED_AFTER===t.status&&null!==t.closedAfterDateTime&&(new Date).toISOString()>t.closedAfterDateTime?"Currently closed as date has passed":""}),Kn.CLOSED_AFTER===t.status&&Object(a.createElement)(E.DateTimePicker,{currentDate:t.closedAfterDateTime&&new Date(t.closedAfterDateTime)||new Date,label:Object(l.__)("Close on","crowdsignal-forms"),onChange:function(e){var t=new Date(e);n({closedAfterDateTime:t.toISOString()})},is12Hour:!0}),Object(a.createElement)(E.SelectControl,{value:t.toggleOn,label:Object(l.__)("Show feedback form on:","crowdsignal-forms"),options:[{label:Object(l.__)("Click","crowdsignal-forms"),value:Gn.CLICK},{label:Object(l.__)("Hover","crowdsignal-forms"),value:Gn.HOVER},{label:Object(l.__)("Page load","crowdsignal-forms"),value:Gn.PAGE_LOAD}],onChange:s("toggleOn")}),Object(a.createElement)(E.ToggleControl,{label:Object(l.__)("Require email address","crowdsignal-forms"),checked:t.emailRequired,onChange:s("emailRequired")})))},nr=n(33);function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lr(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ir(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function sr(e){return e?e.ownerDocument||e:document}try{Jn=window}catch(ba){}function ur(e){return e&&sr(e).defaultView||Jn}var dr,fr=(dr=ur(),Boolean(void 0!==dr&&dr.document&&dr.document.createElement)),br=fr?_.useLayoutEffect:_.useEffect;function mr(e){return Object(_.useState)(e)[0]}function pr(e){for(var t,n=[[]],r=function(){var e=t.value,r=n.find((function(t){return!t[0]||t[0].groupId===e.groupId}));r?r.push(e):n.push([e])},o=ir(e);!(t=o()).done;)r();return n}function gr(e){for(var t,n=[],r=ir(e);!(t=r()).done;){var o=t.value;n.push.apply(n,o)}return n}function Or(e){return e.slice().reverse()}function vr(e,t){return t?e.find((function(e){return!e.disabled&&e.id!==t})):e.find((function(e){return!e.disabled}))}function wr(e,t){var n;return t||null===t?t:e.currentId||null===e.currentId?e.currentId:null===(n=vr(e.items||[]))||void 0===n?void 0:n.id}function hr(e,t){if(t)return null==e?void 0:e.find((function(e){return e.id===t&&!e.disabled}))}function jr(e,t){return function(e){return"function"==typeof e}(e)?e(t):e}function _r(e){return void 0===e&&(e="id"),(e?e+"-":"")+Math.random().toString(32).substr(2,6)}var yr=Object(_.createContext)(_r);function Cr(e,t){return Boolean(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function Er(e,t){return e.findIndex((function(e){return!(!e.ref.current||!t.ref.current)&&Cr(t.ref.current,e.ref.current)}))}function kr(e){for(var t,n=0,r=ir(e);!(t=r()).done;){var o=t.value.length;o>n&&(n=o)}return n}function xr(e){for(var t=pr(e),n=kr(t),r=[],o=0;o<n;o+=1)for(var a,l=ir(t);!(a=l()).done;){var c=a.value;c[o]&&r.push(ar(ar({},c[o]),{},{groupId:c[o].groupId?""+o:void 0}))}return r}function Sr(e,t,n){for(var r,o=kr(e),a=ir(e);!(r=a()).done;)for(var l=r.value,c=0;c<o;c+=1){var i=l[c];if(!i||n&&i.disabled){var s=0===c&&n?vr(l):l[c-1];l[c]=s&&t!==(null==s?void 0:s.id)&&n?s:{id:"__EMPTY_ITEM__",disabled:!0,ref:{current:null},groupId:null==s?void 0:s.groupId}}}return e}var Tr={id:null,ref:{current:null}};function Ir(e,t){return e.filter((function(e){return e.groupId===t}))}var Pr={horizontal:"vertical",vertical:"horizontal"};function Lr(e,t,n){return n in e?[].concat(e.slice(0,n),[t],e.slice(n)):[].concat(e,[t])}function Nr(e){var t=e.map((function(e,t){return[t,e]})),n=!1;return t.sort((function(e,t){var r=e[0],o=e[1],a=t[0],l=t[1],c=o.ref.current,i=l.ref.current;return c&&i?Cr(c,i)?(r>a&&(n=!0),-1):(r<a&&(n=!0),1):0})),n?t.map((function(e){e[0];return e[1]})):e}function Ar(e,t){var n=Nr(e);e!==n&&t(n)}function Rr(e,t){var n=Object(_.useRef)([]);Object(_.useEffect)((function(){for(var r,o=function(e){for(var t,n=e[0],r=e.slice(1),o=null==n||null===(t=n.ref.current)||void 0===t?void 0:t.parentElement,a=function(){var e=o;if(r.every((function(t){return e.contains(t.ref.current)})))return{v:o};o=o.parentElement};o;){var l=a();if("object"==typeof l)return l.v}return sr(o).body}(e),a=new IntersectionObserver((function(){!!n.current.length&&Ar(e,t),n.current=e}),{root:o}),l=ir(e);!(r=l()).done;){var c=r.value;c.ref.current&&a.observe(c.ref.current)}return function(){a.disconnect()}}),[e])}function Dr(e,t){"function"==typeof IntersectionObserver?Rr(e,t):function(e,t){Object(_.useEffect)((function(){var n=setTimeout((function(){return Ar(e,t)}),250);return function(){return clearTimeout(n)}}))}(e,t)}function Br(e,t){var n=e.unstable_virtual,r=e.rtl,o=e.orientation,a=e.items,l=e.groups,c=e.currentId,i=e.loop,s=e.wrap,u=e.pastIds,d=e.shift,f=e.unstable_moves,b=e.unstable_includesBaseElement,m=e.initialVirtual,p=e.initialRTL,g=e.initialOrientation,O=e.initialCurrentId,v=e.initialLoop,w=e.initialWrap,h=e.initialShift,j=e.hasSetCurrentId;switch(t.type){case"registerGroup":var _=t.group;if(0===l.length)return ar(ar({},e),{},{groups:[_]});var y=Er(l,_);return ar(ar({},e),{},{groups:Lr(l,_,y)});case"unregisterGroup":var C=t.id,E=l.filter((function(e){return e.id!==C}));return E.length===l.length?e:ar(ar({},e),{},{groups:E});case"registerItem":var k,x=t.item,S=l.find((function(e){var t;return null===(t=e.ref.current)||void 0===t?void 0:t.contains(x.ref.current)})),T=ar({groupId:null==S?void 0:S.id},x),I=Er(a,T),P=ar(ar({},e),{},{items:Lr(a,T,I)});return j||f||void 0!==O?P:ar(ar({},P),{},{currentId:null===(k=vr(P.items))||void 0===k?void 0:k.id});case"unregisterItem":var L=t.id,N=a.filter((function(e){return e.id!==L}));if(N.length===a.length)return e;var A=u.filter((function(e){return e!==L})),R=ar(ar({},e),{},{pastIds:A,items:N});if(c&&c===L){var D=b?null:wr(ar(ar({},R),{},{currentId:A[0]}));return ar(ar({},R),{},{currentId:D})}return R;case"move":var B=t.id;if(void 0===B)return e;var F=u.filter((function(e){return e!==c&&e!==B})),M=c?[c].concat(F):F,H=ar(ar({},e),{},{pastIds:M});if(null===B)return ar(ar({},H),{},{unstable_moves:f+1,currentId:wr(H,B)});var V=hr(a,B);return ar(ar({},H),{},{unstable_moves:V?f+1:f,currentId:wr(H,null==V?void 0:V.id)});case"next":if(null==c)return Br(e,ar(ar({},t),{},{type:"first"}));var W=r&&"vertical"!==o,U=W?Or(a):a,z=U.find((function(e){return e.id===c}));if(!z)return Br(e,ar(ar({},t),{},{type:"first"}));var q=!!z.groupId,K=U.indexOf(z),G=U.slice(K+1),Z=Ir(G,z.groupId);if(t.allTheWay){var Y=vr(W?Ir(U,z.groupId):Or(Z));return Br(e,ar(ar({},t),{},{type:"move",id:null==Y?void 0:Y.id}))}var Q=function(e){return e&&Pr[e]}(q?o||"horizontal":o),J=i&&i!==Q,X=q&&s&&s!==Q,$=t.hasNullItem||!q&&J&&b;if(J){var ee=vr(function(e,t,n){var r=e.findIndex((function(e){return e.id===t}));return[].concat(e.slice(r+1),n?[Tr]:[],e.slice(0,r))}(X&&!$?U:Ir(U,z.groupId),c,$),c);return Br(e,ar(ar({},t),{},{type:"move",id:null==ee?void 0:ee.id}))}if(X){var te=vr($?Z:G,c),ne=$?(null==te?void 0:te.id)||null:null==te?void 0:te.id;return Br(e,ar(ar({},t),{},{type:"move",id:ne}))}var re=vr(Z,c);return Br(e,!re&&$?ar(ar({},t),{},{type:"move",id:null}):ar(ar({},t),{},{type:"move",id:null==re?void 0:re.id}));case"previous":var oe=!!!l.length&&b,ae=Br(ar(ar({},e),{},{items:Or(a)}),ar(ar({},t),{},{type:"next",hasNullItem:oe}));return ar(ar({},ae),{},{items:a});case"down":var le=d&&!t.allTheWay,ce=xr(gr(Sr(pr(a),c,le))),ie=i&&"horizontal"!==i&&b,se=Br(ar(ar({},e),{},{orientation:"vertical",items:ce}),ar(ar({},t),{},{type:"next",hasNullItem:ie}));return ar(ar({},se),{},{orientation:o,items:a});case"up":var ue=d&&!t.allTheWay,de=xr(Or(gr(Sr(pr(a),c,ue)))),fe=b,be=Br(ar(ar({},e),{},{orientation:"vertical",items:de}),ar(ar({},t),{},{type:"next",hasNullItem:fe}));return ar(ar({},be),{},{orientation:o,items:a});case"first":var me=vr(a);return Br(e,ar(ar({},t),{},{type:"move",id:null==me?void 0:me.id}));case"last":var pe=Br(ar(ar({},e),{},{items:Or(a)}),ar(ar({},t),{},{type:"first"}));return ar(ar({},pe),{},{items:a});case"sort":return ar(ar({},e),{},{items:Nr(a),groups:Nr(l)});case"setVirtual":return ar(ar({},e),{},{unstable_virtual:jr(t.virtual,n)});case"setRTL":return ar(ar({},e),{},{rtl:jr(t.rtl,r)});case"setOrientation":return ar(ar({},e),{},{orientation:jr(t.orientation,o)});case"setCurrentId":var ge=wr(ar(ar({},e),{},{currentId:jr(t.currentId,c)}));return ar(ar({},e),{},{currentId:ge,hasSetCurrentId:!0});case"setLoop":return ar(ar({},e),{},{loop:jr(t.loop,i)});case"setWrap":return ar(ar({},e),{},{wrap:jr(t.wrap,s)});case"setShift":return ar(ar({},e),{},{shift:jr(t.shift,d)});case"setIncludesBaseElement":return ar(ar({},e),{},{unstable_includesBaseElement:jr(t.includesBaseElement,b)});case"reset":return ar(ar({},e),{},{unstable_virtual:m,rtl:p,orientation:g,currentId:wr(ar(ar({},e),{},{currentId:O})),loop:v,wrap:w,shift:h,unstable_moves:0,pastIds:[]});case"setItems":return ar(ar({},e),{},{items:t.items});default:throw new Error}}function Fr(e){return Object(_.useCallback)(e,[])}function Mr(e){void 0===e&&(e={});var t=mr(e),n=t.unstable_virtual,r=void 0!==n&&n,o=t.rtl,a=void 0!==o&&o,l=t.orientation,c=t.currentId,i=t.loop,s=void 0!==i&&i,u=t.wrap,d=void 0!==u&&u,f=t.shift,b=void 0!==f&&f,m=t.unstable_includesBaseElement,p=function(e){void 0===e&&(e={});var t=mr(e).baseId,n=Object(_.useContext)(yr),r=Object(_.useRef)(0),o=Object(_.useState)((function(){return t||n()}));return{baseId:o[0],setBaseId:o[1],unstable_idCountRef:r}}(lr(t,["unstable_virtual","rtl","orientation","currentId","loop","wrap","shift","unstable_includesBaseElement"])),g=Object(_.useReducer)(Br,{unstable_virtual:r,rtl:a,orientation:l,items:[],groups:[],currentId:c,loop:s,wrap:d,shift:b,unstable_moves:0,pastIds:[],unstable_includesBaseElement:null!=m?m:null===c,initialVirtual:r,initialRTL:a,initialOrientation:l,initialCurrentId:c,initialLoop:s,initialWrap:d,initialShift:b}),O=g[0],v=(O.pastIds,O.initialVirtual,O.initialRTL,O.initialOrientation,O.initialCurrentId,O.initialLoop,O.initialWrap,O.initialShift,O.hasSetCurrentId,lr(O,["pastIds","initialVirtual","initialRTL","initialOrientation","initialCurrentId","initialLoop","initialWrap","initialShift","hasSetCurrentId"])),w=g[1],h=Object(_.useState)(!1),j=h[0],y=h[1],C=function(){var e=Object(_.useRef)(!1);return br((function(){return function(){e.current=!0}}),[]),e}(),E=Object(_.useCallback)((function(e){return w({type:"setItems",items:e})}),[]);return Dr(v.items,E),ar(ar(ar({},p),v),{},{unstable_hasActiveWidget:j,unstable_setHasActiveWidget:y,registerItem:Fr((function(e){C.current||w({type:"registerItem",item:e})})),unregisterItem:Fr((function(e){C.current||w({type:"unregisterItem",id:e})})),registerGroup:Fr((function(e){C.current||w({type:"registerGroup",group:e})})),unregisterGroup:Fr((function(e){C.current||w({type:"unregisterGroup",id:e})})),move:Fr((function(e){return w({type:"move",id:e})})),next:Fr((function(e){return w({type:"next",allTheWay:e})})),previous:Fr((function(e){return w({type:"previous",allTheWay:e})})),up:Fr((function(e){return w({type:"up",allTheWay:e})})),down:Fr((function(e){return w({type:"down",allTheWay:e})})),first:Fr((function(){return w({type:"first"})})),last:Fr((function(){return w({type:"last"})})),sort:Fr((function(){return w({type:"sort"})})),unstable_setVirtual:Fr((function(e){return w({type:"setVirtual",virtual:e})})),setRTL:Fr((function(e){return w({type:"setRTL",rtl:e})})),setOrientation:Fr((function(e){return w({type:"setOrientation",orientation:e})})),setCurrentId:Fr((function(e){return w({type:"setCurrentId",currentId:e})})),setLoop:Fr((function(e){return w({type:"setLoop",loop:e})})),setWrap:Fr((function(e){return w({type:"setWrap",wrap:e})})),setShift:Fr((function(e){return w({type:"setShift",shift:e})})),unstable_setIncludesBaseElement:Fr((function(e){return w({type:"setIncludesBaseElement",includesBaseElement:e})})),reset:Fr((function(){return w({type:"reset"})}))})}function Hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ur(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qr(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}var Kr=Object(_.createContext)({});var Gr=function(e,t,n){void 0===n&&(n=t.children);var r=Object(_.useContext)(Kr);if(r.useCreateElement)return r.useCreateElement(e,t,n);if("string"==typeof e&&function(e){return"function"==typeof e}(n)){t.children;return n(Ur(t,["children"]))}return Object(_.createElement)(e,t,n)};function Zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(n),!0).forEach((function(t){Zr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jr(e){return"object"==typeof e&&null!=e}function Xr(e){var t;if(!Jr(e))return!1;var n=Object.getPrototypeOf(e);return null==n||(null===(t=n.constructor)||void 0===t?void 0:t.toString())===Object.toString()}function $r(e,t){for(var n={},r={},o=0,a=Object.keys(e);o<a.length;o++){var l=a[o];t.indexOf(l)>=0?n[l]=e[l]:r[l]=e[l]}return[n,r]}function eo(e,t){if(void 0===t&&(t=[]),!Xr(e.state))return $r(e,t);var n=$r(e,[].concat(t,["state"])),r=n[0],o=n[1],a=r.state,l=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(r,["state"]);return[Qr(Qr({},a),l),o]}function to(e,t){if(e===t)return!0;if(!e)return!1;if(!t)return!1;if("object"!=typeof e)return!1;if("object"!=typeof t)return!1;var n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(var a=0,l=n;a<l.length;a++){var c=l[a];if(e[c]!==t[c])return!1}return!0}function no(e){return"normalizePropsAreEqualInner"===e.name?e:function(t,n){return Xr(t.state)&&Xr(n.state)?e(Qr(Qr({},t.state),t),Qr(Qr({},n.state),n)):e(t,n)}}function ro(e){var t,n=e.as,r=e.useHook,o=e.memo,a=e.propsAreEqual,l=void 0===a?null==r?void 0:r.unstable_propsAreEqual:a,c=e.keys,i=void 0===c?(null==r?void 0:r.__keys)||[]:c,s=e.useCreateElement,u=void 0===s?Gr:s,d=function(e,t){var o=e.as,a=void 0===o?n:o,l=Ur(e,["as"]);if(r){var c,s=eo(l,i),d=s[0],f=s[1],b=r(d,Wr({ref:t},f)),m=b.wrapElement,p=Ur(b,["wrapElement"]),g=(null===(c=a.render)||void 0===c?void 0:c.__keys)||a.__keys,O=g&&eo(l,g)[0],v=O?Wr(Wr({},p),O):p,w=u(a,v);return m?m(w):w}return u(a,Wr({ref:t},l))};return t=d,d=Object(_.forwardRef)(t),o&&(d=function(e,t){return Object(_.memo)(e,t)}(d,l&&no(l))),d.__keys=i,d.unstable_propsAreEqual=no(l||to),d}function oo(e,t){Object(_.useDebugValue)(e);var n=Object(_.useContext)(Kr);return null!=n[e]?n[e]:t}function ao(e){var t,n,r,o=(r=e.compose,Array.isArray(r)?r:void 0!==r?[r]:[]),a=function(t,n){if(e.useOptions&&(t=e.useOptions(t,n)),e.name&&(t=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r="use"+e+"Options";Object(_.useDebugValue)(r);var o=oo(r);return o?Wr(Wr({},t),o(t,n)):t}(e.name,t,n)),e.compose)for(var r,a=qr(o);!(r=a()).done;){t=r.value.__useOptions(t,n)}return t},l=function(t,n,r){if(void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r=!1),r||(t=a(t,n)),e.useProps&&(n=e.useProps(t,n)),e.name&&(n=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r="use"+e+"Props";Object(_.useDebugValue)(r);var o=oo(r);return o?o(t,n):n}(e.name,t,n)),e.compose)if(e.useComposeOptions&&(t=e.useComposeOptions(t,n)),e.useComposeProps)n=e.useComposeProps(t,n);else for(var l,c=qr(o);!(l=c()).done;){n=(0,l.value)(t,n,!0)}var i={},s=n||{};for(var u in s)void 0!==s[u]&&(i[u]=s[u]);return i};l.__useOptions=a;var c=o.reduce((function(e,t){return e.push.apply(e,t.__keys||[]),e}),[]);return l.__keys=[].concat(c,(null===(t=e.useState)||void 0===t?void 0:t.__keys)||[],e.keys||[]),l.unstable_propsAreEqual=e.propsAreEqual||(null===(n=o[0])||void 0===n?void 0:n.unstable_propsAreEqual)||to,l}function lo(e,t){void 0===t&&(t=null),e&&("function"==typeof e?e(t):e.current=t)}function co(e,t){return Object(_.useMemo)((function(){return null==e&&null==t?null:function(n){lo(e,n),lo(t,n)}}),[e,t])}function io(e){var t=Object(_.useRef)(e);return br((function(){t.current=e})),t}function so(e){return e.target===e.currentTarget}var uo=ao({name:"Role",keys:["unstable_system"],propsAreEqual:function(e,t){var n=e.unstable_system,r=lr(e,["unstable_system"]),o=t.unstable_system,a=lr(t,["unstable_system"]);return!(n!==o&&!to(n,o))&&to(r,a)}}),fo=(ro({as:"div",useHook:uo}),["button","color","file","image","reset","submit"]);function bo(e){if("BUTTON"===e.tagName)return!0;if("INPUT"===e.tagName){var t=e;return-1!==fo.indexOf(t.type)}return!1}function mo(e){var t=sr(e).activeElement;return null!=t&&t.nodeName?t:null}function po(e,t){return e===t||e.contains(t)}function go(e){var t=mo(e);if(!t)return!1;if(po(e,t))return!0;var n=t.getAttribute("aria-activedescendant");return!!n&&(n===e.id||!!e.querySelector("#"+n))}function Oo(e){return!po(e.currentTarget,e.target)}function vo(e){return!!fr&&-1!==window.navigator.userAgent.indexOf(e)}function wo(e,t){return"matches"in e?e.matches(t):"msMatchesSelector"in e?e.msMatchesSelector(t):e.webkitMatchesSelector(t)}var ho="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";function jo(e){return wo(e,ho)&&function(e){var t=e;return t.offsetWidth>0||t.offsetHeight>0||e.getClientRects().length>0}(e)}var _o=vo("Mac")&&!vo("Chrome")&&(vo("Safari")||vo("Firefox"));function yo(e){!go(e)&&jo(e)&&e.focus()}function Co(e,t,n,r){return e?t&&!n?-1:void 0:t?r:r||0}function Eo(e,t){return Object(_.useCallback)((function(n){var r;null===(r=e.current)||void 0===r||r.call(e,n),n.defaultPrevented||t&&(n.stopPropagation(),n.preventDefault())}),[e,t])}var ko=ao({name:"Tabbable",compose:uo,keys:["disabled","focusable"],useOptions:function(e,t){return ar({disabled:t.disabled},e)},useProps:function(e,t){var n=t.ref,r=t.tabIndex,o=t.onClickCapture,a=t.onMouseDownCapture,l=t.onMouseDown,c=t.onKeyPressCapture,i=t.style,s=lr(t,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),u=Object(_.useRef)(null),d=io(o),f=io(a),b=io(l),m=io(c),p=!!e.disabled&&!e.focusable,g=Object(_.useState)(!0),O=g[0],v=g[1],w=Object(_.useState)(!0),h=w[0],j=w[1],y=e.disabled?ar({pointerEvents:"none"},i):i;br((function(){var e,t=u.current;t&&("BUTTON"!==(e=t).tagName&&"INPUT"!==e.tagName&&"SELECT"!==e.tagName&&"TEXTAREA"!==e.tagName&&"A"!==e.tagName&&v(!1),function(e){return"BUTTON"===e.tagName||"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName}(t)||j(!1))}),[]);var C=Eo(d,e.disabled),E=Eo(f,e.disabled),k=Eo(m,e.disabled),x=Object(_.useCallback)((function(e){var t;null===(t=b.current)||void 0===t||t.call(b,e);var n=e.currentTarget;if(!e.defaultPrevented&&_o&&!Oo(e)&&bo(n)){var r=requestAnimationFrame((function(){n.removeEventListener("mouseup",o,!0),yo(n)})),o=function(){cancelAnimationFrame(r),yo(n)};n.addEventListener("mouseup",o,{once:!0,capture:!0})}}),[]);return ar({ref:co(u,n),style:y,tabIndex:Co(p,O,h,r),disabled:!(!p||!h)||void 0,"aria-disabled":!!e.disabled||void 0,onClickCapture:C,onMouseDownCapture:E,onMouseDown:x,onKeyPressCapture:k},s)}});ro({as:"div",useHook:ko});function xo(e,t,n){if("function"==typeof Event)return new Event(t,n);var r=sr(e).createEvent("Event");return r.initEvent(t,null==n?void 0:n.bubbles,null==n?void 0:n.cancelable),r}function So(e,t,n){return void 0===n&&(n={}),"function"==typeof FocusEvent?new FocusEvent(t,n):xo(e,t,n)}function To(e,t){var n=So(e,"blur",t),r=e.dispatchEvent(n),o=Qr(Qr({},t),{},{bubbles:!0});return e.dispatchEvent(So(e,"focusout",o)),r}function Io(e,t,n){return e.dispatchEvent(function(e,t,n){if(void 0===n&&(n={}),"function"==typeof KeyboardEvent)return new KeyboardEvent(t,n);var r=sr(e).createEvent("KeyboardEvent");return r.initKeyboardEvent(t,n.bubbles,n.cancelable,ur(e),n.key,n.location,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey),r}(e,t,n))}var Po=fr&&"msCrypto"in window;var Lo=["baseId","unstable_idCountRef","setBaseId","unstable_virtual","rtl","orientation","items","groups","currentId","loop","wrap","shift","unstable_moves","unstable_hasActiveWidget","unstable_includesBaseElement","registerItem","unregisterItem","registerGroup","unregisterGroup","move","next","previous","up","down","first","last","sort","unstable_setVirtual","setRTL","setOrientation","setCurrentId","setLoop","setWrap","setShift","reset","unstable_setIncludesBaseElement","unstable_setHasActiveWidget"],No=Lo,Ao=No;function Ro(e){e.userFocus=!0,e.focus(),e.userFocus=!1}function Do(e,t){e.userFocus=t}var Bo=fr&&"msCrypto"in window;function Fo(e,t,n){var r=io(n);return Object(_.useCallback)((function(n){var o;if(null===(o=r.current)||void 0===o||o.call(r,n),!n.defaultPrevented&&e&&function(e){return!!so(e)&&(!e.metaKey&&"Tab"!==e.key)}(n)){var a=null==t?void 0:t.ref.current;a&&(Io(a,n.type,n)||n.preventDefault(),n.currentTarget.contains(a)&&n.stopPropagation())}}),[e,t])}function Mo(e,t){return null==e?void 0:e.some((function(e){return!!t&&e.ref.current===t}))}var Ho=ro({as:"div",useHook:ao({name:"Composite",compose:[ko],keys:Lo,useOptions:function(e){return ar(ar({},e),{},{currentId:wr(e)})},useProps:function(e,t){var n=t.ref,r=t.onFocusCapture,o=t.onFocus,a=t.onBlurCapture,l=t.onKeyDown,c=t.onKeyDownCapture,i=t.onKeyUpCapture,s=lr(t,["ref","onFocusCapture","onFocus","onBlurCapture","onKeyDown","onKeyDownCapture","onKeyUpCapture"]),u=Object(_.useRef)(null),d=hr(e.items,e.currentId),f=Object(_.useRef)(null),b=io(r),m=io(o),p=io(a),g=io(l),O=function(e){var t=io(e),n=Object(_.useReducer)((function(e){return e+1}),0),r=n[0],o=n[1];return Object(_.useEffect)((function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.ref.current;r&&n&&Ro(n)}),[r]),o}(d),v=Bo?function(e){var t=Object(_.useRef)(null);return Object(_.useEffect)((function(){var n=sr(e.current),r=function(e){var n=e.target;t.current=n};return n.addEventListener("focus",r,!0),function(){n.removeEventListener("focus",r,!0)}}),[]),t}(u):void 0;Object(_.useEffect)((function(){var t=u.current;e.unstable_moves&&!d&&(null==t||t.focus())}),[e.unstable_moves,d]);var w=Fo(e.unstable_virtual,d,c),h=Fo(e.unstable_virtual,d,i),j=Object(_.useCallback)((function(t){var n;if(null===(n=b.current)||void 0===n||n.call(b,t),!t.defaultPrevented&&e.unstable_virtual){var r=(null==v?void 0:v.current)||t.relatedTarget,o=Mo(e.items,r);so(t)&&o&&(t.stopPropagation(),f.current=r)}}),[e.unstable_virtual,e.items]),y=Object(_.useCallback)((function(t){var n;if(null===(n=m.current)||void 0===n||n.call(m,t),!t.defaultPrevented)if(e.unstable_virtual)so(t)&&O();else if(so(t)){var r;null===(r=e.setCurrentId)||void 0===r||r.call(e,null)}}),[e.unstable_virtual,e.setCurrentId]),C=Object(_.useCallback)((function(t){var n;if(null===(n=p.current)||void 0===n||n.call(p,t),!t.defaultPrevented&&e.unstable_virtual){var r=(null==d?void 0:d.ref.current)||null,o=function(e){return Po?mo(e.currentTarget):e.relatedTarget}(t),a=Mo(e.items,o);if(so(t)&&a)o===r?f.current&&f.current!==o&&To(f.current,t):r&&To(r,t),t.stopPropagation();else!Mo(e.items,t.target)&&r&&To(r,t)}}),[e.unstable_virtual,e.items,d]),E=Object(_.useCallback)((function(t){var n,r;if(null===(n=g.current)||void 0===n||n.call(g,t),!t.defaultPrevented&&null===e.currentId&&so(t)){var o="horizontal"!==e.orientation,a="vertical"!==e.orientation,l=!(null===(r=e.groups)||void 0===r||!r.length),c={ArrowUp:(l||o)&&function(){if(l){var t,n=vr(gr(Or(pr(e.items))));if(null!=n&&n.id)null===(t=e.move)||void 0===t||t.call(e,n.id)}else{var r;null===(r=e.last)||void 0===r||r.call(e)}},ArrowRight:(l||a)&&e.first,ArrowDown:(l||o)&&e.first,ArrowLeft:(l||a)&&e.last,Home:e.first,End:e.last,PageUp:e.first,PageDown:e.last}[t.key];c&&(t.preventDefault(),c())}}),[e.currentId,e.orientation,e.groups,e.items,e.move,e.last,e.first]);return ar({ref:co(u,n),id:e.baseId,onFocus:y,onFocusCapture:j,onBlurCapture:C,onKeyDownCapture:w,onKeyDown:E,onKeyUpCapture:h,"aria-activedescendant":e.unstable_virtual&&(null==d?void 0:d.id)||void 0},s)},useComposeProps:function(e,t){t=uo(e,t,!0);var n=ko(e,t,!0);return e.unstable_virtual||null===e.currentId?ar({tabIndex:0},n):ar(ar({},t),{},{ref:n.ref})}}),useCreateElement:function(e,t,n){return Gr(e,t,n)}}),Vo=ao({keys:[].concat(["baseId","unstable_idCountRef","setBaseId"],["id"]),useOptions:function(e,t){var n=Object(_.useContext)(yr),r=Object(_.useState)((function(){return e.unstable_idCountRef?(e.unstable_idCountRef.current+=1,"-"+e.unstable_idCountRef.current):e.baseId?"-"+n(""):""}))[0],o=Object(_.useMemo)((function(){return e.baseId||n()}),[e.baseId,n]),a=t.id||e.id||""+o+r;return ar(ar({},e),{},{id:a})},useProps:function(e,t){return ar({id:e.id},t)}}),Wo=(ro({as:"div",useHook:Vo}),ao({name:"Group",compose:uo,keys:[],useProps:function(e,t){return ar({role:"group"},t)}})),Uo=(ro({as:"div",useHook:Wo}),ro({as:"div",useHook:ao({name:"CompositeGroup",compose:[Wo,Vo],keys:No,propsAreEqual:function(e,t){if(!t.id||e.id!==t.id)return Wo.unstable_propsAreEqual(e,t);var n=e.currentId,r=(e.unstable_moves,lr(e,["currentId","unstable_moves"])),o=t.currentId,a=(t.unstable_moves,lr(t,["currentId","unstable_moves"]));if(e.items&&t.items){var l=hr(e.items,n),c=hr(t.items,o),i=null==l?void 0:l.groupId,s=null==c?void 0:c.groupId;if(t.id===s||t.id===i)return!1}return Wo.unstable_propsAreEqual(r,a)},useProps:function(e,t){var n=t.ref,r=lr(t,["ref"]),o=Object(_.useRef)(null),a=e.id;return br((function(){var t;if(a)return null===(t=e.registerGroup)||void 0===t||t.call(e,{id:a,ref:o}),function(){var t;null===(t=e.unregisterGroup)||void 0===t||t.call(e,a)}}),[a,e.registerGroup,e.unregisterGroup]),ar({ref:co(o,n)},r)}})}));var zo=ao({name:"Clickable",compose:ko,keys:["unstable_clickOnEnter","unstable_clickOnSpace"],useOptions:function(e){var t=e.unstable_clickOnEnter,n=void 0===t||t,r=e.unstable_clickOnSpace;return ar({unstable_clickOnEnter:n,unstable_clickOnSpace:void 0===r||r},lr(e,["unstable_clickOnEnter","unstable_clickOnSpace"]))},useProps:function(e,t){var n=t.onKeyDown,r=t.onKeyUp,o=lr(t,["onKeyDown","onKeyUp"]),a=Object(_.useState)(!1),l=a[0],c=a[1],i=io(n),s=io(r),u=Object(_.useCallback)((function(t){var n;if(null===(n=i.current)||void 0===n||n.call(i,t),!t.defaultPrevented&&!e.disabled&&!t.metaKey&&so(t)){var r=e.unstable_clickOnEnter&&"Enter"===t.key,o=e.unstable_clickOnSpace&&" "===t.key;if(r||o){if(function(e){var t=e.currentTarget;return!!e.isTrusted&&(bo(t)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"A"===t.tagName||"SELECT"===t.tagName)}(t))return;t.preventDefault(),r?t.currentTarget.click():o&&c(!0)}}}),[e.disabled,e.unstable_clickOnEnter,e.unstable_clickOnSpace]),d=Object(_.useCallback)((function(t){var n;if(null===(n=s.current)||void 0===n||n.call(s,t),!t.defaultPrevented&&!e.disabled&&!t.metaKey){var r=e.unstable_clickOnSpace&&" "===t.key;l&&r&&(c(!1),t.currentTarget.click())}}),[e.disabled,e.unstable_clickOnSpace,l]);return ar({"data-active":l||void 0,onKeyDown:u,onKeyUp:d},o)}});ro({as:"button",memo:!0,useHook:zo});function qo(e){try{var t=e instanceof HTMLInputElement&&null!==e.selectionStart,n="TEXTAREA"===e.tagName,r="true"===e.contentEditable;return t||n||r||!1}catch(o){return!1}}function Ko(e){var t=mo(e);if(!t)return!1;if(t===e)return!0;var n=t.getAttribute("aria-activedescendant");return!!n&&n===e.id}function Go(e,t){if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){var n,r=Object.getPrototypeOf(e),o=null===(n=Object.getOwnPropertyDescriptor(r,"value"))||void 0===n?void 0:n.set;o&&(o.call(e,t),function(e,t,n){e.dispatchEvent(xo(e,t,n))}(e,"input",{bubbles:!0}))}}function Zo(e){return e.querySelector("[data-composite-item-widget]")}var Yo=ro({as:"button",memo:!0,useHook:ao({name:"CompositeItem",compose:[zo,Vo],keys:Ao,propsAreEqual:function(e,t){if(!t.id||e.id!==t.id)return zo.unstable_propsAreEqual(e,t);var n=e.currentId,r=e.unstable_moves,o=lr(e,["currentId","unstable_moves"]),a=t.currentId,l=t.unstable_moves,c=lr(t,["currentId","unstable_moves"]);if(a!==n){if(t.id===a||t.id===n)return!1}else if(r!==l)return!1;return zo.unstable_propsAreEqual(o,c)},useOptions:function(e){return ar(ar({},e),{},{id:e.id,currentId:wr(e),unstable_clickOnSpace:!e.unstable_hasActiveWidget&&e.unstable_clickOnSpace})},useProps:function(e,t){var n,r=t.ref,o=t.tabIndex,a=void 0===o?0:o,l=t.onMouseDown,c=t.onFocus,i=t.onBlurCapture,s=t.onKeyDown,u=t.onClick,d=lr(t,["ref","tabIndex","onMouseDown","onFocus","onBlurCapture","onKeyDown","onClick"]),f=Object(_.useRef)(null),b=e.id,m=e.disabled&&!e.focusable,p=e.currentId===b,g=io(p),O=Object(_.useRef)(!1),v=function(e){return Object(_.useMemo)((function(){var t;return null===(t=e.items)||void 0===t?void 0:t.find((function(t){return e.id&&t.id===e.id}))}),[e.items,e.id])}(e),w=io(l),h=io(c),j=io(i),y=io(s),C=io(u),E=!e.unstable_virtual&&!e.unstable_hasActiveWidget&&p||!(null!==(n=e.items)&&void 0!==n&&n.length);Object(_.useEffect)((function(){var t;if(b)return null===(t=e.registerItem)||void 0===t||t.call(e,{id:b,ref:f,disabled:!!m}),function(){var t;null===(t=e.unregisterItem)||void 0===t||t.call(e,b)}}),[b,m,e.registerItem,e.unregisterItem]),Object(_.useEffect)((function(){var t=f.current;t&&e.unstable_moves&&g.current&&Ro(t)}),[e.unstable_moves]);var k=Object(_.useCallback)((function(e){var t;null===(t=w.current)||void 0===t||t.call(w,e),Do(e.currentTarget,!0)}),[]),x=Object(_.useCallback)((function(t){var n,r,o=!!t.currentTarget.userFocus;if(Do(t.currentTarget,!1),null===(n=h.current)||void 0===n||n.call(h,t),!t.defaultPrevented&&!Oo(t)&&b&&!function(e,t){if(so(e))return!1;for(var n,r=ir(t);!(n=r()).done;){if(n.value.ref.current===e.target)return!0}return!1}(t,e.items)&&(null===(r=e.setCurrentId)||void 0===r||r.call(e,b),o&&e.unstable_virtual&&e.baseId&&so(t))){var a=sr(t.target).getElementById(e.baseId);a&&(O.current=!0,function(e,t){var n=void 0===t?{}:t,r=n.preventScroll,o=n.isActive,a=void 0===o?Ko:o;a(e)||(e.focus({preventScroll:r}),a(e)||requestAnimationFrame((function(){e.focus({preventScroll:r})})))}(a))}}),[b,e.items,e.setCurrentId,e.unstable_virtual,e.baseId]),S=Object(_.useCallback)((function(t){var n;null===(n=j.current)||void 0===n||n.call(j,t),t.defaultPrevented||e.unstable_virtual&&O.current&&(O.current=!1,t.preventDefault(),t.stopPropagation())}),[e.unstable_virtual]),T=Object(_.useCallback)((function(t){var n;if(so(t)){var r="horizontal"!==e.orientation,o="vertical"!==e.orientation,a=!(null==v||!v.groupId),l={ArrowUp:(a||r)&&e.up,ArrowRight:(a||o)&&e.next,ArrowDown:(a||r)&&e.down,ArrowLeft:(a||o)&&e.previous,Home:function(){var n,r;!a||t.ctrlKey?null===(n=e.first)||void 0===n||n.call(e):null===(r=e.previous)||void 0===r||r.call(e,!0)},End:function(){var n,r;!a||t.ctrlKey?null===(n=e.last)||void 0===n||n.call(e):null===(r=e.next)||void 0===r||r.call(e,!0)},PageUp:function(){var t,n;a?null===(t=e.up)||void 0===t||t.call(e,!0):null===(n=e.first)||void 0===n||n.call(e)},PageDown:function(){var t,n;a?null===(t=e.down)||void 0===t||t.call(e,!0):null===(n=e.last)||void 0===n||n.call(e)}}[t.key];if(l)return t.preventDefault(),void l();if(null===(n=y.current)||void 0===n||n.call(y,t),!t.defaultPrevented)if(1===t.key.length&&" "!==t.key){var c=Zo(t.currentTarget);c&&qo(c)&&(c.focus(),Go(c,""))}else if("Delete"===t.key||"Backspace"===t.key){var i=Zo(t.currentTarget);i&&qo(i)&&(t.preventDefault(),Go(i,""))}}}),[e.orientation,v,e.up,e.next,e.down,e.previous,e.first,e.last]),I=Object(_.useCallback)((function(e){var t;if(null===(t=C.current)||void 0===t||t.call(C,e),!e.defaultPrevented){var n=Zo(e.currentTarget);n&&!go(n)&&n.focus()}}),[]);return ar({ref:co(f,r),id:b,tabIndex:E?a:-1,"aria-selected":!(!e.unstable_virtual||!p)||void 0,onMouseDown:k,onFocus:x,onBlurCapture:S,onKeyDown:T,onClick:I},d)}})}),Qo=function(e){var t=e.isActive,n=e.column,r=e.onSelect,o=e.row,l=Se()(e,["isActive","column","onSelect","row"]),c="".concat(o.label," ").concat(n.label),i=Object(_.useCallback)((function(){r(o.value,n.value)}),[r,o.value,n.value]),s=T()("crowdsignal-forms__block-alignment-control-button",{"is-active":t});return Object(a.createElement)(E.Tooltip,{text:c},Object(a.createElement)(Yo,w()({className:s,role:"gridcell",onFocus:i},l),Object(a.createElement)(E.VisuallyHidden,null,c)))},Jo=function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)};var Xo=function e(t){var n=t.columns,r=t.onChange,o=t.rows,c=t.value,i=Object(x.useInstanceId)(e,"block-alignment-control-grid"),s=Mr({baseId:i,currentId:Jo(i,c.row,c.column),rtl:Object(l.isRTL)()});return Object(_.useEffect)((function(){s.setCurrentId(Jo(i,c.row,c.column))}),[c,s.setCurrentId]),Object(a.createElement)(Ho,w()({},s,{className:"crowdsignal-forms__block-alignment-control-grid"}),Object(b.map)(o,(function(e){return Object(a.createElement)(Uo,w()({},s,{key:"".concat(i,"-").concat(e.value),role:"row",className:"crowdsignal-forms__block-alignment-control-row"}),Object(b.map)(n,(function(t){var n=Jo(i,e.value,t.value),o=s.currentId===Jo(i,e.value,t.value);return Object(a.createElement)(Qo,w()({},s,{id:n,key:n,isActive:o,row:e,column:t,onSelect:r,tabIndex:o?0:-1}))})))})))},$o=function(e){var t=e.rows,n=e.columns,r=e.value,o=0,l=0;return Object(a.createElement)("div",{className:"crowdsignal-forms__block-alignment-control-icon"},Object(b.map)(t,(function(e){return Object(a.createElement)("div",{key:l++,className:"crowdsignal-forms__block-alignment-control-icon-row"},Object(b.map)(n,(function(t){var n=e.value===r.row&&t.value===r.column,l=T()("crowdsignal-forms__block-alignment-control-icon-dot",{"is-active":n});return Object(a.createElement)("span",{key:o++,className:l})})))})))},ea={"2x2":{rows:[{label:Object(l.__)("Top","crowdsignal-forms"),value:"top"},{label:Object(l.__)("Bottom","crowdsignal-forms"),value:"bottom"}],columns:[{label:Object(l.__)("Left","crowdsignal-forms"),value:"left"},{label:Object(l.__)("Right","crowdsignal-forms"),value:"right"}]},"2x3":{rows:[{label:Object(l.__)("Top","crowdsignal-forms"),value:"top"},{label:Object(l.__)("Center","crowdsignal-forms"),value:"center"},{label:Object(l.__)("Bottom","crowdsignal-forms"),value:"bottom"}],columns:[{label:Object(l.__)("Left","crowdsignal-forms"),value:"left"},{label:Object(l.__)("Right","crowdsignal-forms"),value:"right"}]}},ta=function(e){var t=e.closeOnSelectionChanged,n=e.disabled,r=e.label,o=e.onChange,l=e.rows,c=e.columns,i=e.value,s=Object(a.createElement)($o,{rows:l,columns:c,value:i});return Object(a.createElement)(E.Dropdown,{className:"crowdsignal-forms__block-alignment-control",popoverProps:{className:"crowdsignal-forms__block-alignment-control-popover"},renderToggle:function(e){var t=e.onToggle,o=e.isOpen;return Object(a.createElement)(E.Tooltip,{text:r},Object(a.createElement)(E.ToolbarButton,{showTooltip:!0,"aria-haspopup":"true","aria-expanded":o,disabled:n,icon:s,onClick:t,onKeyDown:function(e){o||e.keyCode!==nr.DOWN||(e.preventDefault(),e.stopPropagation(),t())}}))},renderContent:function(e){var n=e.onClose;return Object(a.createElement)(Xo,{onChange:function(e,r){o(e,r),!t||i.row===e&&i.column===r||n()},rows:l,columns:c,value:i})}})};ta.defaultProps={closeOnSelectionChanged:!1,label:Object(l.__)("Change block position","crowdsignal-forms"),onChange:b.noop};var na=ta,ra=function(e){var t=e.attributes,n=e.currentView,r=e.onViewChange,o=e.setAttributes,c=function(e){return function(){return r(e)}};return Object(a.createElement)(C.BlockControls,null,Object(a.createElement)(E.ToolbarGroup,{label:Object(l.__)("Current view","crowdsignal-forms")},Object(a.createElement)(E.ToolbarButton,{className:"crowdsignal-forms-feedback__toolbar-toggle",isActive:n===zn,label:Object(l.__)("Question","crowdsignal-forms"),onClick:c(zn)},Object(l.__)("Question","crowdsignal-forms")),Object(a.createElement)(E.ToolbarButton,{className:"crowdsignal-forms-feedback__toolbar-toggle",isActive:n===qn,label:Object(l.__)("Submit","crowdsignal-forms"),onClick:c(qn)},Object(l.__)("Submit","crowdsignal-forms"))),Object(a.createElement)(E.ToolbarGroup,null,Object(a.createElement)(na,w()({closeOnSelectionChanged:!0,onChange:function(e,t){return o({x:t,y:e})},label:Object(l.__)("Change button position","crowdsignal-forms"),value:{row:t.y,column:t.x}},ea["2x3"]))))},oa=function(){return!!window.wp.widgets},aa=function(e){return Rn(Q()({path:Object(b.trimEnd)("/crowdsignal-forms/v1/feedback/".concat(e.surveyId||""),"/"),method:"POST",data:e}))};function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ca=Object(x.compose)([Object(f.withSelect)((function(e){var t=e("core/editor").getPermalink();t||(t=e("core").getSite()&&e("core").getSite().url);var n=e("core/edit-post");return{isFullscreen:"isFeatureActive"in n?n.isFeatureActive("fullscreenMode"):n.getPreference("fullscreenMode"),isInserterActive:n.isInserterOpened(),isListViewActive:n.isListViewOpened(),isSidebarActive:n.isEditorSidebarOpened(),sourceLink:t}})),Le])((function(e){var t=Object(_.useState)(zn),n=j()(t,2),r=n[0],o=n[1],c=Object(_.useState)(null),i=j()(c,2),s=i[0],u=i[1],m=Object(_.useState)({}),p=j()(m,2),g=p[0],O=p[1],v=e.attributes,h=e.isFullscreen,y=e.isInserterActive,k=e.isListViewActive,x=e.isSidebarActive,S=e.fallbackStyles,I=e.isSelected,P=e.setAttributes,L=e.clientId,N=e.sourceLink,R=e.setPosition,B=v.isExample,F=v.feedbackPlaceholder,M=v.emailPlaceholder,H=v.surveyId,V=v.title,W=v.header,U=v.emailResponses,z=v.triggerLabel,q=Object(_.useState)({}),K=j()(q,2),G=K[0],Z=K[1],Y=Object(_.useState)(!1),Q=j()(Y,2),J=Q[0],X=Q[1],$=Object(_.useMemo)(oa,[]),ee=Object(_.useRef)(null),te=Object(_.useRef)(null),ne=Object(_.useRef)(null),re=An(function(){var e=D()(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(f.dispatch)("core/editor").lockPostSaving(L),e.prev=1,e.next=4,aa({feedbackPlaceholder:t.feedbackPlaceholder,emailPlaceholder:t.emailPlaceholder,sourceLink:t.sourceLink,surveyId:t.surveyId,title:t.title||t.header,emailResponses:t.emailResponses});case 4:n=e.sent,t.surveyId||P({surveyId:n.surveyId});case 6:return e.prev=6,Object(f.dispatch)("core/editor").unlockPostSaving(L),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t){return e.apply(this,arguments)}}(),{feedbackPlaceholder:F,emailPlaceholder:M,sourceLink:N,surveyId:H,title:V,header:W,emailResponses:U}),oe=re.error,ae=re.save;Object(_.useEffect)((function(){B||v.surveyId||(ae(),P({isWidget:$}))}),[]),Object(_.useEffect)((function(){I||o(zn)}),[I]),Object(_.useEffect)((function(){window.requestAnimationFrame((function(){return X(!J)}))}),[y,k,x]),Object(_.useLayoutEffect)((function(){if(!B&&te.current&&!$){R(function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l={left:Object(b.isObject)(o)?o.left:o,right:Object(b.isObject)(o)?o.right:o,top:Object(b.isObject)(o)?o.top:o,bottom:Object(b.isObject)(o)?o.bottom:o};return a&&(l=Xn(l,a.getBoundingClientRect())),Qn({},$n(e,0,l),{},er(t,r,l))}(v.x,v.y,ee.current.offsetWidth,ee.current.offsetHeight,{left:"center"===v.y?10:20,right:"center"===v.y?10:20,top:I?80:20,bottom:20},document.getElementsByClassName("interface-interface-skeleton__content")[0]),te.current.offsetWidth,te.current.offsetHeight);var e=(Object(b.max)([te.current.offsetWidth,ee.current.offsetHeight])-te.current.offsetWidth)/2;Z({"--crowdsignal-forms-feedback__toggle-padding":"".concat(e,"px"),minHeight:"center"===v.y?te.current.offsetWidth:0,marginLeft:"center"===v.y&&"left"===v.x?te.current.offsetHeight-te.current.offsetWidth-10:0,marginRight:"center"===v.y&&"right"===v.x?te.current.offsetHeight-te.current.offsetWidth-10:0})}}),[J,h,I,R,v.x,v.y,te.current,ee.current,z,$]),Object(_.useLayoutEffect)((function(){ne.current&&u(ne.current.offsetHeight)}),[v.header,ne.current,I]),Object(_.useLayoutEffect)((function(){if(!oa)if(te.current&&te.current.ownerDocument!==document)O({bottom:0,left:0,right:0,top:0});else{var e=document.getElementsByClassName("interface-interface-skeleton__content")[0].getBoundingClientRect();O({bottom:window.innerHeight-(e.top+e.height),left:e.left,right:window.innerWidth-(e.left+e.width),top:e.top})}}),[J,h,I,te.current]);var le=function(e){return function(t){return P(d()({},e,t))}},ce=ie().accountInfo,se=Object(b.get)(ce,["signalCount","shouldDisplay"]),ue=se&&Object(b.get)(ce,["signalCount","count"])>=Object(b.get)(ce,["signalCount","userLimit"]),de=Object(b.get)(ce,["account","email"]),fe=T()("crowdsignal-forms-feedback","align-".concat(v.x),"vertical-align-".concat(v.y),{"no-shadow":v.hideTriggerShadow,"is-active":I,"is-vertical":"center"===v.y,"is-widget":$}),me=$&&te.current&&te.current.offsetHeight?"".concat(te.current&&te.current.offsetHeight,"px"):null,pe=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},function(e,t){return Object(b.mapKeys)({backgroundColor:e.backgroundColor||"#ffffff",buttonColor:e.buttonColor||t.accentColor,buttonTextColor:e.buttonTextColor||t.textColorInverted,textColor:e.textColor||t.textColor,textSize:t.textSize,triggerBackgroundColor:e.triggerBackgroundColor||t.accentColor,triggerTextColor:e.triggerTextColor||t.textColorInverted},(function(e,t){return"--crowdsignal-forms-".concat(Object(b.kebabCase)(t))}))}(v,S),{},G,{"--crowdsignal-forms-trigger-height":me}),ge={height:s},Oe=Kn.CLOSED===v.status||Kn.CLOSED_AFTER===v.status&&null!==v.closedAfterDateTime&&(new Date).toISOString()>v.closedAfterDateTime,ve=Object(b.get)(ce,"capabilities",[]).includes("hide-branding");return Object(a.createElement)(lt,{blockName:Object(l.__)("Feedback Button","crowdsignal-forms"),blockIcon:Object(a.createElement)(Un,null)},Object(a.createElement)(ra,w()({currentView:r,onViewChange:o},e)),Object(a.createElement)(tr,w()({shouldPromote:se,signalWarning:ue,email:de},e)),$&&Object(a.createElement)(a.Fragment,null,!B&&!$&&ue&&Object(a.createElement)(pt,null),!B&&!$&&oe&&Object(a.createElement)(Hn,{retryHandler:ae}),Object(a.createElement)(mt,{icon:"warning",status:"warn",isDismissible:!1},Object(l.__)("This widget will appear in a fixed position as selected, in a corner or at an edge.","crowdsignal-forms"))),Object(a.createElement)("div",{ref:ee,className:fe,style:pe},Object(a.createElement)("div",{className:"crowdsignal-forms-feedback__trigger-preview"},Object(a.createElement)("div",{className:"wp-block-button crowdsignal-forms-feedback__trigger-wrapper"},Object(a.createElement)(C.RichText,{ref:te,className:"wp-block-button__link crowdsignal-forms-feedback__trigger",onChange:le("triggerLabel"),value:z,allowedFormats:[],multiline:!1,disableLineBreaks:!0}))),Object(a.createElement)("div",{className:"crowdsignal-forms-feedback__popover-preview"},(B||I||$)&&Object(a.createElement)(a.Fragment,null,!$&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{"aria-modal":"true",role:"dialog",className:"crowdsignal-forms-feedback__popover-overlay",onClick:function(){Object(f.dispatch)("core/block-editor").clearSelectedBlock(),te.current.parentElement.parentElement.parentElement.blur()},style:g})),!B&&!$&&ue&&Object(a.createElement)(pt,null),!B&&!$&&oe&&Object(a.createElement)(Hn,{retryHandler:ae}),r===zn&&Object(a.createElement)("div",{ref:ne,className:"crowdsignal-forms-feedback__popover"},Object(a.createElement)(C.RichText,{tagName:"h3",className:"crowdsignal-forms-feedback__header",onChange:le("header"),value:v.header,allowedFormats:[]}),Object(a.createElement)(E.TextareaControl,{className:"crowdsignal-forms-feedback__input",rows:6,onChange:le("feedbackPlaceholder"),value:v.feedbackPlaceholder}),Object(a.createElement)(E.TextControl,{className:"crowdsignal-forms-feedback__input",onChange:le("emailPlaceholder"),value:v.emailPlaceholder}),Object(a.createElement)("div",{className:"wp-block-button crowdsignal-forms-feedback__button-wrapper"},Object(a.createElement)(C.RichText,{className:"wp-block-button__link crowdsignal-forms-feedback__feedback-button",onChange:le("submitButtonLabel"),value:v.submitButtonLabel,allowedFormats:[],multiline:!1,disableLineBreaks:!0})),!ve&&Object(a.createElement)(be,{editing:!0,trackRef:"cs-forms-feedback",message:Object(l.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms")})),r===qn&&Object(a.createElement)("div",{className:"crowdsignal-forms-feedback__popover",style:ge},Object(a.createElement)(C.RichText,{tagName:"h3",className:"crowdsignal-forms-feedback__header",onChange:le("submitText"),value:v.submitText,allowedFormats:[]}),!ve&&Object(a.createElement)(be,{editing:!0,trackRef:"cs-forms-feedback",message:Object(l.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms")})),Oe&&Object(a.createElement)("div",{className:"crowdsignal-forms-feedback__closed-notice"},Object(l.__)("This Feedback Form is Closed","crowdsignal-forms"))))),e.renderStyleProbe())})),ia={title:Object(l.__)("Feedback Button","crowdsignal-forms"),description:Object(l.__)("Add an always visible button that allows your audience to share feedback anytime.","crowdsignal-forms"),category:"crowdsignal-forms",keywords:["crowdsignal",Object(l.__)("feedback","crowdsignal-forms"),Object(l.__)("floating","crowdsignal-forms"),Object(l.__)("contact","crowdsignal-forms"),Object(l.__)("call to action","crowdsignal-forms"),Object(l.__)("cta","crowdsignal-forms"),Object(l.__)("button","crowdsignal-forms"),Object(l.__)("subscribe","crowdsignal-forms"),Object(l.__)("form","crowdsignal-forms"),Object(l.__)("email","crowdsignal-forms"),Object(l.__)("message","crowdsignal-forms")],icon:Object(a.createElement)(Un,null),edit:ca,supports:{multiple:!1,html:!1,reusable:!1},attributes:Zn,example:{attributes:{isExample:!0}}};function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var da={},fa=["crowdsignal-forms/feedback"];Object(r.registerBlockType)("crowdsignal-forms/poll",wt),Object(r.registerBlockType)("crowdsignal-forms/vote",At),Object(r.registerBlockType)("crowdsignal-forms/vote-item",mn),Object(r.registerBlockType)("crowdsignal-forms/applause",Sn),Object(r.registerBlockType)("crowdsignal-forms/nps",Wn),Object(r.registerBlockType)("crowdsignal-forms/feedback",ia),Object(o.addFilter)("editor.BlockListBlock","crowdsignal-forms/with-fixed-position",(function(e){return function(t){if(!Object(b.includes)(fa,t.name))return Object(a.createElement)(e,t);var n=Object(_.useState)({}),r=j()(n,2),o=r[0],l=r[1];da[t.clientId]=l,Object(_.useEffect)((function(){return function(){da[t.clientId]=null}}),[da,t.clientId]);var c=ua({},Object(b.get)(t,["wrapperProps","style"],{}),{},o,{position:Object(b.isEmpty)(o)?null:"fixed",margin:0}),i=ua({},t.wrapperProps,{style:c});return Object(a.createElement)(e,w()({},t,{wrapperProps:i}))}}),1),Object(o.addFilter)("editor.BlockEdit","crowdsignal-forms/with-fixed-position-control",(function(e){return function(t){if(!Object(b.includes)(fa,t.name))return Object(a.createElement)(e,t);var n=Object(_.useCallback)((function(e){da[t.clientId](Object(b.pick)(e,["top","left","right","bottom"]))}),[t.clientId]);return Object(a.createElement)(e,w()({},t,{setPosition:n}))}}))}]));