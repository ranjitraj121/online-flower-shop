"use strict";function latepoint_is_timeframe_in_periods(t,e,a,n){for(var o=arguments.length>3&&void 0!==n&&n,s=0;s<a.length;s++){var i=0,l=0,r=0,d=0,p=a[s].split(":");if(2==p.length?(i=p[0],l=p[1]):(r=p[2],d=p[3],i=parseFloat(p[0])-parseFloat(r),l=parseFloat(p[1])+parseFloat(d)),o){if(latepoint_is_period_inside_another(t,e,i,l))return!0}else if(latepoint_is_period_overlapping(t,e,i,l))return!0}return!1}function latepoint_is_period_overlapping(t,e,a,n){return t<n&&a<e}function latepoint_is_period_inside_another(t,e,a,n){return t>=a&&e<=n}function latepoint_minutes_to_hours_preferably(t){var e=latepoint_is_army_clock(),a=Math.floor(t/60);!e&&a>12&&(a-=12);var n=t%60;return n>0&&(a=a+":"+n),a}function latepoint_minutes_to_hours(t){var e=latepoint_is_army_clock(),a=Math.floor(t/60);return!e&&a>12&&(a-=12),a}function latepoint_am_or_pm(t){return latepoint_is_army_clock()?"":t<720?"am":"pm"}function latepoint_hours_and_minutes_to_minutes(t,e){var a=t.split(":"),n=a[0],o=a[1];return"pm"==e&&n<12&&(n=parseInt(n)+12),"am"==e&&12==n&&(n=0),o=parseInt(o)+60*n}function latepoint_get_time_system(){return latepoint_helper.time_system}function latepoint_is_army_clock(){return"24"==latepoint_get_time_system()}function latepoint_minutes_to_hours_and_minutes(t,e){var a=latepoint_is_army_clock(),n=arguments.length>1&&void 0!==e?e:"%02d:%02d",o=Math.floor(t/60);!a&&o>12&&(o-=12);var s=t%60;return sprintf(n,o,s)}function latepoint_mask_timefield(t){jQuery().inputmask&&t.inputmask({mask:"99:99",placeholder:"HH:MM"})}function latepoint_mask_phone(t){latepoint_is_phone_masking_enabled()&&jQuery().inputmask&&t.inputmask(latepoint_get_phone_format())}function latepoint_get_phone_format(){return latepoint_helper.phone_format}function latepoint_is_phone_masking_enabled(){return"yes"==latepoint_helper.enable_phone_masking}function latepoint_show_booking_end_time(){return"yes"==latepoint_helper.show_booking_end_time}function latepoint_init_form_masks(){latepoint_is_phone_masking_enabled()&&latepoint_mask_phone(jQuery(".os-mask-phone"))}function latepoint_get_paypal_payment_amount(t){var e,a;return"deposit"==t.find('input[name="booking[payment_portion]"]').val()?t.find(".lp-paypal-btn-trigger").data("deposit-amount"):t.find(".lp-paypal-btn-trigger").data("full-amount")}function latepoint_add_notification(t,e){var a=arguments.length>1&&void 0!==e?e:"success",n=jQuery("body").find(".os-notifications");n.length||(jQuery("body").append('<div class="os-notifications"></div>'),n=jQuery("body").find(".os-notifications")),n.find(".item").length>0&&n.find(".item:first-child").remove(),n.append('<div class="item item-type-'+a+'">'+t+'<span class="os-notification-close"><i class="latepoint-icon latepoint-icon-x"></i></span></div>')}function latepoint_generate_form_message_html(t,e){var a='<div class="os-form-message-w status-'+e+'"><ul>';return Array.isArray(t)?t.forEach((function(t){a+="<li>"+t+"</li>"})):a+="<li>"+t+"</li>",a+="</ul></div>"}function latepoint_clear_form_messages(t){t.find(".os-form-message-w").remove()}function latepoint_show_data_in_lightbox(t,e){var a=arguments.length>1&&void 0!==e?e:"";jQuery(".latepoint-lightbox-w").remove();var n="latepoint-lightbox-w latepoint-w ";a&&(n+=a),jQuery("body").append('<div class="'+n+'"><div class="latepoint-lightbox-i">'+t+'<a href="#" class="latepoint-lightbox-close"><i class="latepoint-icon latepoint-icon-x"></i></a></div><div class="latepoint-lightbox-shadow"></div></div>'),jQuery("body").addClass("latepoint-lightbox-active")}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function latepoint_init_payment_method_actions(t,e){var a,n=[],o="yes"==t.data("next-submit-is-last");t.trigger("latepoint:initPaymentMethod",[{payment_method:e,callbacks_list:n,is_last_step:o}]),t.removeClass("step-content-loaded").addClass("step-content-loading"),(a=jQuery).when.apply(a,_toConsumableArray(n.map((function(t){return t.action()})))).done((function(){t.removeClass("step-content-loading").addClass("step-content-loaded").find('.lp-payment-method-content[data-payment-method="'+e+'"]').show()}))}function latepoint_show_next_btn(t){t.find(".latepoint-next-btn").removeClass("disabled"),t.removeClass("hidden-buttons")}function clear_step_services(t){latepoint_update_summary_field(t,"service",""),clear_sub_step_attendies(t)}function clear_sub_step_attendies(t){t.find(".latepoint_total_attendies").val(1),latepoint_update_summary_field(t,"total-attendies",""),clear_sub_step_duration(t)}function clear_sub_step_duration(t){t.find(".latepoint_duration").val(""),latepoint_update_summary_field(t,"duration","")}function clear_step_service_extras(t){latepoint_update_summary_field(t,"service-extras","")}function clear_step_locations(t){latepoint_update_summary_field(t,"location","")}function clear_step_agents(t){latepoint_update_summary_field(t,"agent","")}function clear_step_datepicker(t){latepoint_update_summary_field(t,"time",""),latepoint_update_summary_field(t,"date","")}function latepoint_hide_next_btn(t){t.find(".latepoint-next-btn").addClass("disabled"),t.find(".latepoint-prev-btn.disabled").length&&t.addClass("hidden-buttons")}function latepoint_show_prev_btn(t){t.find(".latepoint-prev-btn").removeClass("disabled"),t.removeClass("hidden-buttons")}function latepoint_hide_prev_btn(t){t.find(".latepoint-prev-btn").addClass("disabled"),t.find(".latepoint-next-btn.disabled").length&&t.addClass("hidden-buttons")}function latepoint_show_capacity_selector(t){var e=t.closest(".latepoint-booking-form-element"),a=t.data("max-capacity"),n=t.data("min-capacity");e.find(".sta-sub-label span").text(a),e.find(".step-services-w").removeClass("selecting-service-duration"),e.find(".total-attendies-selector-w").data("max-capacity",a),e.find(".total-attendies-selector-w").data("min-capacity",n),t.closest(".step-services-w").addClass("selecting-total-attendies"),e.find(".total-attendies-selector-input").val(n),latepoint_show_prev_btn(e),latepoint_show_next_btn(e)}function latepoint_show_durations(t){var e=t.closest(".latepoint-booking-form-element");t.closest(".step-services-w").addClass("selecting-service-duration"),latepoint_show_prev_btn(e),latepoint_hide_next_btn(e)}function latepoint_apply_coupon(t){var e=t.closest(".latepoint-booking-form-element"),a=t;a.closest(".coupon-code-input-w").addClass("os-loading");var n=e.find(".latepoint-form").serialize(),o={action:"latepoint_route_call",route_name:t.data("route"),params:n,layout:"none",return_format:"json"};jQuery.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(n){a.closest(".coupon-code-input-w").removeClass("os-loading"),"success"===n.status?(e.find('input[name="booking[coupon_code]"]').val(a.val()),latepoint_show_message_inside_element(n.message,e.find(".latepoint-body"),"success"),e.find('.step-payment-w input[name="booking[payment_method]"]').val(""),e.find('input[name="booking[payment_token]"]').val(""),e.find('input[name="booking[payment_portion]"]').val(""),latepoint_reload_step(e)):latepoint_show_message_inside_element(n.message,e.find(".latepoint-body"),"error")}})}function latepoint_remove_coupon(t){t.closest(".applied-coupon-code").fadeOut();var e=t.closest(".latepoint-booking-form-element");e.find('input[name="booking[coupon_code]"]').val(""),latepoint_reload_step(e)}function latepoint_reload_step(t,e){var a=arguments.length>1&&void 0!==e&&e;return a&&(t.find(".latepoint_current_step").val(a),t.removeClass((function(t,e){return(e.match(/(^|\s)current-step-\S+/g)||[]).join(" ")})).addClass("current-step-"+a),t.find('.latepoint-step-content[data-step-name="'+a+'"]')&&(t.find('.latepoint-step-content[data-step-name="'+a+'"]').nextAll(".latepoint-step-content").remove(),t.find('.latepoint-step-content[data-step-name="'+a+'"]').remove())),t.find(".latepoint_step_direction").val("specific"),t.find(".latepoint-form").submit(),!1}function latepoint_get_payment_sub_step(t,e,a){var n=arguments.length>2&&void 0!==a&&a,o=n?-1:1,s=[];t.find(".step-payment-w .lp-payment-times-w").length&&s.push("payment-times"),t.find(".step-payment-w .lp-payment-methods-w").length&&s.push("payment-methods"),t.find(".step-payment-w .lp-payment-portions-w").length&&s.push("payment-portions");var i=t.find('input[name="booking[payment_method]"]').val();i&&s.push("payment-method-content");var l=s.indexOf(e)+o;if(l>=0&&l<s.length){var r=s[l];return"payment-method-content"==r&&(latepoint_init_payment_method_actions(t,i),t.find('.lp-payment-method-content[data-payment-method="'+i+'"]').length||(r=e)),r}return e}function latepoint_reset_password_from_booking_init(){jQuery(".os-step-existing-customer-login-w").hide(),jQuery(".os-password-reset-form-holder").on("click",".password-reset-back-to-login",(function(){return jQuery(".os-password-reset-form-holder").html(""),jQuery(".os-step-existing-customer-login-w").show(),!1}))}function latepoint_update_summary_field(t,e,a){var n=arguments.length>2&&void 0!==a?a:"",o=t.closest(".latepoint-with-summary");o.length&&((n=!!n&&String(n).trim())?(t.find(".os-summary-value-"+e).html(n).closest(".os-summary-line").addClass("os-has-value"),o.hasClass("latepoint-summary-is-open")?t.find(".os-summary-line.os-has-value").slideDown(150):t.find(".os-summary-line.os-has-value").fadeIn(200),o.addClass("latepoint-summary-is-open")):t.find(".os-summary-value-"+e).text("").closest(".os-summary-line").slideUp(150).removeClass("os-has-value"))}function latepoint_password_changed_show_login(t){jQuery(".os-step-existing-customer-login-w").show(),jQuery(".os-password-reset-form-holder").html(""),latepoint_show_message_inside_element(t.message,jQuery(".os-step-existing-customer-login-w"),"success")}function latepoint_hide_message_inside_element(t){var e=arguments.length>0&&void 0!==t?t:jQuery(".latepoint-body");e.length&&e.find(".latepoint-message").length&&e.find(".latepoint-message").remove()}function latepoint_show_message_inside_element(t,e,a){var n=arguments.length>1&&void 0!==e?e:jQuery(".latepoint-body"),o=arguments.length>2&&void 0!==a?a:"error";n.length&&(n.find(".latepoint-message").length?n.find(".latepoint-message").removeClass("latepoint-message-success").removeClass("latepoint-message-error").addClass("latepoint-message-"+o).html(t).show():n.prepend('<div class="latepoint-message latepoint-message-'+o+'">'+t+"</div>"))}function latepoint_add_action(t,e,a){var n=arguments.length>2&&void 0!==a?a:10;return t.push({priority:n,action:e}),t.sort((function(t,e){return t.priority-e.priority})),t}jQuery(document).ready((function($){$(".latepoint").on("click","button[data-os-action], a[data-os-action], div[data-os-action], span[data-os-action]",(function(t){var e=$(this);if(e.data("os-prompt")&&!confirm(e.data("os-prompt")))return!1;var a=$(this).data("os-params");$(this).data("os-source-of-params")&&(a=$($(this).data("os-source-of-params")).find("select, input, textarea").serialize());var n=e.data("os-return-format")?e.data("os-return-format"):"json",o={action:"latepoint_route_call",route_name:$(this).data("os-action"),params:a,return_format:n};return e.addClass("os-loading"),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function t(a){if("success"===a.status){if("lightbox"==e.data("os-output-target"))latepoint_show_data_in_lightbox(a.message,e.data("os-lightbox-classes"));else if("side-panel"==e.data("os-output-target"))$(".latepoint-side-panel-w").remove(),$("body").append('<div class="latepoint-side-panel-w"><div class="latepoint-side-panel-i">'+a.message+'</div><div class="latepoint-side-panel-shadow"></div></div>');else{if("reload"==e.data("os-success-action"))return latepoint_add_notification(a.message),void location.reload();if("redirect"==e.data("os-success-action"))return void(e.data("os-redirect-to")?(latepoint_add_notification(a.message),window.location.replace(e.data("os-redirect-to"))):window.location.replace(a.message));e.data("os-output-target")&&$(e.data("os-output-target")).length?"append"==e.data("os-output-target-do")?$(e.data("os-output-target")).append(a.message):$(e.data("os-output-target")).html(a.message):"before"==e.data("os-before-after")?e.before(a.message):"before"==e.data("os-before-after")?e.after(a.message):latepoint_add_notification(a.message)}if(e.data("os-after-call")){var n=e.data("os-after-call");e.data("os-pass-this")?window[n](e):e.data("os-pass-response")?window[n](a):window[n]()}e.removeClass("os-loading")}else e.removeClass("os-loading"),e.data("os-output-target")&&$(e.data("os-output-target")).length?$(e.data("os-output-target")).prepend(latepoint_generate_form_message_html(a.message,"error")):alert(a.message)}}),!1})),$(".latepoint").on("click",'form[data-os-action] button[type="submit"]',(function(t){$(this).addClass("os-loading")})),$(".latepoint").on("submit","form[data-os-action]",(function(t){t.preventDefault();var e=$(this),a=e.serialize(),n={action:"latepoint_route_call",route_name:$(this).data("os-action"),params:a,return_format:"json"};return e.find('button[type="submit"]').addClass("os-loading"),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function t(a){if(e.find('button[type="submit"].os-loading').removeClass("os-loading"),latepoint_clear_form_messages(e),"success"===a.status){if("reload"==e.data("os-success-action"))return latepoint_add_notification(a.message),void location.reload();if("redirect"==e.data("os-success-action"))return void(e.data("os-redirect-to")?(latepoint_add_notification(a.message),window.location.replace(e.data("os-redirect-to"))):window.location.replace(a.message));if(e.data("os-output-target")&&$(e.data("os-output-target")).length?$(e.data("os-output-target")).html(a.message):"redirect"==a.message?window.location.replace(a.url):(latepoint_add_notification(a.message),e.prepend(latepoint_generate_form_message_html(a.message,"success"))),e.data("os-record-id-holder")&&a.record_id&&e.find('[name="'+e.data("os-record-id-holder")+'"]').val(a.record_id),e.data("os-after-call")){var n=e.data("os-after-call");e.data("os-pass-response")?window[n](a):window[n]()}$("button.os-loading").removeClass("os-loading")}else $("button.os-loading").removeClass("os-loading"),e.data("os-show-errors-as-notification")?latepoint_add_notification(a.message,"error"):(e.prepend(latepoint_generate_form_message_html(a.message,"error")),$([document.documentElement,document.body]).animate({scrollTop:e.find(".os-form-message-w").offset().top-30},200));a.form_values_to_update&&$.each(a.form_values_to_update,(function(t,a){e.find('[name="'+t+'"]').val(a)}))}}),!1}))})),function($){function t(t,e){switch(c(),p(t),t){case"datepicker":l();break;case"contact":j();break;case"agents":y();break;case"locations":break;case"services":g();break;case"payment":d(e);break;case"verify":r(e);break;case"confirmation":w();break}e.trigger("latepoint:initStep",[{step_name:t}]),e.trigger("latepoint:initStep:"+t)}function e(t){var e=t.closest(".latepoint-booking-form-element");t.addClass("selected");var a=t.data("service-duration"),n=t.data("interval"),o=t.data("work-start-time"),s=t.data("work-end-time"),i=t.data("total-work-minutes"),l=!!t.attr("data-available-minutes")&&t.data("available-minutes").toString().split(",").map(Number),r=t.data("day-minutes").toString().split(",").map(Number),d=e.find(".timeslots");if(d.html(""),i>0&&l.length&&r.length){var p=!1;r.forEach((function(t){if(!(t+a>s)){var e=latepoint_am_or_pm(t),o="dp-timepicker-trigger";if("timeline"==latepoint_helper.time_pick_style?o+=" dp-timeslot":o+=" dp-timebox",!1!==p&&t-p>a){var r=latepoint_minutes_to_hours_and_minutes(p+a)+" "+latepoint_am_or_pm(p+a)+" - "+latepoint_minutes_to_hours_and_minutes(t)+" "+latepoint_am_or_pm(t),c=(t-p-a)/(i+a)*100;d.append('<div class="'+o+' is-off" style="max-width:'+c+"%; width:"+c+'%"><span class="dp-label">'+r+"</span></div>")}l.includes(t)||(o+=" is-booked");var m="";(t%60==0||n>=60)&&(o+=" with-tick",m='<span class="dp-tick"><strong>'+latepoint_minutes_to_hours_preferably(t)+"</strong> "+e+"</span>");var u=latepoint_minutes_to_hours_and_minutes(t)+" "+e;if(latepoint_show_booking_end_time()){var _=t+a,f=latepoint_am_or_pm(_);u+=' - <span class="dp-label-end-time">'+latepoint_minutes_to_hours_and_minutes(_)+" "+f+"</span>"}u=u.trim(),d.removeClass("slots-not-available").append('<div class="'+o+'" data-minutes="'+t+'"><span class="dp-label">'+u+"</span>"+m+"</div>"),p=t}}))}else d.addClass("slots-not-available").append('<div class="not-working-message">'+latepoint_helper.msg_not_available+"</div>");$(".times-header-label span").text(t.data("nice-date")),e.find(".time-selector-w").slideDown(200,(function(){var t=e.find(".latepoint-body");t.stop().animate({scrollTop:t[0].scrollHeight},200)}))}function a(){$(".dp-timepicker-trigger").on("click",(function(){var t=$(this).closest(".latepoint-booking-form-element");if($(this).hasClass("is-booked")||$(this).hasClass("is-off"));else if($(this).hasClass("selected"))$(this).removeClass("selected"),$(this).find(".dp-success-label").remove(),t.find(".latepoint_start_time").val(""),latepoint_hide_next_btn(t),latepoint_update_summary_field(t,"time","");else{t.find(".dp-timepicker-trigger.selected").removeClass("selected").find(".dp-success-label").remove();var e=$(this).find(".dp-label").html();$(this).addClass("selected").find(".dp-label").html('<span class="dp-success-label">'+t.find(".latepoint-form").data("selected-label")+"</span>"+e),t.find(".latepoint_start_time").val($(this).data("minutes")),latepoint_show_next_btn(t),latepoint_update_summary_field(t,"time",e)}return!1}))}function n(){$(".os-month-next-btn").on("click",(function(){var t=$(this).closest(".latepoint-booking-form-element"),e=$(this).data("route");if(t.find(".os-monthly-calendar-days-w.active + .os-monthly-calendar-days-w").length)t.find(".os-monthly-calendar-days-w.active").removeClass("active").next(".os-monthly-calendar-days-w").addClass("active"),o(t);else if(1){var a=$(this);a.addClass("os-loading");var n=t.find(".os-monthly-calendar-days-w").last(),i=n.data("calendar-year"),l=n.data("calendar-month");12==l?(i+=1,l=1):l+=1;var r,d={action:"latepoint_route_call",route_name:e,params:{target_date_string:i+"-"+l+"-1",location_id:t.find(".latepoint_location_id").val(),agent_id:t.find(".latepoint_agent_id").val(),service_id:t.find(".latepoint_service_id").val(),duration:t.find('input[name="booking[duration]"]').val(),total_attendies:t.find('input[name="booking[total_attendies]"]').val()},layout:"none",return_format:"json"};$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:d,success:function e(n){a.removeClass("os-loading"),"success"===n.status&&(t.find(".os-months").append(n.message),t.find(".os-monthly-calendar-days-w.active").removeClass("active").next(".os-monthly-calendar-days-w").addClass("active"),o(t))}})}return s(t),!1})),$(".os-month-prev-btn").on("click",(function(){var t=$(this).closest(".latepoint-booking-form-element");return t.find(".os-monthly-calendar-days-w.active").prev(".os-monthly-calendar-days-w").length&&(t.find(".os-monthly-calendar-days-w.active").removeClass("active").prev(".os-monthly-calendar-days-w").addClass("active"),o(t)),s(t),!1}))}function o(t){t.find(".os-current-month-label .current-year").text(t.find(".os-monthly-calendar-days-w.active").data("calendar-year")),t.find(".os-current-month-label .current-month").text(t.find(".os-monthly-calendar-days-w.active").data("calendar-month-label"))}function s(t){t.find(".os-current-month-label .current-year").text(t.find(".os-monthly-calendar-days-w.active .os-monthly-calendar-days").data("calendar-year")),t.find(".os-current-month-label .current-month").text(t.find(".os-monthly-calendar-days-w.active .os-monthly-calendar-days").data("calendar-month-label")),t.find(".os-monthly-calendar-days-w.active").prev(".os-monthly-calendar-days-w").length?t.find(".os-month-prev-btn").removeClass("disabled"):t.find(".os-month-prev-btn").addClass("disabled")}function i(t,e){var a=latepoint_am_or_pm(t),n=latepoint_minutes_to_hours_and_minutes(t)+" "+a;if(latepoint_show_booking_end_time()){var o=t+e,s=latepoint_am_or_pm(o);n+=" - "+latepoint_minutes_to_hours_and_minutes(o)+" "+s}return n=n.trim()}function l(){a(),n(),$(".os-months").on("click",".os-day",(function(){if($(this).hasClass("os-day-passed"))return!1;if($(this).hasClass("os-not-in-allowed-period"))return!1;var t=$(this).closest(".latepoint-booking-form-element");if($(this).closest(".os-monthly-calendar-days-w").hasClass("hide-if-single-slot"))if($(this).hasClass("os-not-available"));else if(t.find(".os-day.selected").removeClass("selected"),$(this).addClass("selected"),t.find(".latepoint_start_date").val($(this).data("date")),latepoint_update_summary_field(t,"date",$(this).data("nice-date")),$(this).hasClass("os-one-slot-only")){var n=i($(this).data("available-minutes"),$(this).data("service-duration"));t.find(".latepoint_start_time").val($(this).data("available-minutes")),latepoint_show_next_btn(t),latepoint_update_summary_field(t,"time",n)}else e($(this)),a(),t.find(".latepoint_start_time").val(""),latepoint_hide_next_btn(t);else t.find(".latepoint_start_date").val($(this).data("date")),latepoint_update_summary_field(t,"date",$(this).data("nice-date")),t.find(".os-day.selected").removeClass("selected"),$(this).addClass("selected"),e($(this)),a(),latepoint_update_summary_field(t,"time",""),t.find(".latepoint_start_time").val(""),latepoint_hide_next_btn(t);return!1}))}function r(t){var e=arguments.length>0&&void 0!==t&&t;e&&e.closest(".latepoint-summary-is-open").removeClass("latepoint-summary-is-open")}function d(t){var e=arguments.length>0&&void 0!==t&&t;e.find(".step-payment-w").data("full-amount")>0&&latepoint_update_summary_field(e,"price",h((100*e.find(".step-payment-w").data("full-amount")/100).toFixed(2))),e&&"deposit"==e.find(".step-payment-w").data("default-portion")&&e.find('input[name="booking[payment_portion]"]').val("deposit");var a=e.find('input[name="booking[payment_method]"]').val();!a||$(".lp-payment-times-w").length||$(".lp-payment-methods-w").length||$(".lp-payment-portions-w").length||latepoint_init_payment_method_actions(e,a),$(".latepoint-booking-form-element .coupon-code-input-submit").on("click",(function(t){return latepoint_apply_coupon($(this).closest(".coupon-code-input-w").find(".coupon-code-input")),!1})),$(".latepoint-booking-form-element .coupon-code-clear").on("click",(function(t){return latepoint_remove_coupon($(this)),!1})),$(".latepoint-booking-form-element input.coupon-code-input").on("keyup",(function(t){if(13===t.which)return latepoint_apply_coupon($(this)),!1})),$(".latepoint-booking-form-element .coupon-code-trigger-w a").on("click",(function(t){return $(this).closest(".payment-total-info").addClass("entering-coupon").find(".coupon-code-input").focus(),!1})),$(".latepoint-booking-form-element .lp-payment-trigger-later").on("click",(function(t){var e=$(this).closest(".latepoint-booking-form-element");e.find('input[name="booking[payment_method]"]').val($(this).data("method")),e.find('input[name="booking[payment_portion]"]').val(""),e.find(".latepoint-form").submit()})),$(".latepoint-booking-form-element .lp-payment-trigger-payment-time-selector").on("click",(function(t){var e=$(this).closest(".latepoint-booking-form-element"),a=e.find(".step-payment-w");return latepoint_hide_next_btn(e),latepoint_show_prev_btn(e),a.attr("data-sub-step",latepoint_get_payment_sub_step(e,a.attr("data-sub-step"))),!1})),$(".latepoint-booking-form-element .lp-payment-trigger-payment-method-selector").on("click",(function(t){var e=$(this).closest(".latepoint-booking-form-element"),a=$(this).data("method");e.find('input[name="booking[payment_method]"]').val(a);var n=e.find(".step-payment-w");latepoint_hide_next_btn(e),latepoint_show_prev_btn(e),n.attr("data-sub-step",latepoint_get_payment_sub_step(e,n.attr("data-sub-step")))})),$(".latepoint-booking-form-element .lp-payment-trigger-payment-portion-selector").on("click",(function(t){var e=$(this).closest(".latepoint-booking-form-element"),a=jQuery(this).data("portion");e.find('input[name="booking[payment_portion]"]').val(a),"deposit"==a?e.find(".payment-total-info").addClass("paying-deposit"):e.find(".payment-total-info").removeClass("paying-deposit");var n=e.find(".step-payment-w");latepoint_hide_next_btn(e),latepoint_show_prev_btn(e),n.attr("data-sub-step",latepoint_get_payment_sub_step(e,n.attr("data-sub-step")))}))}function p(t){$('.latepoint-step-content[data-step-name="'+t+'"] .os-item-category-info').on("click",(function(){var t;latepoint_show_prev_btn($(this).closest(".latepoint-booking-form-element")),$(this).closest(".latepoint-step-content").addClass("selecting-item-category");var e=$(this).closest(".os-item-category-w"),a=$(this).closest(".os-item-categories-main-parent");return e.hasClass("selected")?(e.removeClass("selected"),e.parent().closest(".os-item-category-w").length?e.parent().closest(".os-item-category-w").addClass("selected"):a.removeClass("show-selected-only")):(a.find(".os-item-category-w.selected").removeClass("selected"),a.addClass("show-selected-only"),e.addClass("selected")),!1}))}function c(){$(".os-selectable-items .os-selectable-item").off("click",f),$(".os-selectable-items .os-selectable-item").on("click",f),$(".os-selectable-items .os-selectable-item .item-quantity-selector-input").off("keyup",_),$(".os-selectable-items .os-selectable-item .item-quantity-selector-input").on("keyup",_)}function m(t){t.find(".os-summary-value.os-summary-value-price").addClass("os-loading");var e,a=t.find(".latepoint-form").serialize(),n={action:"latepoint_route_call",route_name:latepoint_helper.calculate_price_route,params:a,layout:"none",return_format:"json"};$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function e(a){if("success"===a.status){var n=a.is_free?"":a.price;latepoint_update_summary_field(t,"price",n),t.find(".os-summary-value.os-summary-value-price").removeClass("os-loading")}}})}function u(t){var e=t.closest(".os-selectable-items").find(".os-selectable-item.selected").map((function(){return $(this).hasClass("has-quantity")?$(this).data("item-id")+":"+$(this).find("input.item-quantity-selector-input").val():$(this).data("item-id")})).get();t.closest(".latepoint-booking-form-element").find(t.data("id-holder")).val(e)}function _(t){var e=$(this).closest(".latepoint-booking-form-element"),a=$(this).closest(".os-selectable-item"),n=$(this).val();if(n&&n.match(/^\d+$/)){var o=a.data("max-quantity");o&&n>o&&(n=o)}else n=0;if($(this).val(n),a.hasClass("selected")&&n>0||!a.hasClass("selected")&&0==n)return u(a),m(e),!1;a.trigger("click")}function f(t){t.stopPropagation(),t.stopImmediatePropagation();var e=$(this).closest(".latepoint-booking-form-element");if($(this).hasClass("has-quantity")){if($(t.target).hasClass("item-quantity-selector")){var a=parseInt($(this).find("input.item-quantity-selector-input").val()),n="minus"==$(t.target).data("sign")?a-1:a+1,o=$(this).data("max-quantity");if(n<0&&(n=0),o&&n>o&&(n=o),$(this).find("input.item-quantity-selector-input").val(n),$(this).hasClass("selected")&&n>0||!$(this).hasClass("selected")&&0==n)return u($(this)),m(e),!1}if($(t.target).hasClass("item-quantity-selector-input"))return u($(this)),m(e),!1}var s="";$(this).hasClass("os-allow-multiselect")?($(this).hasClass("selected")?($(this).removeClass("selected"),$(this).hasClass("has-quantity")&&$(this).find("input.item-quantity-selector-input").val(0)):($(this).addClass("selected"),!$(this).hasClass("has-quantity")||$(this).find("input.item-quantity-selector-input").val()>0||$(this).find("input.item-quantity-selector-input").val(1)),u($(this)),s=String($(this).closest(".os-selectable-items").find(".os-selectable-item.selected").map((function(){return" "+$(this).data("summary-value")})).get()).trim(),latepoint_show_next_btn(e)):($(this).hasClass("os-duration-item")||$(this).closest(".os-item-categories-main-parent").find(".os-selectable-item.selected").removeClass("selected"),$(this).closest(".os-selectable-items").find(".os-selectable-item.selected").removeClass("selected"),$(this).addClass("selected"),e.find($(this).data("id-holder")).val($(this).data("item-id")),s=$(this).data("summary-value"),$(this).data("os-call-func")&&window[$(this).data("os-call-func")]($(this)),$(this).data("activate-sub-step")?window[$(this).data("activate-sub-step")]($(this)):v(e)),latepoint_update_summary_field(e,$(this).data("summary-field-name"),s),$(this).hasClass("os-priced-item")&&m(e)}function h(t){return latepoint_helper.currency_symbol_before+String(t)+latepoint_helper.currency_symbol_after}function g(){$(".total-attendies-selector-input").on("change",(function(){var t=$(this).closest(".total-attendies-selector-w").data("max-capacity"),e=$(this).closest(".total-attendies-selector-w").data("min-capacity"),a=$(this).val();a=Math.min(Number(t),Number(a)),a=Math.max(Number(e),Number(a)),$(this).val(a);var n=$(this).closest(".latepoint-booking-form-element");latepoint_update_summary_field(n,"total-attendies",a),m(n)})),$(".total-attendies-selector").on("click",(function(){var t=$(this).hasClass("total-attendies-selector-plus")?1:-1,e=$(this).closest(".total-attendies-selector-w").data("max-capacity"),a=$(this).closest(".total-attendies-selector-w").data("min-capacity"),n=$(this).closest(".total-attendies-selector-w").find("input.total-attendies-selector-input").val(),o=Number(n)>0?Math.max(Number(n)+t,1):1;return o=Math.min(Number(e),o),o=Math.max(Number(a),o),$(this).closest(".total-attendies-selector-w").find("input").val(o).trigger("change"),!1}))}function v(t){t.find(".latepoint_step_direction").val("next"),t.find(".latepoint-form").submit()}function b(){}function y(){$(".os-items .os-item-details-btn").on("click",(function(){var t=$(this).closest(".latepoint-booking-form-element"),e=$(this).data("agent-id");return t.find(".os-agent-bio-popup.active").removeClass("active"),t.find("#osAgentBioPopup"+e).addClass("active"),!1})),$(".os-agent-bio-close").on("click",(function(){return $(this).closest(".os-agent-bio-popup").removeClass("active"),!1}))}function w(){$(".latepoint-booking-form-element").on("click",".set-customer-password-btn",(function(){var t=$(this),e=$(this).closest(".latepoint-booking-form-element");t.addClass("os-loading");var a={account_nonse:$('input[name="account_nonse"]').val(),password:$('input[name="customer[password]"]').val(),password_confirmation:$('input[name="customer[password_confirmation]"]').val()},n={action:"latepoint_route_call",route_name:$(this).data("btn-action"),params:$.param(a),layout:"none",return_format:"json"};return $.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function a(n){t.removeClass("os-loading"),"success"===n.status?(e.find(".step-confirmation-set-password").html("").hide(),e.find(".confirmation-cabinet-info").show()):latepoint_show_message_inside_element(n.message,e.find(".step-confirmation-set-password"),"error")}}),!1})),$(".latepoint-booking-form-element").on("click",".qr-show-trigger",(function(){var t
;return $(this).closest(".latepoint-booking-form-element").find(".qr-code-on-confirmation").addClass("show-vevent-qr-code"),!1})),$(".latepoint-booking-form-element").on("click",".show-set-password-fields",(function(){var t=$(this).closest(".latepoint-booking-form-element");return t.find(".step-confirmation-set-password").show(),t.find("#customer_password").focus(),$(this).closest(".info-box").hide(),!1}))}function C(){$(".latepoint-customer-timezone-selector-w select").on("change",(function(t){var e=$(this);e.closest(".latepoint-customer-timezone-selector-w").addClass("os-loading");var a={action:"latepoint_route_call",route_name:$(this).closest(".latepoint-customer-timezone-selector-w").data("route-name"),params:{timezone_name:$(this).val()},layout:"none",return_format:"json"};$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.closest(".latepoint-customer-timezone-selector-w").removeClass("os-loading"),"success"===a.status&&location.reload()}})}))}function k(){if($(".latepoint-login-form-w #facebook-signin-btn").length&&$(".latepoint-login-form-w").length&&$(".latepoint-login-form-w #facebook-signin-btn").on("click",(function(){var t=$(this).closest(".latepoint-login-form-w");FB.login((function(e){if("connected"===e.status&&e.authResponse){var a={token:e.authResponse.accessToken},n={action:"latepoint_route_call",route_name:t.find("#facebook-signin-btn").data("login-action"),params:$.param(a),layout:"none",return_format:"json"};T(t),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function e(a){"success"===a.status?location.reload():(latepoint_show_message_inside_element(a.message,t),A(!1,t))}})}}),{scope:"public_profile,email"})})),$(".latepoint-login-form-w #google-signin-btn").length&&$(".latepoint-login-form-w").length&&"undefined"!=typeof gapi){var t={},e;$(".latepoint-login-form-w").each((function(){var t=$(this);gapi.load("auth2",(function(){var e;gapi.auth2.init({client_id:t.find("meta[name=google-signin-client_id]").attr("content"),cookiepolicy:"single_host_origin"}).attachClickHandler(t.find("#google-signin-btn")[0],{},(function(e){var a={token:e.getAuthResponse().id_token},n={action:"latepoint_route_call",route_name:t.find("#google-signin-btn").data("login-action"),params:$.param(a),layout:"none",return_format:"json"};T(t),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function e(a){"success"===a.status?location.reload():(latepoint_show_message_inside_element(a.message,t),A(!1,t))}})}),(function(t){}))}))}))}}function x(t){var e="",a=t.find('input[name="customer[first_name]"]').val(),n=t.find('input[name="customer[last_name]"]').val();return a&&(e+=a),n&&(e+=" "+n),e.trim()}function j(){Q(),q(),latepoint_init_form_masks(),$(".step-contact-w").each((function(){latepoint_update_summary_field($(this).closest(".latepoint-booking-form-element"),"customer",x($(this)))})),$(".step-contact-w").on("keyup",'input[name="customer[first_name]"], input[name="customer[last_name]"]',(function(){var t=$(this).closest(".latepoint-booking-form-element");latepoint_update_summary_field(t,"customer",x(t))})),$(".step-contact-w").on("keyup",".os-form-control.required",(function(){var t;F($(this).closest(".latepoint-booking-form-element").find(".step-contact-w .os-form-control.required"))})),$(".step-customer-logout-btn").on("click",(function(){var t=$(this).closest(".latepoint-booking-form-element"),e={action:"latepoint_route_call",route_name:$(this).data("btn-action"),layout:"none",return_format:"json"};return T(t),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:e,success:function e(a){latepoint_reload_step(t)}}),!1})),$(".step-login-existing-customer-btn").on("click",(function(){var t=$(this).closest(".latepoint-booking-form-element"),e={email:t.find('.os-step-existing-customer-login-w input[name="customer_login[email]"]').val(),password:t.find('.os-step-existing-customer-login-w input[name="customer_login[password]"]').val()},a={action:"latepoint_route_call",route_name:$(this).data("btn-action"),params:$.param(e),layout:"none",return_format:"json"};return T(t),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function e(a){"success"===a.status?latepoint_reload_step(t):(latepoint_show_message_inside_element(a.message,t.find(".os-step-existing-customer-login-w")),A(!1,t))}}),!1}))}function T(t){t.removeClass("step-content-loaded").addClass("step-content-loading")}function A(t,e){t&&e.find(".latepoint-body .latepoint-step-content").replaceWith(t),e.removeClass("step-content-loading").addClass("step-content-mid-loading"),setTimeout((function(){e.removeClass("step-content-mid-loading").addClass("step-content-loaded")}),50)}function Q(){$("#facebook-signin-btn").length&&$(".latepoint-booking-form-element").length&&$("#facebook-signin-btn").on("click",(function(){var t=$(this).closest(".latepoint-booking-form-element");FB.login((function(e){if("connected"===e.status&&e.authResponse){var a={token:e.authResponse.accessToken},n={action:"latepoint_route_call",route_name:t.find("#facebook-signin-btn").data("login-action"),params:$.param(a),layout:"none",return_format:"json"};T(t),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function e(a){"success"===a.status?latepoint_reload_step(t):(latepoint_show_message_inside_element(a.message,t.find(".os-step-existing-customer-login-w ")),A(!1,t))}})}}),{scope:"public_profile,email"})}))}function q(){var t;$("#google-signin-btn").length&&$(".latepoint-booking-form-element").length&&"undefined"!=typeof gapi&&$(".latepoint-booking-form-element").each((function(){var t=$(this);gapi.load("auth2",(function(){var e;gapi.auth2.init({client_id:t.find("meta[name=google-signin-client_id]").attr("content"),cookiepolicy:"single_host_origin"}).attachClickHandler(t.find("#google-signin-btn")[0],{},(function(e){var a={token:e.getAuthResponse().id_token},n={action:"latepoint_route_call",route_name:t.find("#google-signin-btn").data("login-action"),params:$.param(a),layout:"none",return_format:"json"};T(t),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:n,success:function e(a){"success"===a.status?latepoint_reload_step(t):(latepoint_show_message_inside_element(a.message,t.find(".os-step-existing-customer-login-w ")),A(!1,t))}})}),(function(t){}))}))}))}function S(t,e){t.removeClass("step-changed").addClass("step-changing"),setTimeout((function(){var a=t.find('.latepoint-progress li[data-step-name="'+e+'"]');a.addClass("active").addClass("complete").prevAll().addClass("complete").removeClass("active"),a.nextAll().removeClass("complete").removeClass("active");var n=t.find('.latepoint-step-desc-library[data-step-name="'+e+'"]').html();t.find(".latepoint-step-desc").html(n);var o=t.find('.os-heading-text-library[data-step-name="'+e+'"]').html();t.find(".os-heading-text").html(o),setTimeout((function(){t.removeClass("step-changing").addClass("step-changed")}),50)}),500)}function z(t,e){var a=t.find('.latepoint-progress li[data-step-name="'+e+'"]');a.addClass("active").addClass("complete").prevAll().addClass("complete").removeClass("active"),a.nextAll().removeClass("complete").removeClass("active")}function I(t,e){var a=t.find('.latepoint-progress li[data-step-name="'+e+'"]');a.addClass("active").addClass("complete").prevAll().addClass("complete").removeClass("active"),a.nextAll().removeClass("complete").removeClass("active")}function M(t,e){t.removeClass("step-changed").addClass("step-changing"),setTimeout((function(){t.find(".latepoint-step-desc").html(t.find(".latepoint-step-desc-library.active").removeClass("active").next(".latepoint-step-desc-library").addClass("active").html()),t.find(".os-heading-text").html(t.find(".os-heading-text-library.active").removeClass("active").next(".os-heading-text-library").addClass("active").html()),setTimeout((function(){t.removeClass("step-changing").addClass("step-changed")}),50)}),500)}function N(t,e){t.removeClass("step-changed").addClass("step-changing"),setTimeout((function(){t.find(".latepoint-step-desc").html(t.find(".latepoint-step-desc-library.active").removeClass("active").prev(".latepoint-step-desc-library").addClass("active").html()),t.find(".os-heading-text").html(t.find(".os-heading-text-library.active").removeClass("active").prev(".os-heading-text-library").addClass("active").html()),setTimeout((function(){t.removeClass("step-changing").addClass("step-changed")}),50)}),500)}function F(t){var e=!0;return t.each((function(t){if(""==$(this).val())return e=!1,!1})),e}function H(e){var a=e.closest(".latepoint-booking-form-element"),n=e.serialize(),o={action:"latepoint_route_call",route_name:e.data("route-name"),params:n,layout:"none",return_format:"json"};a.removeClass("step-content-loaded").addClass("step-content-loading"),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function n(o){"success"===o.status?(latepoint_hide_message_inside_element(a.find(".latepoint-body")),a.data("flash-error")&&(latepoint_show_message_inside_element(a.data("flash-error"),a.find(".latepoint-body")),a.data("flash-error","")),a.find(".latepoint_current_step").val(o.step_name),a.removeClass((function(t,e){return(e.match(/(^|\s)current-step-\S+/g)||[]).join(" ")})).addClass("current-step-"+o.step_name),setTimeout((function(){a.removeClass("step-content-loading").addClass("step-content-mid-loading"),a.find(".latepoint-body").find(".latepoint-step-content").addClass("is-hidden"),a.find('.latepoint-step-content[data-step-name="'+o.step_name+'"]')&&a.find('.latepoint-step-content[data-step-name="'+o.step_name+'"]').remove(),a.find(".latepoint-body").append(o.message),t(o.step_name,a),setTimeout((function(){a.removeClass("step-content-mid-loading").addClass("step-content-loaded"),a.find(".latepoint-next-btn, .latepoint-prev-btn").removeClass("os-loading")}),50)}),500),o.is_pre_last_step?(a.data("next-submit-is-last","yes"),a.find(".latepoint-next-btn span").text(a.find(".latepoint-next-btn").data("pre-last-step-label"))):(a.data("next-submit-is-last","no"),a.find(".latepoint-next-btn span").text(a.find(".latepoint-next-btn").data("label"))),o.is_last_step?(a.addClass("hidden-buttons").find(".latepoint-footer").remove(),a.find(".latepoint-progress").css("opacity",0),a.closest(".latepoint-summary-is-open").removeClass("latepoint-summary-is-open"),a.addClass("is-final-step")):(!0===o.show_next_btn?latepoint_show_next_btn(a):latepoint_hide_next_btn(a),!0===o.show_prev_btn?latepoint_show_prev_btn(a):latepoint_hide_prev_btn(a)),S(a,o.step_name)):(a.removeClass("step-content-loading").addClass("step-content-loaded"),a.find(".latepoint-next-btn, .latepoint-prev-btn").removeClass("os-loading"),o.send_to_step&&a.find('.latepoint-step-content[data-step-name="'+o.send_to_step+'"]').length?(a.data("flash-error",o.message),latepoint_reload_step(a,o.send_to_step)):(latepoint_show_message_inside_element(o.message,a.find(".latepoint-body")),latepoint_show_prev_btn(a))),e.find(".latepoint_step_direction").val("next")}})}function R(){if($(".latepoint-booking-form-element .latepoint-form").on("submit",(function(t){var e;t.preventDefault();var a=$(this),n=a.closest(".latepoint-booking-form-element");latepoint_hide_prev_btn(n);var o=n.find(".latepoint_current_step").val(),s=[];n.trigger("latepoint:submitBookingForm",[{current_step:o,callbacks_list:s,is_final_submit:"yes"==n.data("next-submit-is-last"),direction:n.find(".latepoint_step_direction").val()}]),(e=jQuery).when.apply(e,_toConsumableArray(s.map((function(t){return t.action()})))).done((function(){H(a)})).fail((function(t){t.send_to_step&&n.find('.latepoint-step-content[data-step-name="'+t.send_to_step+'"]').length&&(latepoint_reload_step(n,t.send_to_step),n.data("flash-error",t.message)),n.removeClass("step-content-loading").addClass("step-content-loaded"),latepoint_show_message_inside_element(t.message,n.find(".latepoint-body"),"error"),n.find(".latepoint-next-btn").removeClass("os-loading"),n.find(".latepoint-step-content:last-child").prev(".latepoint-step-content").length&&latepoint_show_prev_btn(n)}))})),$(".latepoint-lightbox-close").on("click",(function(){var t=new URLSearchParams(location.search);return t.has("latepoint_booking_intent_key")&&(t.delete("latepoint_booking_intent_key"),history.replaceState(null,"","?"+t+location.hash)),$("body").removeClass("latepoint-lightbox-active"),$(".latepoint-lightbox-w").remove(),!1})),$(".latepoint-timezone-selector-w select").on("change",(function(t){var e=$(this);e.closest(".latepoint-timezone-selector-w").addClass("os-loading");var a={action:"latepoint_route_call",route_name:$(this).closest(".latepoint-timezone-selector-w").data("route-name"),params:{timezone_name:$(this).val()},layout:"none",return_format:"json"},n=e.closest(".latepoint-booking-form-element");n.removeClass("step-content-loaded").addClass("step-content-loading"),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:a,success:function t(a){e.closest(".latepoint-timezone-selector-w").removeClass("os-loading"),n.removeClass("step-content-loading"),"success"===a.status&&e.closest(".latepoint-booking-form-element").hasClass("current-step-datepicker")&&latepoint_reload_step(e.closest(".latepoint-booking-form-element"))}})})),!latepoint_helper.is_timezone_selected){var t=Intl.DateTimeFormat().resolvedOptions().timeZone;t&&t!=$(".latepoint-timezone-selector-w select").val()&&$(".latepoint-timezone-selector-w select").val(t).change()}$(".latepoint-booking-form-element").on("click",".lp-option",(function(){$(this).closest(".lp-options").find(".lp-option.selected").removeClass("selected"),$(this).addClass("selected")})),$(".latepoint-booking-form-element .latepoint-next-btn").on("click",(function(t){var e;if($(this).hasClass("disabled")||$(this).hasClass("os-loading"))return!1;var a=$(this);a.addClass("os-loading");var n=$(this).closest(".latepoint-form"),o=n.closest(".latepoint-booking-form-element"),s=o.find(".latepoint_current_step").val();n.find(".latepoint_step_direction").val("next");var i=[];return o.trigger("latepoint:nextStepClicked",[{current_step:s,callbacks_list:i}]),latepoint_hide_prev_btn(o),(e=jQuery).when.apply(e,_toConsumableArray(i.map((function(t){return t.action()})))).done((function(){n.submit()})).fail((function(t){latepoint_show_message_inside_element(t.message,o.find(".latepoint-body"),"error"),a.removeClass("os-loading"),o.find(".latepoint-step-content:last-child").prev(".latepoint-step-content").length&&latepoint_show_prev_btn(o)})),!1})),$(".latepoint-booking-form-element .latepoint-prev-btn").on("click",(function(t){if($(this).hasClass("disabled")||$(this).hasClass("os-loading"))return!1;var e,a=$(this).closest(".latepoint-form").closest(".latepoint-booking-form-element"),n=a.find(".latepoint_current_step").val(),o=a.find('.latepoint-step-content[data-step-name="'+n+'"]');if("payment"==n){var s=a.find(".step-payment-w");if(s.length){s.find(".lp-option.selected").removeClass("selected");var i=latepoint_get_payment_sub_step(a,s.attr("data-sub-step"),!0);if(i!=s.attr("data-sub-step"))return s.find(".lp-payment-method-content").hide(),s.attr("data-sub-step",i),latepoint_hide_next_btn(a),!1}}if("services"==n){var l=a.find(".step-services-w");if(l.hasClass("selecting-service-duration"))return l.removeClass("selecting-service-duration"),l.find(".os-services > .os-item.selected").removeClass("selected"),clear_sub_step_duration(a),a.find(".latepoint-step-content").length<=1&&!l.hasClass("selecting-item-category")&&latepoint_hide_prev_btn(a),m(a),!1;if(l.hasClass("selecting-total-attendies"))return l.removeClass("selecting-total-attendies"),l.find(".os-services > .os-item.selected").hasClass("has-multiple-durations")?(l.find(".os-services > .os-item.selected .os-service-durations .os-selectable-item.selected").removeClass("selected"),l.addClass("selecting-service-duration"),latepoint_hide_next_btn(a)):l.find(".os-services > .os-item.selected").removeClass("selected"),clear_sub_step_attendies(a),a.find(".latepoint-step-content").length<=1&&!l.hasClass("selecting-item-category")&&latepoint_hide_prev_btn(a),m(a),!1}if(o.hasClass("selecting-item-category"))return o.find(".os-item-category-w .os-item-category-w.selected").length?o.find(".os-item-category-w .os-item-category-w.selected").parents(".os-item-category-w").addClass("selected").find(".os-item-category-w.selected").removeClass("selected"):(o.removeClass("selecting-item-category").find(".os-item-category-w.selected").removeClass("selected"),o.removeClass("selecting-item-category").find(".os-item-categories-holder.show-selected-only").removeClass("show-selected-only")),a.find(".latepoint-step-content").length<=1&&!o.hasClass("selecting-item-category")&&latepoint_hide_prev_btn(a),m(a),!1;var r=a.find(".latepoint-step-content:last-child");r.data("clear-action")&&window[r.data("clear-action")](a);var d=$(this);d.addClass("os-loading"),a.removeClass("step-content-loaded").addClass("step-content-loading");var p=a.find(".latepoint-step-content.is-hidden").last(),c=p.data("step-name");return S(a,c),setTimeout((function(){if(p.removeClass("is-hidden"),r.remove(),a.find(".latepoint_current_step").val(c),a.find(".latepoint-next-btn span").text(a.find(".latepoint-next-btn").data("label")),a.data("next-submit-is-last","no"),latepoint_show_next_btn(a),d.removeClass("os-loading"),a.find(".latepoint-step-content").length<=1)if(p.hasClass("selecting-item-category"),"services"==c){var t=a.find(".step-services-w");t.hasClass("selecting-service-duration")||t.hasClass("selecting-total-attendies")||t.hasClass("selecting-item-category")?t.find(".os-services > .os-item.selected").hasClass("is-preselected")?t.hasClass("selecting-total-attendies")&&t.find(".os-services > .os-item.selected").hasClass("has-multiple-durations")?latepoint_show_prev_btn(a):latepoint_hide_prev_btn(a):latepoint_show_prev_btn(a):latepoint_hide_prev_btn(a)}else p.hasClass("selecting-item-category")||latepoint_hide_prev_btn(a);a.removeClass("step-content-loading").addClass("step-content-mid-loading"),setTimeout((function(){a.removeClass("step-content-mid-loading").addClass("step-content-loaded"),latepoint_hide_message_inside_element(a.find(".latepoint-body")),m(a)}),150)}),700),!1}))}$((function(){if(k(),C(),latepoint_helper.start_from_booking_intent_key){var e={action:"latepoint_route_call",route_name:latepoint_helper.start_from_booking_intent_route,params:{booking_intent_key:latepoint_helper.start_from_booking_intent_key},layout:"none",return_format:"json"};$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:e,success:function e(a){if("success"===a.status){var n="",o,o;latepoint_show_data_in_lightbox(a.message,a.lightbox_class),R(),(o=jQuery(".latepoint-lightbox-w .latepoint-booking-form-element")).find(".latepoint-step-content").addClass("is-hidden").last().removeClass("is-hidden"),o.find(".latepoint-step-content").length>1&&latepoint_show_prev_btn(o),(o=jQuery(".latepoint-lightbox-w .latepoint-booking-form-element")).find(".latepoint-step-content").each((function(){t($(this).data("step-name"),o)})),$("body").addClass("latepoint-lightbox-active")}}})}$(".latepoint-booking-form-element").length&&(R(),$(".latepoint-booking-form-element").each((function(){t($(this).find(".latepoint_current_step").val(),$(this))}))),$(".latepoint-request-booking-cancellation").on("click",(function(){if(!confirm(latepoint_helper.cancel_booking_prompt))return!1;var t=$(this),e=t.closest(".customer-booking"),a,n,o={action:"latepoint_route_call",route_name:$(this).data("route"),params:{id:e.data("id")},layout:"none",return_format:"json"};return t.addClass("os-loading"),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:o,success:function e(a){"success"===a.status?(location.reload(),t.remove()):t.removeClass("os-loading")}}),!1})),$("body").on("click",".os-step-tabs .os-step-tab",(function(){$(this).closest(".os-step-tabs").find(".os-step-tab").removeClass("active"),$(this).addClass("active");var t=$(this).data("target");$(this).closest(".os-step-tabs-w").find(".os-step-tab-content").hide(),$(t).show()})),$("body").on("keyup",".os-form-group .os-form-control",(function(){$(this).val()?$(this).closest(".os-form-group").addClass("has-value"):$(this).closest(".os-form-group").removeClass("has-value")})),$(".latepoint-tab-triggers").on("click",".latepoint-tab-trigger",(function(){var t=$(this).closest(".latepoint-tabs-w");return t.find(".latepoint-tab-trigger.active").removeClass("active"),t.find(".latepoint-tab-content").removeClass("active"),$(this).addClass("active"),t.find(".latepoint-tab-content"+$(this).data("tab-target")).addClass("active"),!1})),$(".latepoint-book-button, .os_trigger_booking").on("click",(function(){var e=$(this),a=latepoint_helper.booking_button_route,n={},o={};e.data("show-service-categories")&&(o.show_service_categories=e.data("show-service-categories")),e.data("show-locations")&&(o.show_locations=e.data("show-locations")),e.data("show-services")&&(o.show_services=e.data("show-services")),e.data("show-agents")&&(o.show_agents=e.data("show-agents")),e.data("selected-location")&&(o.selected_location=e.data("selected-location")),e.data("selected-agent")&&(o.selected_agent=e.data("selected-agent")),e.data("selected-service")&&(o.selected_service=e.data("selected-service")),e.data("selected-service-category")&&(o.selected_service_category=e.data("selected-service-category")),e.data("selected-start-date")&&(o.selected_start_date=e.data("selected-start-date")),e.data("selected-start-time")&&(o.selected_start_time=e.data("selected-start-time")),e.data("calendar-start-date")&&(o.calendar_start_date=e.data("calendar-start-date")),0==$.isEmptyObject(o)&&(n.restrictions=o);var s={action:"latepoint_route_call",route_name:a,params:n,layout:"none",return_format:"json"};return e.addClass("os-loading"),$.ajax({type:"post",dataType:"json",url:latepoint_helper.ajaxurl,data:s,success:function a(n){if("success"===n.status){var o="";"yes"!=e.data("hide-summary")&&(o+=" latepoint-with-summary"),"yes"==e.data("hide-side-panel")&&(o+=" latepoint-hide-side-panel"),latepoint_show_data_in_lightbox(n.message,o),R();var s=jQuery(".latepoint-lightbox-w .latepoint-booking-form-element");t(n.step,s),$("body").addClass("latepoint-lightbox-active"),e.removeClass("os-loading")}else e.removeClass("os-loading")}}),!1}))}))}(jQuery);
//# sourceMappingURL=main_front.js.map