{"version":3,"sources":["../../lib/assets/javascripts/os-time.js","../../lib/assets/javascripts/os-actions.js","../../lib/assets/javascripts/os-notifications.js","../../lib/assets/javascripts/os-shared.js","../../lib/assets/javascripts/os-updates.js","../../lib/assets/javascripts/main_back.js","../../lib/assets/javascripts/os-select.js","../../lib/assets/javascripts/os-google-calendar.js"],"names":["latepoint_is_timeframe_in_periods","timeframe_start","timeframe_end","periods_arr","is_inside","arguments","length","undefined","i","period_start","period_end","buffer_before","buffer_after","period_info","split","parseFloat","latepoint_is_period_inside_another","latepoint_is_period_overlapping","period_one_start","period_one_end","period_two_start","period_two_end","latepoint_minutes_to_hours_preferably","time","army_clock","latepoint_is_army_clock","hours","Math","floor","minutes","latepoint_minutes_to_hours","latepoint_am_or_pm","latepoint_hours_and_minutes_to_minutes","hours_and_minutes","ampm","hours_and_minutes_arr","parseInt","latepoint_get_time_system","latepoint_helper","time_system","latepoint_minutes_to_hours_and_minutes","format","sprintf","latepoint_generate_form_message_html","messages","status","message_html","Array","isArray","forEach","message","latepoint_clear_form_messages","$form","find","remove","latepoint_show_data_in_lightbox","extra_classes","jQuery","lightbox_css_classes","append","addClass","latepoint_add_notification","message_type","wrapper","latepoint_mask_timefield","$elem","inputmask","mask","placeholder","latepoint_mask_phone","latepoint_is_phone_masking_enabled","latepoint_get_phone_format","phone_format","enable_phone_masking","latepoint_show_booking_end_time","show_booking_end_time","latepoint_init_form_masks","latepoint_get_paypal_payment_amount","$booking_form_element","payment_portion","payment_amount","val","data","latepoint_load_addons_info","$addons_info_wrapper","route","action","route_name","params","return_format","ajax","type","dataType","url","ajaxurl","success","response","removeClass","html","alert","latepoint_check_for_updates","$log_wrapper","$version_info_wrapper","latepoint_init_side_menu","on","layout_style","hasClass","this","menu_layout_style","layout","latepoint_init_grouped_bookings_form","latepoint_quick_booking_customer_selected","latepoint_custom_day_removed","closest","fadeOut","latepoint_booking_synced","latepoint_sync_update_progress","latepoint_gcal_event_deleted","latepoint_booking_unsynced","latepoint_count_active_connections","$connection_wrapper","connected_services_count","all_services_count","prop","text","latepoint_custom_field_removed","latepoint_coupon_removed","latepoint_reminder_removed","latepoint_init_custom_fields_form","toggleClass","show","hide","latepoint_init_coupons_form","latepoint_init_reminders_form","latepoint_custom_field_saved","latepoint_init_custom_day_schedule","attr","focus","$calendar","target_date_string","$this","trigger","slideDown","latepoint_init_updates_page","latepoint_init_monthly_calendar_navigation","latepoint_reload_daily_agents_page","next","latepoint_calendar_set_month_label","$btn","load_month_route_name","$calendar_element","calendar_layout","calendar_year","calendar_month","selected_agent_id","selected_service_id","booking_info","agent_id","service_id","allow_full_access","location_id","prev","last","prepend","latepoint_init_element_togglers","toggle","latepoint_init_color_picker","each","color","picker","$picker_wrapper","Pickr","create","el","default","comparison","useAsButton","components","preview","opacity","hue","interaction","input","clear","save","onChange","hsva","instance","toHEX","toString","latepoint_lightbox_close","latepoint_reload_select_service_categories","$trigger_elem","latepoint_wizard_item_editing_cancelled","latepoint_load_quick_availability","custom_agent_id","start_date","load_more_days","load_prev_days","$quick_booking_form","click","form_data","serialize","parent","scrollTop","replaceWith","latepoint_init_quick_availability_form","selected_start_date","selected_start_time","selected_start_time_ampm","selected_start_time_minutes","date","formatted_date","service_duration","$form_w","start_minutes","start_hours_and_minutes","latepoint_set_booking_end_time","setTimeout","latepoint_init_work_period_form","latepoint_close_side_panel","latepoint_reload_after_booking_save","first","latepoint_load_calendar","latepoint_reload_widget","latepoint_filter_table","latepoint_init_quick_booking_form","lateSelect","$save_transaction_btn","$transaction_box","amount","token","processor","payment_method","booking_id","customer_id","latepoint_recalculate_booking_price","keyup","$queryInput","query","toLowerCase","console","log","latepoint_apply_agent_selector_change","selected_option_html","$selected_option","latepoint_apply_service_selector_change","$widget_elem","$updated_widget_elem","latepoint_init_daterangepicker","latepoint_init_circles_charts","latepoint_init_daily_bookings_chart","latepoint_init_donut_charts","target_date","params_arr","param","$trigger","$quick_edit_form","coupon_discount","latepoint_complex_selector_select","$connection_wrappers","latepoint_complex_selector_deselect","booking_duration","extra_duration","Number","$extra_quantity_input","start_time","start_time_ampm","start_time_minutes","end_time_minutes","end_time_ampm","end_hours_and_minutes","$selected_service","default_duration","min_capacity","max_capacity","extra_durations","options","string_minutes","index","value","duration","attendies_options_html","selected_attendies","min","Chart","_ref","$dailyBookingsChart","dailyBookingsLabels","dailyBookingsValues","map","dailyBookingsChartMax","max","apply","fontFamily","font_family","defaults","global","defaultFontFamily","defaultFontSize","defaultFontStyle","tooltips","titleFontFamily","titleFontSize","titleFontColor","backgroundColor","titleFontStyle","titleMarginBottom","bodyFontFamily","bodyFontSize","bodyFontStyle","displayColors","xPadding","yPadding","yAlign","xAlign","cornerRadius","intersect","ctx","getContext","gradientStroke","createLinearGradient","addColorStop","gradientFill","chartDailyBookingsData","labels","datasets","label","fill","lineTension","borderColor","borderWidth","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","_defineProperty","chartDailyBookings","padding","top","left","right","bottom","responsive","maintainAspectRatio","legend","display","scales","xAxes","ticks","fontSize","fontColor","gridLines","zeroLineColor","yAxes","beginAtZero","suggestedMax","latepoint_init_daily_agent_calendar","chart_colors","chart_labels","chart_values","$chart_canvas","chartDonut","hoverBackgroundColor","hoverBorderColor","callbacks","title","tooltipItem","animation","animateScale","cutoutPercentage","chart_elem_id","max_value","chart_value","chart_color","chart_color_fade","myCircle","Circles","id","radius","maxValue","width","round","colors","wrpClass","textClass","valueStrokeClass","maxValueStrokeClass","styleWrapper","styleText","latepoint_random_text","result","characters","charactersLength","charAt","random","latepoint_get_order_for_service_categories","picker_start_time","picker_end_time","locale","cancelLabel","moment","wp_locale","daterangepicker","opens","singleDatePicker","startDate","endDate","ev","element","latepoint_recalculate_items_count_in_category","number_of_items","latepoint_remove_agent_box","$remove_btn","$agent_box","latepoint_remove_service_box","$service_box","latepoint_init_monthly_view","month","year","latepoint_init_copy_on_click_elements","mouseenter","position_info","position","outerWidth","position_left","position_top","outerHeight","after","click_to_copy_prompt","mouseleave","nextAll","$tempElement","text_to_copy","is","select","document","execCommand","$done_prompt","click_to_copy_done","insertAfter","animate","is_removed","synced_total","chart_total","percent","css","latepoint_remove_first_synced_booking_with_google","latepoint_sync_next_booking_with_google","latepoint_init_reminder_form","tinymce","$table","$filter_elem","reset_page","filter_params","$table_w","total_pages","showing_from","showing_to","total_records","$","fn","os_build_selected_item","$option","quantity_html","lateselect_html","all_items","selected_items","is_selected","wrap","$lateselect_wrapper","selected_value","removeAttr","$input","current_value","new_quantity","max_quantity","formatted_ids","quantity","slice","ready","e","confirm","location","reload","window","replace","before","func_name","preventDefault","record_id","documentElement","body","offset","form_values_to_update","name","$install_btn","addon_name","addon_path","code","OsGoogleCalendar","_classCallCheck","init","_this","gapi","load","client","clientId","google_calendar_client_id","discoveryDocs","scope","then","auth2","getAuthInstance","grantOfflineAccess","saveAuthCode","err","details","authResult","headers","google_calendar_is_enabled","google_calendar","slideUp","off","href","group","key","event","$wrapper","keyCode","$step","clone","step_name","step_order_number","stopPropagation","slideToggle","confirm_message","approve_confirm","reject_confirm","$box","change","calendar_id","$schedule_wrapper","add_item_route_name","item_info","$next_btn","current_step","show_prev_btn","show_next_btn","$prev_btn","dragula","querySelectorAll","moves","container","handle","classList","contains","$categories_wrapper","category_datas","item_datas","order_number","parent_id","push","item_order_number","category_id","custom_fields_order_data","$custom_fields_wrapper","new_order_number","$field_id","ordered_fields","fields_for","step_order_data","$steps_wrapper","steps","$select","$list","indexOf","$hiddenInput","frame","$image_uploader_trigger","$image_selector_w","$image_container","$image_id_holder","image_exists","open","wp","media","button","multiple","attachment","state","get","toJSON","ampm_value"],"mappings":"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","sourcesContent":["function latepoint_is_timeframe_in_periods(timeframe_start, timeframe_end, periods_arr) {\n  var is_inside = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  for (var i = 0; i < periods_arr.length; i++) {\n\n    var period_start = 0;\n    var period_end = 0;\n    var buffer_before = 0;\n    var buffer_after = 0;\n\n    var period_info = periods_arr[i].split(':');\n    if (period_info.length == 2) {\n      period_start = period_info[0];\n      period_end = period_info[1];\n    } else {\n      buffer_before = period_info[2];\n      buffer_after = period_info[3];\n      period_start = parseFloat(period_info[0]) - parseFloat(buffer_before);\n      period_end = parseFloat(period_info[1]) + parseFloat(buffer_after);\n    }\n    if (is_inside) {\n      if (latepoint_is_period_inside_another(timeframe_start, timeframe_end, period_start, period_end)) {\n        return true;\n      }\n    } else {\n      if (latepoint_is_period_overlapping(timeframe_start, timeframe_end, period_start, period_end)) {\n        return true;\n      }\n    }\n  };\n  return false;\n}\n\nfunction latepoint_is_period_overlapping(period_one_start, period_one_end, period_two_start, period_two_end) {\n  // https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap/\n  return period_one_start < period_two_end && period_two_start < period_one_end;\n}\nfunction latepoint_is_period_inside_another(period_one_start, period_one_end, period_two_start, period_two_end) {\n  return period_one_start >= period_two_start && period_one_end <= period_two_end;\n}\n\n\n// Converts time in minutes to hours if possible, if minutes also exists - shows minutes too\nfunction latepoint_minutes_to_hours_preferably(time) {\n  var army_clock = latepoint_is_army_clock();\n\n  var hours = Math.floor(time / 60);\n  if (!army_clock && hours > 12) hours = hours - 12;\n\n  var minutes = time % 60;\n  if(minutes > 0) hours = hours + ':' + minutes;\n  return hours;\n}\n\n\nfunction latepoint_minutes_to_hours(time) {\n  var army_clock = latepoint_is_army_clock();\n\n  var hours = Math.floor(time / 60);\n  if (!army_clock && hours > 12) hours = hours - 12;\n  return hours;\n}\n\n\nfunction latepoint_am_or_pm(minutes) {\n  if(latepoint_is_army_clock()) return '';\n  return (minutes < 720) ? 'am' : 'pm';\n}\n\nfunction latepoint_hours_and_minutes_to_minutes(hours_and_minutes, ampm) {\n  var hours_and_minutes_arr = hours_and_minutes.split(':');\n  var hours = hours_and_minutes_arr[0];\n  var minutes = hours_and_minutes_arr[1];\n  if(ampm == \"pm\" && hours<12) hours = parseInt(hours)+12;\n  if(ampm == \"am\" && hours==12) hours = 0;\n  minutes = parseInt(minutes) + (hours * 60);\n  return minutes;\n}\n\nfunction latepoint_get_time_system(){\n  return latepoint_helper.time_system;\n}\n\nfunction latepoint_is_army_clock(){\n  return (latepoint_get_time_system() == '24');\n}\n\nfunction latepoint_minutes_to_hours_and_minutes(time) {\n  var army_clock = latepoint_is_army_clock();\n  var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '%02d:%02d';\n\n  var hours = Math.floor(time / 60);\n  if(!army_clock && (hours > 12)) hours = hours - 12;\n  var minutes = time % 60;\n  return sprintf(format, hours, minutes);\n}\n","function latepoint_generate_form_message_html(messages, status){\n  var message_html = '<div class=\"os-form-message-w status-' + status + '\"><ul>';\n  if(Array.isArray(messages)){\n    messages.forEach(function(message){\n      message_html+= '<li>' + message + '</li>';\n    });\n  }else{\n    message_html+= '<li>' + messages + '</li>';\n  }\n  message_html+= '</ul></div>';\n  return message_html;\n}\n\nfunction latepoint_clear_form_messages($form){\n  $form.find('.os-form-message-w').remove();\n}\n\nfunction latepoint_show_data_in_lightbox(message, extra_classes = ''){\n  jQuery('.latepoint-lightbox-w').remove();\n  var lightbox_css_classes = 'latepoint-lightbox-w latepoint-w ';\n  if(extra_classes) lightbox_css_classes+= extra_classes;\n  jQuery('body').append('<div class=\"'+ lightbox_css_classes +'\"><div class=\"latepoint-lightbox-i\">' + message + '<a href=\"#\" class=\"latepoint-lightbox-close\"><i class=\"latepoint-icon latepoint-icon-x\"></i></a></div><div class=\"latepoint-lightbox-shadow\"></div></div>');\n  jQuery('body').addClass('latepoint-lightbox-active');\n}\n\n\n\n// DOCUMENT READY\njQuery(document).ready(function( $ ) {\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  /* \n    Ajax buttons action\n  */\n  $('.latepoint').on('click', 'button[data-os-action], a[data-os-action], div[data-os-action], span[data-os-action]', function(e){\n    var $this = $(this);\n    if($this.data('os-prompt') && !confirm($this.data('os-prompt'))) return false;\n    var params = $(this).data('os-params');\n    if($(this).data('os-source-of-params')){\n      params = $($(this).data('os-source-of-params')).find('select, input, textarea').serialize();\n    }\n    var return_format = $this.data('os-return-format') ? $this.data('os-return-format') : 'json'\n    var data = { action: 'latepoint_route_call', route_name: $(this).data('os-action'), params: params, return_format: return_format } \n    $this.addClass('os-loading');\n    $.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        if(response.status === \"success\"){\n          if($this.data('os-output-target') == 'lightbox'){\n            latepoint_show_data_in_lightbox(response.message, $this.data('os-lightbox-classes'));\n          }else if($this.data('os-output-target') == 'side-panel'){\n            $('.latepoint-side-panel-w').remove();\n            $('body').append('<div class=\"latepoint-side-panel-w\"><div class=\"latepoint-side-panel-i\">' + response.message + '</div><div class=\"latepoint-side-panel-shadow\"></div></div>');\n          }else if($this.data('os-success-action') == 'reload'){\n            latepoint_add_notification(response.message);\n            location.reload();\n            return;\n          }else if($this.data('os-success-action') == 'redirect'){\n            if($this.data('os-redirect-to')){\n              latepoint_add_notification(response.message);\n              window.location.replace($this.data('os-redirect-to'));\n            }else{\n              window.location.replace(response.message); \n            }\n            return;\n          }else if($this.data('os-output-target') && $($this.data('os-output-target')).length){\n            if($this.data('os-output-target-do') == 'append'){\n              $($this.data('os-output-target')).append(response.message);\n            }else{\n              $($this.data('os-output-target')).html(response.message);\n            }\n          }else{\n            if($this.data('os-before-after') == 'before'){\n              $this.before(response.message);\n            }else if($this.data('os-before-after') == 'before'){\n              $this.after(response.message);\n            }else{\n              latepoint_add_notification(response.message);\n            }\n          }\n          if($this.data('os-after-call')){\n            var func_name = $this.data('os-after-call');\n            if($this.data('os-pass-this')){\n              window[func_name]($this);\n            }else if($this.data('os-pass-response')){\n              window[func_name](response);\n            }else{\n              window[func_name]();\n            }\n          }\n          $this.removeClass('os-loading');\n        }else{\n          $this.removeClass('os-loading');\n          if($this.data('os-output-target') && $($this.data('os-output-target')).length){\n            $($this.data('os-output-target')).prepend(latepoint_generate_form_message_html(response.message, 'error'));\n          }else{\n            alert(response.message);\n          }\n        }\n      }\n    });\n    return false;\n  });\n\n\n  $('.latepoint').on('click', 'form[data-os-action] button[type=\"submit\"]', function(e){\n    $(this).addClass('os-loading');\n  });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  /* \n    Form ajax submit action\n  */\n  $('.latepoint').on('submit', 'form[data-os-action]', function(e){\n    e.preventDefault(); // prevent native submit\n    var $form = $(this);\n    var form_data = $form.serialize();\n    var data = { action: 'latepoint_route_call', route_name: $(this).data('os-action'), params: form_data, return_format: 'json' }\n    $form.find('button[type=\"submit\"]').addClass('os-loading');\n    $.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $form.find('button[type=\"submit\"].os-loading').removeClass('os-loading');\n        latepoint_clear_form_messages($form);\n        if(response.status === \"success\"){\n          if($form.data('os-success-action') == 'reload'){\n            latepoint_add_notification(response.message);\n            location.reload();\n            return;\n          }else if($form.data('os-success-action') == 'redirect'){\n            if($form.data('os-redirect-to')){\n              latepoint_add_notification(response.message);\n              window.location.replace($form.data('os-redirect-to'));\n            }else{\n              window.location.replace(response.message);\n            }\n            return;\n          }else if($form.data('os-output-target') && $($form.data('os-output-target')).length){\n            $($form.data('os-output-target')).html(response.message);\n          }else{\n            if(response.message == 'redirect'){\n              window.location.replace(response.url);\n            }else{\n              latepoint_add_notification(response.message);\n              $form.prepend(latepoint_generate_form_message_html(response.message, 'success'));\n            }\n          }\n          if($form.data('os-record-id-holder') && response.record_id){\n            $form.find('[name=\"' + $form.data('os-record-id-holder') + '\"]').val(response.record_id)\n          }\n          if($form.data('os-after-call')){\n            var func_name = $form.data('os-after-call');\n            if($form.data('os-pass-response')){\n              window[func_name](response);\n            }else{\n              window[func_name]();\n            }\n          }\n          $('button.os-loading').removeClass('os-loading');\n        }else{\n          $('button.os-loading').removeClass('os-loading');\n          if($form.data('os-show-errors-as-notification')){\n            latepoint_add_notification(response.message, 'error');\n          }else{\n            $form.prepend(latepoint_generate_form_message_html(response.message, 'error'));\n            $([document.documentElement, document.body]).animate({\n                scrollTop: ($form.find(\".os-form-message-w\").offset().top - 30)\n            }, 200);\n          }\n        }\n        if(response.form_values_to_update){\n          $.each(response.form_values_to_update, function(name, value){\n            $form.find('[name=\"'+ name +'\"]').val(value);\n          });\n        }\n      }\n    });\n    return false;\n  });\n});","function latepoint_add_notification(message, message_type = 'success'){\n\tvar wrapper = jQuery('body').find('.os-notifications');\n\tif(!wrapper.length){\n\t\tjQuery('body').append('<div class=\"os-notifications\"></div>');\n\t\twrapper = jQuery('body').find('.os-notifications');\n\t}\n\tif(wrapper.find('.item').length > 0) wrapper.find('.item:first-child').remove();\n\twrapper.append('<div class=\"item item-type-'+ message_type +'\">' + message + '<span class=\"os-notification-close\"><i class=\"latepoint-icon latepoint-icon-x\"></i></span></div>');\n}","function latepoint_mask_timefield($elem){\n\tif(jQuery().inputmask){\n\t  $elem.inputmask({\n\t      'mask': '99:99',\n\t      'placeholder': 'HH:MM'\n\t  });\n\t}\n}\n\nfunction latepoint_mask_phone($elem){\n\tif(latepoint_is_phone_masking_enabled() && jQuery().inputmask) $elem.inputmask(latepoint_get_phone_format());\n}\n\n\nfunction latepoint_get_phone_format(){\n  return latepoint_helper.phone_format;\n}\n\nfunction latepoint_is_phone_masking_enabled(){\n\treturn (latepoint_helper.enable_phone_masking == 'yes');\n}\n\nfunction latepoint_show_booking_end_time(){\n\treturn (latepoint_helper.show_booking_end_time == 'yes');\n}\n\nfunction latepoint_init_form_masks(){\n\tif(latepoint_is_phone_masking_enabled()) latepoint_mask_phone(jQuery('.os-mask-phone'));\n}\n\nfunction latepoint_get_paypal_payment_amount($booking_form_element){\n\tvar payment_portion = $booking_form_element.find('input[name=\"booking[payment_portion]\"]').val();\n\tvar payment_amount = (payment_portion == 'deposit') ? $booking_form_element.find('.lp-paypal-btn-trigger').data('deposit-amount') : $booking_form_element.find('.lp-paypal-btn-trigger').data('full-amount');\n\treturn payment_amount;\n}","function latepoint_load_addons_info(){\n  var $addons_info_wrapper = jQuery('.addons-info-holder');\n  $addons_info_wrapper.addClass('os-loading');\n  var route = $addons_info_wrapper.data('route');\n\n  var data = { action: 'latepoint_route_call', route_name: route, params: '', return_format: 'json' }\n  jQuery.ajax({ type : \"post\", dataType : \"json\", url : latepoint_helper.ajaxurl, data : data,\n    success: function(response){\n      $addons_info_wrapper.removeClass('os-loading');\n      if(response.status === \"success\"){\n        if(response.message){\n          $addons_info_wrapper.html(response.message);\n        }else{\n          $addons_info_wrapper.html('Something is wrong. Try refreshing the page.')\n        }\n      }else{\n        alert(response.message, 'error');\n      }\n    }\n  });\n}\n\n\nfunction latepoint_check_for_updates(){\n  if(jQuery('.version-log-w').length){\n    var $log_wrapper = jQuery('.version-log-w');\n    $log_wrapper.addClass('os-loading');\n    var route = $log_wrapper.data('route');\n\n    var data = { action: 'latepoint_route_call', route_name: route, params: '', return_format: 'json' }\n    jQuery.ajax({ type : \"post\", dataType : \"json\", url : latepoint_helper.ajaxurl, data : data,\n      success: function(response){\n        $log_wrapper.removeClass('os-loading');\n        if(response.status === \"success\"){\n          $log_wrapper.html(response.message);\n        }else{\n          alert(response.message, 'error');\n        }\n      }\n    });\n  }\n  if(jQuery('.version-status-info').length){\n\n    var $version_info_wrapper = jQuery('.version-status-info');\n    $version_info_wrapper.addClass('os-loading');\n    var route = $version_info_wrapper.data('route');\n\n    var data = { action: 'latepoint_route_call', route_name: route, params: '', return_format: 'json' }\n    jQuery.ajax({ type : \"post\", dataType : \"json\", url : latepoint_helper.ajaxurl, data : data,\n      success: function(response){\n        $version_info_wrapper.removeClass('os-loading');\n        if(response.status === \"success\"){\n          $version_info_wrapper.html(response.message);\n        }else{\n          alert(response.message, 'error');\n        }\n      }\n    });\n  }\n  if(jQuery('.addons-info-holder').length){\n    latepoint_load_addons_info();\n  }\n}\n\n\n// DOCUMENT READY\njQuery(document).ready(function( $ ) {\n  latepoint_check_for_updates();\n\n\n  // Install addon button click\n  jQuery('.addons-info-holder').on('click', '.os-addon-action-btn', function(){\n    var $install_btn = jQuery(this);\n    $install_btn.addClass('os-loading');\n\n    var data = { action: 'latepoint_route_call', route_name: $install_btn.data('route-name'), params: { addon_name: $install_btn.data('addon-name'), addon_path: $install_btn.data('addon-path') }, layout: 'none', return_format: 'json'};\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $install_btn.removeClass('os-loading');\n        if(response.status === \"success\"){\n          latepoint_add_notification(response.message);\n          latepoint_load_addons_info();\n        }else{\n          if(response.code == '404'){\n            latepoint_show_data_in_lightbox(response.message);\n          }else{\n            alert(response.message);\n          }\n        }\n      }\n    });\n    return false;\n  });\n});","// @codekit-prepend \"os-time.js\";\n// @codekit-prepend \"os-select.js\";\n// @codekit-prepend \"os-actions.js\";\n// @codekit-prepend \"os-notifications.js\";\n// @codekit-prepend \"os-shared.js\";\n// @codekit-prepend \"os-updates.js\";\n// @codekit-prepend \"os-google-calendar.js\";\n\n\nfunction latepoint_init_side_menu(){\n  jQuery('.menu-toggler').on('click', function(){\n    var layout_style = 'full';\n    if(jQuery('.latepoint-side-menu-w').hasClass('side-menu-full')){\n      layout_style = 'compact';\n      jQuery('.latepoint-side-menu-w').addClass('side-menu-compact').removeClass('side-menu-full');\n    }else{\n      jQuery('.latepoint-side-menu-w').addClass('side-menu-full').removeClass('side-menu-compact');\n    }\n    var route_name = jQuery(this).data('route');\n    var data = { action: 'latepoint_route_call', route_name: route_name, params: { menu_layout_style: layout_style }, layout: 'none', return_format: 'json' }\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n      }\n    });\n    return false;\n  });\n}\n\nfunction latepoint_init_grouped_bookings_form(){\n  \n}\n\nfunction latepoint_quick_booking_customer_selected(){\n  jQuery('.customer-info-w').removeClass('selecting').addClass('selected');\n}\n  \nfunction latepoint_custom_day_removed($elem){\n  $elem.closest('.custom-day-work-period').fadeOut(300, function(){ jQuery(this).remove()});\n}\n\nfunction latepoint_booking_synced($elem){\n  $elem.closest('.os-booking-tiny-box').removeClass('not-synced').addClass('is-synced');\n  latepoint_sync_update_progress(false);\n}\n\nfunction latepoint_gcal_event_deleted($elem){\n  $elem.closest('.os-booking-tiny-box').remove();\n}\n\nfunction latepoint_booking_unsynced($elem){\n  $elem.closest('.os-booking-tiny-box').addClass('not-synced').removeClass('is-synced');\n  latepoint_sync_update_progress(true);\n}\n\n\nfunction latepoint_count_active_connections($connection_wrapper){\n  var connected_services_count = $connection_wrapper.find('.connection-children-list li.active').length;\n  var all_services_count = $connection_wrapper.find('.connection-children-list li').length;\n  if(connected_services_count == all_services_count){\n    connected_services_count = jQuery('.selected-connections').data('all-text');\n    jQuery('.selected-connections').removeClass('not-all-selected');\n  }else{\n    connected_services_count = connected_services_count + '/' + all_services_count;\n    jQuery('.selected-connections').addClass('not-all-selected');\n    $connection_wrapper.closest('.white-box').find('.os-select-all-toggler').prop('checked', false);\n  }\n  $connection_wrapper.find('.selected-connections strong').text(connected_services_count);\n}\n\nfunction latepoint_custom_field_removed($elem){\n  $elem.closest('.os-custom-field-form').remove();\n}\n\nfunction latepoint_coupon_removed($elem){\n  $elem.closest('.os-coupon-form').remove();\n}\n\nfunction latepoint_reminder_removed($elem){\n  $elem.closest('.os-reminder-form').remove();\n}\n\nfunction latepoint_init_custom_fields_form(){\n  jQuery('.latepoint-content-w').on('click', '.os-custom-field-form-info', function(){\n    jQuery(this).closest('.os-custom-field-form').toggleClass('os-is-editing');\n    return false;\n  });\n  jQuery('.latepoint-content-w').on('change', 'select.os-custom-field-type-select', function(){\n    if(jQuery(this).val() == 'select'){\n      jQuery(this).closest('.os-custom-field-form').find('.os-custom-field-select-values').show();\n    }else{\n      jQuery(this).closest('.os-custom-field-form').find('.os-custom-field-select-values').hide();\n    }\n  });\n  jQuery('.latepoint-content-w').on('keyup', '.os-custom-field-name-input', function(){\n    jQuery(this).closest('.os-custom-field-form').find('.os-custom-field-name').text(jQuery(this).val());\n  });\n}\n\n\nfunction latepoint_init_coupons_form(){\n  jQuery('.latepoint-content-w').on('click', '.os-coupon-form-info', function(){\n    jQuery(this).closest('.os-coupon-form').toggleClass('os-is-editing');\n    return false;\n  });\n  jQuery('.latepoint-content-w').on('change', 'select.os-coupon-medium-select', function(){\n    if(jQuery(this).val() == 'email'){\n      jQuery(this).closest('.os-coupon-form').find('.os-coupon-email-subject').show();\n    }else{\n      jQuery(this).closest('.os-coupon-form').find('.os-coupon-email-subject').hide();\n    }\n  });\n  jQuery('.latepoint-content-w').on('keyup', '.os-coupon-name-input', function(){\n    jQuery(this).closest('.os-coupon-form').find('.os-coupon-name').text(jQuery(this).val());\n  });\n  jQuery('.latepoint-content-w').on('keyup', '.os-coupon-code-input', function(){\n    jQuery(this).closest('.os-coupon-form').find('.os-coupon-code').text(jQuery(this).val());\n  });\n}\n\nfunction latepoint_init_reminders_form(){\n  jQuery('.latepoint-content-w').on('click', '.os-reminder-form-info', function(){\n    jQuery(this).closest('.os-reminder-form').toggleClass('os-is-editing');\n    return false;\n  });\n  jQuery('.latepoint-content-w').on('change', 'select.os-reminder-medium-select', function(){\n    if(jQuery(this).val() == 'email'){\n      jQuery(this).closest('.os-reminder-form').find('.os-reminder-email-subject').show();\n    }else{\n      jQuery(this).closest('.os-reminder-form').find('.os-reminder-email-subject').hide();\n    }\n  });\n  jQuery('.latepoint-content-w').on('keyup', '.os-reminder-name-input', function(){\n    jQuery(this).closest('.os-reminder-form').find('.os-reminder-name').text(jQuery(this).val());\n  });\n}\n\nfunction latepoint_custom_field_saved($elem){\n}\n\nfunction latepoint_init_custom_day_schedule(){\n\n\n  jQuery('.period-type-selector').on('change', function(){\n    jQuery(this).closest('.custom-day-calendar').attr('data-period-type', jQuery(this).val());\n    jQuery('.custom-day-calendar').attr('data-picking', 'start').data('picking', 'start');\n    if(jQuery(this).val() == 'range'){\n      jQuery('.custom-day-calendar-head .calendar-heading').text(jQuery('.custom-day-calendar-head .calendar-heading').data('label-start'));\n      jQuery('.custom-day-calendar #start_custom_date').focus();\n    }else{\n      jQuery('.custom-day-calendar .os-day.selected').removeClass('selected');\n      jQuery('.latepoint-lightbox-footer').hide();\n      jQuery('.custom-day-calendar-head .calendar-heading').text(jQuery('.custom-day-calendar-head .calendar-heading').data('label-single'));\n    }\n  });\n\n\n  jQuery('#custom_day_calendar_month, #custom_day_calendar_year').on('change', function(){\n    var $calendar = jQuery('.custom-day-calendar-month');\n    var route_name = $calendar.data('route');\n    $calendar.addClass('os-loading');\n    var target_date_string = jQuery('#custom_day_calendar_year').val() + '-' + jQuery('#custom_day_calendar_month').val() + '-01';\n    var data = { action: 'latepoint_route_call', route_name: route_name, params: { target_date_string: target_date_string }, layout: 'none', return_format: 'json' }\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        $calendar.removeClass('os-loading');\n        if(data.status === \"success\"){\n          $calendar.html(data.message);\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n\n\n\n  jQuery('.custom-day-calendar').on('focus', '#start_custom_date', function(){\n    jQuery('.custom-day-calendar-head .calendar-heading').text(jQuery('.custom-day-calendar-head .calendar-heading').data('label-start'));\n    jQuery('.custom-day-calendar').attr('data-picking', 'start').data('picking', 'start');\n  });\n\n  jQuery('.custom-day-calendar').on('focus', '#end_custom_date', function(){\n    jQuery('.custom-day-calendar-head .calendar-heading').text(jQuery('.custom-day-calendar-head .calendar-heading').data('label-end'));\n    jQuery('.custom-day-calendar').attr('data-picking', 'end').data('picking', 'end');\n  });\n\n  jQuery('.custom-day-calendar').on('click', '.os-day', function(){\n    var $this = jQuery(this);\n    $this.closest('.custom-day-calendar').find('.os-day.selected').removeClass('selected');\n    $this.addClass('selected');\n\n    if(jQuery('.custom-day-calendar').data('picking') == 'start'){\n      jQuery('.custom-day-settings-w #start_custom_date').val($this.data('date')).trigger('keyup');\n      if(jQuery('.period-type-selector').val() == 'range'){\n        jQuery('.custom-day-calendar #end_custom_date').focus();\n        if(!jQuery('.custom-day-calendar #end_custom_date').val()) return false;\n      }\n    }else{\n      jQuery('.custom-day-settings-w #end_custom_date').val($this.data('date')).trigger('keyup');\n    }\n    jQuery('.latepoint-lightbox-footer').slideDown(200);\n    if(jQuery('.custom-day-calendar').data('show-schedule') == 'yes') jQuery('.latepoint-lightbox-w').removeClass('hide-schedule');\n    return false;\n  });\n}\n\nfunction latepoint_init_updates_page(){\n  \n}\n\nfunction latepoint_init_monthly_calendar_navigation(){\n  jQuery('.calendar-location-selector').on('change', function(){\n    latepoint_reload_daily_agents_page();\n  });\n\n  jQuery('.os-month-next-btn').on('click', function(){\n    // check if next month is already loaded\n    if(jQuery('.os-monthly-calendar-days-w.active + .os-monthly-calendar-days-w').length){\n      jQuery('.os-monthly-calendar-days-w.active').removeClass('active').next('.os-monthly-calendar-days-w').addClass('active');\n      latepoint_calendar_set_month_label();\n    }else{\n      var $btn = jQuery(this);\n      $btn.addClass('os-loading');\n      var load_month_route_name = jQuery(this).data('route');\n      var $calendar_element = jQuery('.os-monthly-calendar-days-w.active');\n      var calendar_layout = $calendar_element.data('calendar-layout');\n      var calendar_year = $calendar_element.data('calendar-year');\n      var calendar_month = $calendar_element.data('calendar-month');\n      if(calendar_month == 12){\n        calendar_year = calendar_year + 1;\n        calendar_month = 1;\n      }else{\n        calendar_month = calendar_month + 1;\n      }\n      var selected_agent_id = jQuery('.agent-select').val();\n      var selected_service_id = jQuery('.service-select').val();\n      var booking_info = {  target_date_string: calendar_year + '-' + calendar_month + '-1', \n                            agent_id: selected_agent_id, \n                            service_id: selected_service_id, \n                            allow_full_access: true, \n                            calendar_layout: calendar_layout \n                          };\n      if(jQuery('.cc-location-selector select').length && jQuery('.cc-location-selector select').val()){\n        booking_info.location_id = jQuery('.cc-location-selector select').val();\n      }\n      var data = {  action: 'latepoint_route_call', \n                    route_name: load_month_route_name, \n                    params: booking_info, \n                    layout: 'none', \n                    return_format: 'json' \n                  };\n      jQuery.ajax({\n        type : \"post\",\n        dataType : \"json\",\n        url : latepoint_helper.ajaxurl,\n        data : data,\n        success: function(data){\n\n          $btn.removeClass('os-loading');\n          if(data.status === \"success\"){\n            jQuery('.os-months').append(data.message);\n            jQuery('.os-monthly-calendar-days-w.active').removeClass('active').next('.os-monthly-calendar-days-w').addClass('active');\n            latepoint_calendar_set_month_label();\n          }else{\n            // console.log(data.message);\n          }\n        }\n      });\n    }\n    return false;\n  });\n  jQuery('.os-month-today-btn').on('click', function(){\n    jQuery(this).addClass('os-loading');\n    latepoint_reload_daily_agents_page(jQuery(this).data('date'))\n    return false;\n  });\n\n  jQuery('.os-month-prev-btn').on('click', function(){\n    // check if prev month is already loaded\n    if(jQuery('.os-monthly-calendar-days-w.active').prev('.os-monthly-calendar-days-w').length){\n      jQuery('.os-monthly-calendar-days-w.active').removeClass('active').prev('.os-monthly-calendar-days-w').addClass('active');\n      latepoint_calendar_set_month_label();\n    }else{\n      var $btn = jQuery(this);\n      $btn.addClass('os-loading');\n      var load_month_route_name = jQuery(this).data('route');\n      var $calendar_element = jQuery('.os-monthly-calendar-days-w.active').last();\n      var calendar_layout = $calendar_element.data('calendar-layout');\n      var calendar_year = $calendar_element.data('calendar-year');\n      var calendar_month = $calendar_element.data('calendar-month');\n      if(calendar_month == 1){\n        calendar_year = calendar_year - 1;\n        calendar_month = 12;\n      }else{\n        calendar_month = calendar_month - 1;\n      }\n      var selected_agent_id = jQuery('.agent-select').val();\n      var selected_service_id = jQuery('.service-select').val();\n      var booking_info = {  target_date_string: calendar_year + '-' + calendar_month + '-1', \n                            agent_id: selected_agent_id, \n                            service_id: selected_service_id, \n                            allow_full_access: true, \n                            calendar_layout: calendar_layout \n                          };\n      if(jQuery('.cc-location-selector select').length && jQuery('.cc-location-selector select').val()){\n        booking_info.location_id = jQuery('.cc-location-selector select').val();\n      }\n      var data = {  action: 'latepoint_route_call', \n                    route_name: load_month_route_name, \n                    params: booking_info, \n                    layout: 'none', \n                    return_format: 'json' \n                  };\n      jQuery.ajax({\n        type : \"post\",\n        dataType : \"json\",\n        url : latepoint_helper.ajaxurl,\n        data : data,\n        success: function(data){\n          $btn.removeClass('os-loading');\n          if(data.status === \"success\"){\n            jQuery('.os-months').prepend(data.message);\n            jQuery('.os-monthly-calendar-days-w.active').removeClass('active').prev('.os-monthly-calendar-days-w').addClass('active');\n            latepoint_calendar_set_month_label();\n          }else{\n            // console.log(data.message);\n          }\n        }\n      });\n    }\n    return false;\n  });\n}\n\nfunction latepoint_calendar_set_month_label(){\n  jQuery('.os-current-month-label .current-month').text(jQuery('.os-monthly-calendar-days-w.active').data('calendar-month-label'));\n  jQuery('.os-current-month-label .current-year').text(jQuery('.os-monthly-calendar-days-w.active').data('calendar-year'));\n}\n\n\nfunction latepoint_init_element_togglers(){\n  jQuery('[data-toggle-element]').on('click', function(){\n    var $this = jQuery(this);\n    $this.closest('.os-form-checkbox-group').toggleClass('is-checked');\n    jQuery($this.data('toggle-element')).toggle();\n  });\n}\n\n\nfunction latepoint_init_color_picker(){\n  if(jQuery('.latepoint-color-picker').length){\n    jQuery('.latepoint-color-picker').each(function(){\n      var color = jQuery(this).data('color');\n      var picker = jQuery(this)[0];\n      var $picker_wrapper = jQuery(this).closest('.latepoint-color-picker-w');\n      Pickr.create({\n        el: picker,\n        default: color,\n        comparison: false,\n        useAsButton: true,\n        components: {\n\n            // Main components\n            preview: true,\n            opacity: false,\n            hue: true,\n\n            // Input / output Options\n            interaction: {\n                input: false,\n                clear: false,\n                save: true\n            }\n        },\n        onChange(hsva, instance) {\n          $picker_wrapper.find('.os-form-control').val(hsva.toHEX().toString());\n        },\n      });\n    });\n  }\n}\n\n\nfunction latepoint_lightbox_close(){\n  jQuery('body').removeClass('latepoint-lightbox-active');\n  jQuery('.latepoint-lightbox-w').remove();\n}\n\nfunction latepoint_reload_select_service_categories(){\n  jQuery('.service-selector-adder-field-w').each(function(){\n    var $trigger_elem = jQuery(this);\n    var route = jQuery('.service-selector-adder-field-w').find('select').data('select-source');\n    var data = { action: 'latepoint_route_call', route_name: route, params: '', return_format: 'json' }\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $trigger_elem.removeClass('os-loading');\n        if(response.status === \"success\"){\n          latepoint_lightbox_close();\n          $trigger_elem.find('select').html(response.message);\n          $trigger_elem.find('select option:last').attr('selected', 'selected');\n        }else{\n          alert(response.message, 'error');\n        }\n      }\n    });\n  });\n}\n\nfunction latepoint_wizard_item_editing_cancelled(){\n  jQuery('.os-wizard-setup-w').removeClass('is-sub-editing');\n  jQuery('.os-wizard-footer').show();\n  jQuery('.os-wizard-footer .os-wizard-next-btn').show();\n}\n\nfunction latepoint_load_quick_availability($trigger_elem, custom_agent_id = false, start_date = false, load_more_days = false, load_prev_days = false){\n  $trigger_elem.addClass('os-loading');\n  var route = jQuery('.trigger-quick-availability').data('route');\n  var $quick_booking_form = jQuery('.quick-booking-form-w');\n\n  if(custom_agent_id) $quick_booking_form.find('select[name=\"booking[agent_id]\"]').val(custom_agent_id);\n  if(!$quick_booking_form.find('input[name=\"booking[service_id]\"]').val()){\n    $quick_booking_form.find('.os-services-select-field-w .service-option:first').click();\n  }\n\n  var form_data = $quick_booking_form.find('form').serialize();\n  if(start_date) form_data+= '&start_date='+start_date;\n  if(load_more_days || load_prev_days) form_data+= '&show_days_only=true';\n  if(load_prev_days) form_data+= '&previous_days=true';\n  var data = { action: 'latepoint_route_call', route_name: route, params: form_data, return_format: 'json' }\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      $trigger_elem.removeClass('os-loading');\n      if(response.status === \"success\"){\n        if(load_more_days){\n          $trigger_elem.parent('.os-availability-next-w').remove();\n          jQuery('.latepoint-side-panel-w .os-availability-days').append(response.message);\n        }else if(load_prev_days){\n          $trigger_elem.parent('.os-availability-prev-w').remove();\n          jQuery('.latepoint-side-panel-w .os-availability-days').prepend(response.message);\n          jQuery('.latepoint-side-panel-w .os-availability-days').scrollTop(30);\n        }else{\n          if(jQuery('.latepoint-side-panel-w .side-sub-panel').length){\n            jQuery('.latepoint-side-panel-w .side-sub-panel').replaceWith(response.message);\n          }else{\n            jQuery('.latepoint-side-panel-w').append(response.message);\n          }\n          jQuery('.latepoint-side-panel-w .os-availability-days').scrollTop(30);\n          latepoint_init_quick_availability_form();\n        }\n      }else{\n        alert(response.message, 'error');\n      }\n    }\n  });\n}\n\nfunction latepoint_init_quick_availability_form(){\n  var selected_start_date = jQuery('.quick-booking-form-w input#booking_start_date').val();\n  var selected_start_time = jQuery('.quick-booking-form-w input[name=\"booking[start_time][formatted_value]\"]').val();\n  var selected_start_time_ampm = jQuery('.quick-booking-form-w input[name=\"booking[start_time][ampm]\"]').val();\n  var selected_start_time_minutes = latepoint_hours_and_minutes_to_minutes(selected_start_time, selected_start_time_ampm);\n  jQuery('.quick-availability-per-day-w .os-availability-days').find('.agent-timeslot[data-formatted-date=\"'+ selected_start_date +'\"][data-minutes=\"' + selected_start_time_minutes + '\"]').addClass('selected');\n  jQuery('.quick-availability-per-day-w').on('click', '.load-more-quick-availability', function(){\n    latepoint_load_quick_availability(jQuery(this), false, jQuery(this).data('start-date'), true);\n    return false;\n  });\n  jQuery('.quick-availability-per-day-w').on('click', '.load-prev-quick-availability', function(){\n    latepoint_load_quick_availability(jQuery(this), false, jQuery(this).data('start-date'), false, true);\n    return false;\n  });\n  jQuery('.quick-availability-per-day-w select[name=\"booking[agent_id]\"]').on('change', function(){\n    latepoint_load_quick_availability(jQuery('.trigger-quick-availability'), jQuery(this).val());\n  });\n  jQuery('.os-time-group label').on('click', function(){\n    jQuery(this).closest('.os-time-group').find('.os-form-control').focus();\n  });\n  jQuery('.quick-availability-per-day-w').on('click', '.fill-booking-time', function(){\n    jQuery('.os-availability-days .agent-timeslot.selected').removeClass('selected');\n    jQuery(this).addClass('selected');\n    var date = jQuery(this).data('date');\n    var formatted_date = jQuery(this).data('formatted-date');\n    var minutes = jQuery(this).data('minutes');\n    var service_duration = jQuery('.os-services-select-field-w .service-option-selected').data('duration');\n    var $form_w = jQuery('.quick-booking-form-w');\n    $form_w.find('input[name=\"booking[start_date]\"]').val(formatted_date);\n    var start_minutes = minutes;\n    var start_hours_and_minutes = latepoint_minutes_to_hours_and_minutes(start_minutes);\n\n    if(start_minutes >= 720){\n      $form_w.find('.quick-start-time-w .time-pm').click();\n    }else{\n      $form_w.find('.quick-start-time-w .time-am').click();\n    }\n\n    $form_w.find('input[name=\"booking[start_time][formatted_value]\"]').val(start_hours_and_minutes);\n    latepoint_set_booking_end_time();\n    $form_w.find('.ws-period').addClass('animate-filled-in');\n    setTimeout(function(){\n      $form_w.find('.ws-period').removeClass('animate-filled-in');\n    }, 500)\n  });\n}\n\n\nfunction latepoint_init_work_period_form(){\n  latepoint_mask_timefield(jQuery('.os-time-input-w .os-mask-time'));\n}\n\nfunction latepoint_close_side_panel(){\n  jQuery('.latepoint-side-panel-w').remove();\n}\n\nfunction latepoint_reload_after_booking_save(){\n  jQuery('.bookings-daily-agents .os-day-current.selected').first().click();\n  if(jQuery('.calendar-week-agent-w').length) latepoint_load_calendar(jQuery('.calendar-start-date').val(), jQuery('.calendar-agent-selector').val(), jQuery('.calendar-location-selector').val());\n  jQuery('.os-widget').each(function(){\n    latepoint_reload_widget(jQuery(this));\n  });\n  if(jQuery('table.os-reload-on-booking-update').length) latepoint_filter_table(jQuery('table.os-reload-on-booking-update'), jQuery('table.os-reload-on-booking-update'));\n  latepoint_close_side_panel();\n}\n\nfunction latepoint_init_quick_booking_form(){\n  latepoint_lightbox_close();\n\n  jQuery('.os-late-select').lateSelect();\n  jQuery('.save-transaction-btn').on('click', function(){\n    var $save_transaction_btn = jQuery(this);\n    var $transaction_box = $save_transaction_btn.closest('.quick-add-transaction-box-w');\n    var params = { amount: $transaction_box.find('input[name=\"transaction[amount]\"]').val(), \n                date: $transaction_box.find('input[name=\"transaction[created_at]\"]').val(), \n                token: $transaction_box.find('input[name=\"transaction[token]\"]').val(), \n                processor: $transaction_box.find('select[name=\"transaction[processor]\"]').val(), \n                payment_method: $transaction_box.find('select[name=\"transaction[payment_method]\"]').val(),\n                booking_id: jQuery('.quick-booking-form-w').find('input[name=\"booking[id]\"]').val(),\n                customer_id: jQuery('.quick-booking-form-w').find('input[name=\"booking[customer_id]\"]').val()};\n\n    var data = { action: 'latepoint_route_call', route_name: $transaction_box.data('route'), params: params, return_format: 'json' } \n    $save_transaction_btn.addClass('os-loading');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $save_transaction_btn.removeClass('os-loading');\n        if(response.status === \"success\"){\n          jQuery('.quick-transactions-list-w').append(response.message);\n          $transaction_box.hide();\n          jQuery('.trigger-add-transaction-btn').show();\n        }else{\n          alert(response.message);\n        }\n      }\n    });\n    return false;\n  });\n\n  jQuery('.trigger-price-recalculate').on('click', function(){\n    latepoint_recalculate_booking_price(jQuery(this));\n    return false;\n  });\n\n  jQuery('.trigger-add-transaction-btn').on('click', function(){\n    jQuery('.quick-add-transaction-box-w').show().find('input[name=\"transaction[amount]\"]').focus();\n    jQuery('.trigger-add-transaction-btn').hide();\n    return false;\n  });\n\n  jQuery('.trigger-cancel-add-transaction-btn').on('click', function(){\n    jQuery('.quick-add-transaction-box-w').hide();\n    jQuery('.trigger-add-transaction-btn').show();\n    return false;\n  });\n\n  jQuery('.trigger-quick-availability').on('click', function(){\n    latepoint_load_quick_availability(jQuery('.open-quick-availability-btn'));\n    return false;\n  });\n  jQuery('.quick-booking-form-w input[name=\"booking[start_time][formatted_value]\"]').on('change', function(){\n    latepoint_set_booking_end_time();\n  });\n\n\n\n  latepoint_mask_timefield(jQuery('.latepoint-side-panel-w .os-mask-time'));\n  latepoint_mask_phone(jQuery('.latepoint-side-panel-w .os-mask-phone'));\n\n  jQuery('.customers-selector-search-input').keyup(function(){\n    var $queryInput = jQuery(this);\n    var query = $queryInput.val().toLowerCase();\n    if(query == $queryInput.data('current-query')) return;\n\n    // Search \n    $queryInput.closest('.customers-selector-search-w').addClass('os-loading');\n    $queryInput.data('searching-query', query);\n    setTimeout(function(){\n      if(query != jQuery('.customers-selector-search-input').data('searching-query')) return;\n      var data = { action: 'latepoint_route_call', route_name: $queryInput.data('route'), params: {query: query}, return_format: 'json' } \n      jQuery.ajax({\n        type : \"post\",\n        dataType : \"json\",\n        url : latepoint_helper.ajaxurl,\n        data : data,\n        success: function(response){\n          if($queryInput.data('searching-query') != query) return;\n          $queryInput.closest('.customers-selector-search-w').removeClass('os-loading');\n          if(response.status === \"success\"){\n            $queryInput.data('current-query', query);\n            jQuery('.quick-booking-form-w .customers-options-list').html(response.message);\n          }else{\n            console.log(response.message);\n          }\n        }\n      });\n    }, 300, query, $queryInput);\n });\n\n\n  \n  jQuery('.latepoint-side-panel-w').on('change', '.agent-selector', function(){\n    latepoint_apply_agent_selector_change();\n  });\n  jQuery('.latepoint-side-panel-w').on('change', 'select[name=\"booking[location_id]\"]', function(){\n    latepoint_apply_agent_selector_change();\n  });\n  jQuery('.latepoint-side-panel-w').on('change', 'select[name=\"booking[total_attendies]\"]', function(){\n    latepoint_apply_agent_selector_change();\n  });\n\n  jQuery('.latepoint-side-panel-w').on('change', '.os-affects-duration', function(){\n    latepoint_set_booking_end_time();\n    if(jQuery('.quick-availability-per-day-w').length){\n      latepoint_load_quick_availability(jQuery('.trigger-quick-availability'));\n    }\n  });\n\n\n  jQuery('.latepoint-side-panel-w').on('click', '.services-options-list .service-option', function(){\n    var selected_option_html = jQuery(this).html();\n    var $selected_option = jQuery(this).closest('.os-services-select-field-w').find('.service-option-selected');\n    $selected_option.html(selected_option_html)\n                    .data('id', jQuery(this).data('id'))\n                    .data('duration', jQuery(this).data('duration'))\n                    .data('buffer-before', jQuery(this).data('buffer-before'))\n                    .data('buffer-after', jQuery(this).data('buffer-after'))\n                    .data('capacity-min', jQuery(this).data('capacity-min'))\n                    .data('capacity-max', jQuery(this).data('capacity-max'))\n                    .data('extra-durations', jQuery(this).data('extra-durations'));\n    jQuery(this).closest('.os-services-select-field-w').find('.service-option.selected').removeClass('selected');\n    jQuery(this).addClass('selected').closest('.os-services-select-field-w').removeClass('active');\n    latepoint_apply_service_selector_change();\n    return false;\n  });\n\n}\n\n\nfunction latepoint_reload_widget($widget_elem){\n  var form_data = $widget_elem.find('select, input').serialize();\n  var data = { action: 'latepoint_route_call', route_name: $widget_elem.data('os-reload-action'), params: form_data, return_format: 'json' } \n  $widget_elem.addClass('os-loading');\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      $widget_elem.removeClass('os-loading');\n      if(response.status === \"success\"){\n        var $updated_widget_elem = jQuery(response.message);\n        $updated_widget_elem.removeClass('os-widget-animated');\n        $widget_elem = $widget_elem.replaceWith($updated_widget_elem);\n        latepoint_init_daterangepicker($updated_widget_elem.find('.os-date-range-picker'));\n        if($widget_elem.hasClass('os-widget-top-agents')) latepoint_init_circles_charts();\n        if($widget_elem.hasClass('os-widget-daily-bookings')){\n          latepoint_init_daily_bookings_chart();\n          latepoint_init_donut_charts();\n        }\n      }else{\n        alert(response.message);\n      }\n    }\n  });\n}\n\nfunction latepoint_load_calendar(target_date, agent_id, location_id = false){\n  var route_name = jQuery('.calendar-week-agent-w').data('calendar-action');\n  jQuery('.calendar-week-agent-w').addClass('os-loading');\n  var params_arr = {target_date: target_date, agent_id: agent_id};\n  if(location_id) params_arr.location_id = location_id;\n  var data = { action: 'latepoint_route_call', route_name: route_name, params: jQuery.param(params_arr), return_format: 'json' }\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      if(response.status === \"success\"){\n        jQuery('.calendar-week-agent-w').html(response.message).removeClass('os-loading');\n        jQuery('.calendar-load-target-date.os-loading').removeClass('os-loading');\n      }else{\n        alert(response.message);\n      }\n    }\n  });\n}\n\nfunction latepoint_recalculate_booking_price($trigger){\n  $trigger.addClass('os-loading');\n  var $quick_edit_form = $trigger.closest('form.booking-quick-edit-form');\n  var form_data = $quick_edit_form.serialize();\n  var route = $trigger.data('route');\n  \n  var data = { action: 'latepoint_route_call', route_name: route, params: form_data, return_format: 'json' }\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      $trigger.removeClass('os-loading');\n      if(response.status === \"success\"){\n        $quick_edit_form.find('input[name=\"booking[price]\"]').val(response.message);\n        if($quick_edit_form.find('input[name=\"booking[coupon_discount]\"]').length) $quick_edit_form.find('input[name=\"booking[coupon_discount]\"]').val(response.coupon_discount);\n      }else{\n        alert(response.message);\n      }\n    }\n  });\n}\n\nfunction latepoint_complex_selector_select($connection_wrappers){\n  $connection_wrappers.each(function(){\n    jQuery(this).addClass('active');\n    jQuery(this).find('.connection-children-list li').addClass('active');\n    jQuery(this).find('.connection-child-is-connected').val('yes');\n    latepoint_count_active_connections(jQuery(this));\n  });\n}\n\nfunction latepoint_complex_selector_deselect($connection_wrappers){\n  $connection_wrappers.each(function(){\n    jQuery(this).removeClass('active');\n    jQuery(this).removeClass('show-customize-box');\n    jQuery(this).find('.connection-children-list li.active').removeClass('active');\n    jQuery(this).find('.connection-child-is-connected').val('no');\n    latepoint_count_active_connections(jQuery(this));\n  });\n}\n\n\nfunction latepoint_apply_agent_selector_change(){\n  if(jQuery('.quick-availability-per-day-w').length){\n    latepoint_load_quick_availability(jQuery('.trigger-quick-availability'));\n  }\n}\n\nfunction latepoint_set_booking_end_time(){\n  var $quick_edit_form = jQuery('form.booking-quick-edit-form');\n  var booking_duration = 0;\n  var service_duration = $quick_edit_form.find('.os-service-durations select').val();\n  booking_duration = booking_duration + service_duration;\n  if($quick_edit_form.find('select[name=\"temp_service_extras_ids\"] option:selected').length){\n    $quick_edit_form.find('select[name=\"temp_service_extras_ids\"] option:selected').each(function(){\n      var extra_duration = Number(jQuery(this).data('duration'));\n      var $extra_quantity_input = jQuery(this).closest('.lateselect-w').find('.ls-item[data-value=\"' + jQuery(this).val() + '\"]').find('.os-late-quantity-selector-input');\n      if($extra_quantity_input.length) extra_duration = Number(extra_duration) * Number($extra_quantity_input.val());\n      booking_duration = Number(booking_duration) + Number(extra_duration);\n    });\n  }\n\n  var start_time = $quick_edit_form.find('input[name=\"booking[start_time][formatted_value]\"]').val();\n\n  if(start_time){\n    var start_time_ampm = $quick_edit_form.find('input[name=\"booking[start_time][ampm]\"]').val();\n    var start_time_minutes = latepoint_hours_and_minutes_to_minutes(start_time, start_time_ampm);\n    var end_time_minutes = parseInt(start_time_minutes) + parseInt(booking_duration);\n    var end_time_ampm = (end_time_minutes >= 720) ? 'pm' : 'am';\n    var end_hours_and_minutes = latepoint_minutes_to_hours_and_minutes(end_time_minutes);\n\n    $quick_edit_form.find('input[name=\"booking[end_time][formatted_value]\"]').val(end_hours_and_minutes);\n    $quick_edit_form.find('.quick-end-time-w .time-ampm-select.time-' + end_time_ampm).click();\n    $quick_edit_form.find('input[name=\"booking[end_time][formatted_value]\"]').closest('.os-form-group').addClass('has-value');\n  }\n}\n\nfunction latepoint_apply_service_selector_change(){\n\n  var $selected_service = jQuery('.os-services-select-field-w .service-option-selected');\n  var service_id = $selected_service.data('id');\n  var buffer_before = $selected_service.data('buffer-before');\n  var buffer_after = $selected_service.data('buffer-after');\n  var default_duration = $selected_service.data('duration');\n  var min_capacity = $selected_service.data('capacity-min');\n  var max_capacity = $selected_service.data('capacity-max');\n\n  var extra_durations = $selected_service.data('extra-durations');\n\n  var $quick_edit_form = jQuery('form.booking-quick-edit-form');\n  $quick_edit_form.find('input[name=\"booking[buffer_before]\"]').val(buffer_before).closest('.os-form-group').addClass('has-value');\n  $quick_edit_form.find('input[name=\"booking[buffer_after]\"]').val(buffer_after).closest('.os-form-group').addClass('has-value');\n  $quick_edit_form.find('input[name=\"booking[service_id]\"]').val(service_id).closest('.os-form-group').addClass('has-value');\n\n  var options = '<option value=\"'+ default_duration +'\">' + default_duration + ' ' + latepoint_helper.string_minutes + '</option>';\n  if(extra_durations.length){\n    jQuery.each(extra_durations, function(index, value){\n      options+= '<option value=\"'+ value.duration +'\">' + value.duration + ' ' + latepoint_helper.string_minutes + '</option>';\n    });\n    $quick_edit_form.find('.os-service-durations').show();\n  }else{\n    $quick_edit_form.find('.os-service-durations').hide();\n  }\n\n  jQuery('.booking-total-attendies-selector-w .capacity-info strong').text(max_capacity);\n  var attendies_options_html = '';\n  for(var i=1;i<=max_capacity;i++){\n    attendies_options_html+= '<option value=\"' + i + '\">' + i + '</option>';\n  }\n  var selected_attendies = Math.min(jQuery('.booking-total-attendies-selector-w select').val(), max_capacity);\n  jQuery('.booking-total-attendies-selector-w select').html(attendies_options_html).val(selected_attendies);\n  if(max_capacity > 1){\n    jQuery('.booking-total-attendies-selector-w').show();\n  }else{\n    jQuery('.booking-total-attendies-selector-w').hide();\n  }\n\n  $quick_edit_form.find('.os-service-durations select').html(options);\n\n  latepoint_set_booking_end_time();\n  if(jQuery('.quick-availability-per-day-w').length){\n    latepoint_load_quick_availability(jQuery('.trigger-quick-availability'));\n  }\n  \n}\n\n\nfunction latepoint_init_daily_bookings_chart(){\n  if(typeof Chart !== 'undefined' && jQuery('#chartDailyBookings').length){\n\n    var $dailyBookingsChart = jQuery('#chartDailyBookings');\n    var dailyBookingsLabels = $dailyBookingsChart.data('chart-labels').toString().split(',');\n    var dailyBookingsValues = $dailyBookingsChart.data('chart-values').toString().split(',').map(Number);\n    var dailyBookingsChartMax = Math.max.apply(Math, dailyBookingsValues) + 5;\n\n\n\n    var fontFamily = latepoint_helper.font_family;\n    // set defaults\n    Chart.defaults.global.defaultFontFamily = fontFamily;\n    Chart.defaults.global.defaultFontSize = 18;\n    Chart.defaults.global.defaultFontStyle = '400';\n\n    Chart.defaults.global.tooltips.titleFontFamily = fontFamily;\n    Chart.defaults.global.tooltips.titleFontSize = 14;\n    Chart.defaults.global.tooltips.titleFontColor = 'rgba(255,255,255,0.6)';\n    Chart.defaults.global.tooltips.backgroundColor = '#000';\n    Chart.defaults.global.tooltips.titleFontStyle = '400';\n    Chart.defaults.global.tooltips.titleMarginBottom = 1;\n    Chart.defaults.global.tooltips.bodyFontFamily = fontFamily;\n    Chart.defaults.global.tooltips.bodyFontSize = 24;\n    Chart.defaults.global.tooltips.bodyFontStyle = '500';\n    Chart.defaults.global.tooltips.displayColors = false;\n    Chart.defaults.global.tooltips.xPadding = 10;\n    Chart.defaults.global.tooltips.yPadding = 8;\n    Chart.defaults.global.tooltips.yAlign = 'bottom';\n    Chart.defaults.global.tooltips.xAlign = 'center';\n    Chart.defaults.global.tooltips.cornerRadius = 0;\n    Chart.defaults.global.tooltips.intersect = false;\n\n    var ctx = $dailyBookingsChart[0].getContext(\"2d\");\n    var gradientStroke = ctx.createLinearGradient(500, 0, 100, 0);\n    gradientStroke.addColorStop(0, '#587ef8');\n    gradientStroke.addColorStop(1, '#1e4fef');\n\n    var gradientFill = ctx.createLinearGradient(0, 200, 0, 50);\n    gradientFill.addColorStop(0, \"rgba(163, 165, 243, 0)\");\n    gradientFill.addColorStop(1, \"rgba(163, 165, 243, 0.1)\");\n\n    // line chart data\n    var chartDailyBookingsData = {\n      labels: dailyBookingsLabels,\n      datasets: [{\n          label: \"\",\n          fill: true,\n          lineTension: 0.3,\n          backgroundColor: gradientFill,\n          // backgroundColor: \"transparent\",\n          borderColor: \"#0937ff\",\n          borderWidth: 2,\n          borderCapStyle: 'butt',\n          borderDash: [],\n          borderDashOffset: 0.0,\n          borderJoinStyle: 'miter',\n          pointBorderColor: \"#fbfcff\",\n          borderColor: gradientStroke,\n          pointBackgroundColor: \"#0937ff\",\n          pointRadius: 0,\n          pointBorderWidth: 2,\n          pointHoverRadius: 5,\n          pointHoverBorderWidth: 2,\n          pointHoverBackgroundColor: \"#0937ff\",\n          pointHoverBorderColor: \"#fff\",\n          pointHitRadius: 15,\n          data: dailyBookingsValues,\n          spanGaps: false\n        }]\n    };\n\n    // line chart init\n    var chartDailyBookings = new Chart($dailyBookingsChart, {\n      type: 'line',\n      data: chartDailyBookingsData,\n      options: {\n        layout: {\n          padding: {\n            top: 20,\n            left: 20,\n            right: 20,\n            bottom: 20\n          }\n        },\n        responsive: true,\n        maintainAspectRatio: false,\n        legend: {\n            display: false\n        },\n        scales: {\n          xAxes: [{\n            display: false,\n            ticks: {\n              fontSize: '10',\n              fontColor: '#8894AF',\n            },\n            gridLines: {\n                color: 'rgba(0,0,0,0)',\n                zeroLineColor: 'rgba(0,0,0,0)'\n            }\n          }],\n          yAxes: [{\n            gridLines: {\n                color: 'rgba(0,0,0,0.0)',\n                zeroLineColor: 'rgba(0,0,0,0.0)'\n            },\n            display: false,\n            ticks: {\n              beginAtZero: false,\n              suggestedMax: dailyBookingsChartMax,\n              fontSize: '10',\n              fontColor: '#8894AF',\n            }\n          }]\n        }\n      }\n    });\n  }\n}\n\nfunction latepoint_reload_daily_agents_page(target_date = false){\n  jQuery('.bookings-daily-agents').addClass('os-loading');\n  var selected_agent_id = jQuery('.agent-select').val();\n  var selected_service_id = jQuery('.service-select').val();\n  target_date = target_date ? target_date : jQuery('.daily-agent-monthly-calendar-w .os-day.selected').data('date');\n  var route = jQuery('.bookings-daily-agents').data('route');\n\n  var params_arr = {target_date: target_date};\n  if(selected_agent_id) params_arr.selected_agent_id = selected_agent_id;\n  if(selected_service_id) params_arr.selected_service_id = selected_service_id;\n  if(jQuery('.cc-location-selector select').length && jQuery('.cc-location-selector select').val()) params_arr.location_id = jQuery('.cc-location-selector select').val();\n  var data = {  action: 'latepoint_route_call', \n                route_name: route, \n                params: jQuery.param(params_arr), \n                layout: 'none', \n                return_format: 'json' };\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(data){\n      if(data.status === \"success\"){\n        jQuery('.bookings-daily-agents').replaceWith(data.message);\n        latepoint_init_donut_charts();\n        latepoint_init_daily_agent_calendar();\n        latepoint_init_monthly_calendar_navigation();\n      }else{\n        // console.log(data.message);\n      }\n      jQuery('.bookings-daily-agents').removeClass('os-loading');\n    }\n  });\n}\n\n\nfunction latepoint_init_daily_agent_calendar(){\n  jQuery('select.agent-select, select.service-select').on('change', function(){\n    latepoint_reload_daily_agents_page();\n  });\n  jQuery('.daily-agent-monthly-calendar-w').on('click', '.os-day', function(){\n    var $calendar = jQuery(this).closest('.daily-agent-monthly-calendar-w');\n\n    jQuery('.daily-agent-monthly-calendar-w .os-day.selected').removeClass('selected');\n    jQuery(this).addClass('selected');\n    if($calendar.hasClass('horizontal-calendar')){\n      $calendar.find('.current-month').text(jQuery(this).data('nice-date'));\n    }\n    latepoint_reload_daily_agents_page();\n  });\n}\n\n\n\nfunction latepoint_init_donut_charts(){\n  if(typeof Chart !== 'undefined' && jQuery('.os-donut-chart').length){\n    var fontFamily = latepoint_helper.font_family;\n    // set defaults\n    Chart.defaults.global.defaultFontFamily = fontFamily;\n    Chart.defaults.global.defaultFontSize = 18;\n    Chart.defaults.global.defaultFontStyle = '400';\n\n    Chart.defaults.global.tooltips.titleFontFamily = fontFamily;\n    Chart.defaults.global.tooltips.titleFontSize = 14;\n    Chart.defaults.global.tooltips.titleFontColor = 'rgba(255,255,255,0.6)';\n    Chart.defaults.global.tooltips.backgroundColor = '#000';\n    Chart.defaults.global.tooltips.titleFontStyle = '400';\n    Chart.defaults.global.tooltips.titleMarginBottom = 1;\n    Chart.defaults.global.tooltips.bodyFontFamily = fontFamily;\n    Chart.defaults.global.tooltips.bodyFontSize = 24;\n    Chart.defaults.global.tooltips.bodyFontStyle = '500';\n    Chart.defaults.global.tooltips.displayColors = false;\n    Chart.defaults.global.tooltips.xPadding = 10;\n    Chart.defaults.global.tooltips.yPadding = 8;\n    Chart.defaults.global.tooltips.yAlign = 'bottom';\n    Chart.defaults.global.tooltips.xAlign = 'center';\n    Chart.defaults.global.tooltips.cornerRadius = 0;\n    Chart.defaults.global.tooltips.intersect = false;\n    jQuery('.os-donut-chart').each(function(index){\n      var chart_colors = jQuery(this).data('chart-colors').toString().split(',');\n      var chart_labels = jQuery(this).data('chart-labels').toString().split(',');\n      var chart_values = jQuery(this).data('chart-values').toString().split(',').map(Number);\n      var $chart_canvas = jQuery(this);\n      var chartDonut = new Chart($chart_canvas, {\n          type: 'doughnut',\n          data: {\n            labels: chart_labels,\n            datasets: [{\n              data: chart_values,\n              backgroundColor: chart_colors,\n              hoverBackgroundColor: chart_colors,\n              borderWidth: 0,\n              hoverBorderColor: 'transparent'\n            }]\n          },\n          options: {\n            layout: {\n              padding: {\n                top: 40\n              }\n            },\n            tooltips: {\n              callbacks: {\n                title: function(tooltipItem, data) {\n                  return data['labels'][tooltipItem[0]['index']];\n                },\n                label: function(tooltipItem, data) {\n                  return data['datasets'][0]['data'][tooltipItem['index']];\n                },\n              }\n            },\n            legend: {\n                display: false\n            },\n            animation:{\n                animateScale:true\n            },\n            cutoutPercentage: 80,\n            responsive: false,\n            maintainAspectRatio: true, \n          }\n      });\n    });\n  }\n}\n\n\nfunction latepoint_init_circles_charts(){\n  jQuery('.circle-chart').each(function(index){\n    var chart_elem_id = jQuery(this).prop('id');\n    var max_value = jQuery(this).data('max-value');\n    var chart_value = jQuery(this).data('chart-value');\n    var chart_color = jQuery(this).data('chart-color');\n    var chart_color_fade = jQuery(this).data('chart-color-fade');\n    var myCircle = Circles.create({\n      id:                  chart_elem_id,\n      radius:              25,\n      value:               chart_value,\n      maxValue:            max_value,\n      width:               2,\n      text:                function(value){return Math.round(value);},\n      colors:              [chart_color, chart_color_fade],\n      duration:            200,\n      wrpClass:            'circles-wrp',\n      textClass:           'circles-text',\n      valueStrokeClass:    'circles-valueStroke',\n      maxValueStrokeClass: 'circles-maxValueStroke',\n      styleWrapper:        true,\n      styleText:           true\n    });\n\n  });\n\n\n}\n\n\nfunction latepoint_random_text(length){\n   var result           = '';\n   var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n   var charactersLength = characters.length;\n   for ( var i = 0; i < length; i++ ) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n   }\n   return result;\n}\n\nfunction latepoint_get_order_for_service_categories(){\n\n}\n\n\nfunction latepoint_init_daterangepicker($elem){\n  $elem.each(function(){\n    // DATERANGEPICKER\n    var picker_start_time = jQuery(this).find('input[name=\"date_from\"], .os-datepicker-date-from').val();\n    var picker_end_time = jQuery(this).find('input[name=\"date_to\"], .os-datepicker-date-to').val();\n    var locale = {};\n    if(jQuery(this).data('can-be-cleared')) locale = { cancelLabel: jQuery(this).data('clear-btn-label')};\n\n\n    moment.locale(latepoint_helper.wp_locale);\n\n    jQuery(this).daterangepicker({\n      opens: 'left',\n      singleDatePicker: (jQuery(this).data('single-date') == 'yes'),\n      startDate: (picker_start_time) ? moment(picker_start_time) : moment(),\n      endDate: (picker_end_time) ? moment(picker_end_time) : moment(),\n      locale: locale\n    });\n  });\n\n  $elem.on('cancel.daterangepicker', function(ev, picker) {\n    if(picker.element.data('can-be-cleared')){\n      picker.element.find('input[name=\"date_from\"], .os-datepicker-date-from').val('');\n      picker.element.find('input[name=\"date_to\"], .os-datepicker-date-to').val('');\n      picker.element.find('span.range-picker-value').text(picker.element.data('no-value-label'));\n      if(picker.element.hasClass('os-table-filter-datepicker')){\n        latepoint_filter_table(picker.element.closest('table'), picker.element.closest('.os-form-group'));\n      }\n    }\n  });\n\n  $elem.on('apply.daterangepicker', function(ev, picker) {\n    if(picker.element.data('single-date') == 'yes'){\n      picker.element.find('.range-picker-value').text(picker.startDate.format('ll'));\n    }else{\n      picker.element.find('.range-picker-value').text(picker.startDate.format('ll') + ' - ' + picker.endDate.format('ll'));\n    }\n    picker.element.find('input[name=\"date_from\"], .os-datepicker-date-from').attr('value', picker.startDate.format('YYYY-MM-DD'));\n    picker.element.find('input[name=\"date_to\"], .os-datepicker-date-to').attr('value', picker.endDate.format('YYYY-MM-DD'));\n    if(picker.element.closest('.os-widget').length){\n      latepoint_reload_widget(picker.element.closest('.os-widget'));\n    }\n    if(picker.element.hasClass('os-table-filter-datepicker')){\n      latepoint_filter_table(picker.element.closest('table'), picker.element.closest('.os-form-group'));\n    }\n  });\n}\n\nfunction latepoint_recalculate_items_count_in_category(){\n  jQuery('.os-category-items-count').each(function(){\n    var number_of_items = jQuery(this).closest('.os-category-parent-w').find('.item-in-category-w').length;\n    jQuery(this).find('span').text(number_of_items);\n  });\n}\n\nfunction latepoint_remove_agent_box($remove_btn){\n  var $agent_box = $remove_btn.closest('.agent-box-w');\n  $agent_box.fadeOut(300, function(){ jQuery(this).remove(); });\n}\n\nfunction latepoint_remove_service_box($remove_btn){\n  var $service_box = $remove_btn.closest('.service-box-w');\n  $service_box.fadeOut(300, function(){ jQuery(this).remove(); });\n}\n\nfunction latepoint_init_monthly_view(){\n  if(!jQuery('.calendar-month-agents-w').length) return;\n  if(jQuery('.ma-days-with-bookings-w').length){\n    // var ps = new PerfectScrollbar(jQuery('.ma-days-with-bookings-w')[0]);\n  }\n\n  jQuery('#monthly_calendar_month_select, #monthly_calendar_year_select, #monthly_calendar_location_select').on('change', function(){\n    var $calendar = jQuery('.calendar-month-agents-w');\n    var route_name = $calendar.data('route');\n    $calendar.addClass('os-loading');\n    var params = { month: jQuery('#monthly_calendar_month_select').val(), year: jQuery('#monthly_calendar_year_select').val() };\n    if(jQuery('#monthly_calendar_location_select').length && jQuery('#monthly_calendar_location_select').val()) params.location_id = jQuery('#monthly_calendar_location_select').val();\n    var data = { action: 'latepoint_route_call', route_name: route_name, params: params, layout: 'none', return_format: 'json' }\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        $calendar.removeClass('os-loading');\n        if(data.status === \"success\"){\n          $calendar.html(data.message);\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n}\n\n\nfunction latepoint_init_copy_on_click_elements(){\n  \n  jQuery('.os-click-to-copy').mouseenter(function() {\n    var $this = jQuery(this);\n    var position_info = $this.position();\n    var width = jQuery(this).outerWidth();\n    var position_left = position_info.left + width + 5;\n    var position_top = position_info.top + 3;\n    if($this.data('copy-tooltip-position') == 'left'){\n      position_left = position_left - width - 5;\n      position_top = position_top + $this.outerHeight();\n    }\n    jQuery(this).after('<div class=\"os-click-to-copy-prompt\" style=\"top: '+position_top+'px; left: '+position_left+'px;\">' + latepoint_helper.click_to_copy_prompt + '</div>');\n  }).mouseleave(function() {\n    jQuery(this).nextAll('.os-click-to-copy-prompt').remove();\n  });\n  jQuery('.os-click-to-copy').on('click', function(){\n    var $this = jQuery(this);\n    $this.nextAll('.os-click-to-copy-prompt').hide();\n    var $tempElement = jQuery(\"<input>\");\n    jQuery(\"body\").append($tempElement);\n    var text_to_copy = $this.is('input') ? $this.val() : $this.text();\n    $tempElement.val(text_to_copy).select();\n    document.execCommand(\"Copy\");\n    $tempElement.remove();\n\n    var position_info = $this.position();\n    var width = $this.outerWidth();\n    var position_left = position_info.left + width + 5;\n    var position_top = position_info.top + 3;\n\n    if($this.data('copy-tooltip-position') == 'left'){\n      position_left = position_left - width - 5;\n      position_top = position_top + $this.outerHeight();\n    }\n    var $done_prompt = jQuery('<div class=\"os-click-to-copy-done\" style=\"top: '+position_top+'px; left: '+position_left+'px;\">' + latepoint_helper.click_to_copy_done + '</div>');\n    $done_prompt.insertAfter($this).animate({\n      opacity: 0,\n      left: (position_left + 20),\n    }, 600);\n    setTimeout(function(){\n      $this.nextAll('.os-click-to-copy-done').remove();\n      $this.nextAll('.os-click-to-copy-prompt').show();\n    }, 800);\n  });\n}\n\nfunction latepoint_sync_update_progress(is_removed){\n  var synced_total = jQuery('.os-sync-stat-tiles .os-tile-value span').text();\n  if(is_removed){\n    synced_total = parseInt(synced_total) - 1;\n  }else{\n    synced_total = parseInt(synced_total) + 1;\n  }\n  jQuery('.os-sync-stat-tiles .os-tile-value span').text(synced_total);\n  jQuery('.os-tile-hor-progress-chart').data('value', synced_total);\n  var chart_total = jQuery('.os-tile-hor-progress-chart').data('total');\n  var chart_value = jQuery('.os-tile-hor-progress-chart').data('value');\n  if(chart_total > 0){\n    var percent = Math.round(chart_value / chart_total * 100);\n    jQuery('.os-tile-hor-progress-chart-value').css('width', percent + '%');\n  }\n}\n\nfunction latepoint_remove_first_synced_booking_with_google(){\n  var $trigger = jQuery('.os-booking-tiny-box.is-synced:first .os-booking-sync-google-trigger');\n  if(!$trigger.length || jQuery('.remove-all-bookings-from-google-trigger').hasClass('stop-removing')){\n    jQuery('.remove-all-bookings-from-google-trigger').removeClass('os-removing').removeClass('stop-removing').find('span').text(jQuery('.remove-all-bookings-from-google-trigger').data('label-remove'));\n    return false;\n  }\n\n  var route = $trigger.data('os-remove-action');\n  var params = $trigger.data('os-params');\n  var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n  $trigger.addClass('os-loading');\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      if(response.status === \"success\"){\n        $trigger.closest('.os-booking-tiny-box').removeClass('is-synced').addClass('not-synced');\n        $trigger.removeClass('os-loading');\n        latepoint_sync_update_progress(true);\n        latepoint_remove_first_synced_booking_with_google();\n      }\n    }\n  });\n}\n\n\nfunction latepoint_sync_next_booking_with_google(){\n  var $trigger = jQuery('.os-booking-tiny-box.not-synced:first .os-booking-sync-google-trigger');\n  if(!$trigger.length || jQuery('.sync-all-bookings-to-google-trigger').hasClass('stop-syncing')){\n    jQuery('.sync-all-bookings-to-google-trigger').removeClass('os-syncing').removeClass('stop-syncing').find('span').text(jQuery('.sync-all-bookings-to-google-trigger').data('label-sync'));\n    return false;\n  }\n\n  var route = $trigger.data('os-action');\n  var params = $trigger.data('os-params');\n  var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n  $trigger.addClass('os-loading');\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(response){\n      if(response.status === \"success\"){\n        $trigger.closest('.os-booking-tiny-box').removeClass('not-synced').addClass('is-synced');\n        $trigger.removeClass('os-loading');\n        latepoint_sync_update_progress(false);\n        latepoint_sync_next_booking_with_google();\n      }\n    }\n  });\n}\n\nfunction latepoint_init_reminder_form(){\n  if(typeof tinymce !== 'undefined' && jQuery('.os-reminder-form:last-child textarea').length) tinymce.execCommand( 'mceAddEditor', true, jQuery('.os-reminder-form:last-child textarea').attr('id') );\n}\n\nfunction latepoint_filter_table($table, $filter_elem, reset_page = true){\n  $filter_elem.addClass('os-loading');\n  var filter_params = $table.find('.os-table-filter').serialize();\n  var $table_w = $table.closest('.table-with-pagination-w');\n  if(reset_page){\n    $table_w.find('select.pagination-page-select').val(1);\n  }else{\n    filter_params+= '&page_number='+$table_w.find('select.pagination-page-select').val();\n  }\n  var route = $table.data('route');\n  var data = { action: 'latepoint_route_call', route_name: route, params: filter_params, layout: 'none', return_format: 'json' };\n  jQuery.ajax({\n    type : \"post\",\n    dataType : \"json\",\n    url : latepoint_helper.ajaxurl,\n    data : data,\n    success: function(data){\n      $filter_elem.removeClass('os-loading');\n      if(data.status === \"success\"){\n        $table.find('tbody').html(data.message);\n        if(data.total_pages && reset_page){\n          var options = '';\n          for(var i = 1; i <= data.total_pages; i++){\n            options+= '<option>'+ i +'</option>';\n          }\n          $table_w.find('select.pagination-page-select').html(options);\n        }\n        $table_w.find('.os-pagination-from').text(data.showing_from);\n        $table_w.find('.os-pagination-to').text(data.showing_to);\n        $table_w.find('.os-pagination-total').text(data.total_records);\n      }else{\n        // console.log(data.message);\n      }\n    }\n  });\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// DOCUMENT READY\njQuery(document).ready(function( $ ) {\n\n  // Google calendar\n  if(latepoint_helper.google_calendar_is_enabled && jQuery('.os-google-cal-authorize-btn').length){\n    latepoint_helper.google_calendar = new OsGoogleCalendar();\n    latepoint_helper.google_calendar.init();\n  }\n\n  // DASHBOARD\n  latepoint_init_daily_agent_calendar();\n  latepoint_init_circles_charts();\n  latepoint_init_donut_charts();\n  latepoint_init_daily_bookings_chart();\n  latepoint_init_element_togglers();\n  latepoint_init_daterangepicker(jQuery('.os-date-range-picker'));\n  latepoint_init_monthly_calendar_navigation();\n  latepoint_init_monthly_view();\n  latepoint_init_custom_fields_form();\n  latepoint_init_reminders_form();\n  latepoint_init_coupons_form();\n  latepoint_init_copy_on_click_elements();\n  latepoint_init_side_menu();\n  latepoint_init_color_picker();\n\n  jQuery('.os-select-all-toggler').on('change', function(){\n    var $connection_wrappers = jQuery(this).closest('.white-box').find('.os-complex-connections-selector .connection');\n    if($(this).is(':checked')){\n      latepoint_complex_selector_select($connection_wrappers);\n    }else{\n      latepoint_complex_selector_deselect($connection_wrappers);\n    }\n    return false;\n  });\n\n\n  jQuery('.os-main-location-selector').on('change', function(){\n    var route = jQuery(this).data('route');\n    var params = 'id=' + jQuery(this).val();\n    var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n    jQuery('.latepoint-content-w').addClass('os-loading');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        location.reload();\n      }\n    });\n  });\n\n  $('.os-service-durations-w').on('click', '.os-remove-duration', function(){\n    $(this).closest('.duration-box').slideUp(300, function(){\n      $(this).remove();\n    });\n    return false;\n  });\n\n\n  $('.menu-color-toggler').on('click', function(){\n    $('.latepoint-side-menu-w').toggleClass('dark');\n    return false;\n  });\n\n\n  $('.latepoint-mobile-top-menu-trigger').on('click', function(){\n    $(this).closest('.latepoint-all-wrapper').toggleClass('os-show-mobile-menu');\n    if($(this).closest('.latepoint-all-wrapper').hasClass('os-show-mobile-menu')){\n      $('.latepoint-side-menu-w ul.side-menu > li.has-children > a').on('click', function(){\n        $(this).closest('li').toggleClass('menu-item-sub-open-mobile');\n        return false;\n      });\n    }else{\n      $('.latepoint-side-menu-w ul.side-menu > li.has-children > a').off('click');\n    }\n    return false;\n  });\n\n  $('.latepoint-mobile-top-search-trigger-cancel').on('click', function(){\n    $(this).closest('.latepoint-all-wrapper').removeClass('os-show-mobile-search');\n    return false;\n  });\n\n  $('.latepoint-mobile-top-search-trigger').on('click', function(){\n    $(this).closest('.latepoint-all-wrapper').toggleClass('os-show-mobile-search');\n    if($(this).closest('.latepoint-all-wrapper').hasClass('os-show-mobile-search')){\n      $('.latepoint-top-search').focus();\n    }\n    return false;\n  });\n\n  $('.latepoint-content').on('click', '.os-widget-header-actions-trigger', function(){\n    $(this).closest('.os-widget-header').toggleClass('os-show-actions');\n    return false;\n  });\n\n\n  $('.sync-all-bookings-to-google-trigger').on('click', function(){\n    if($(this).hasClass('os-syncing')){\n      $(this).addClass('stop-syncing');\n      $(this).find('span').text($(this).data('label-sync'));\n    }else{\n      $(this).find('span').text($(this).data('label-cancel-sync'));\n      $(this).addClass('os-syncing');\n      latepoint_sync_next_booking_with_google();\n    }\n    return false;\n  });\n\n\n  $('.remove-all-bookings-from-google-trigger').on('click', function(){\n\n    if($(this).hasClass('os-removing')){\n      $(this).addClass('stop-removing');\n      $(this).find('span').text($(this).data('label-remove'));\n    }else{\n      if(!confirm($(this).data('os-prompt'))) return false;\n      $(this).find('span').text($(this).data('label-cancel-remove'));\n      $(this).addClass('os-removing');\n      latepoint_remove_first_synced_booking_with_google();\n    }\n    return false;\n  });\n\n  \n\n\n  jQuery('.download-csv-with-filters').on('click', function(){\n    var filter_params = jQuery(this).closest('.table-with-pagination-w').find('.os-table-filter').serialize();\n    filter_params+= '&download=csv';\n    jQuery(this).attr('href', this.href + '&' + filter_params);\n  });\n\n  $('select.pagination-page-select').on('change', function(){\n    latepoint_filter_table(jQuery(this).closest('.table-with-pagination-w').find('table'), jQuery(this).closest('.pagination-page-select-w'), false);\n  });\n\n  $('select.os-table-filter').on('change', function(){\n    latepoint_filter_table(jQuery(this).closest('table'), jQuery(this).closest('.os-form-group'));\n  });\n\n  $('input.os-table-filter').on('keyup', function(){\n    latepoint_filter_table(jQuery(this).closest('table'), jQuery(this).closest('.os-form-group'));\n  });\n\n\n  jQuery('.customize-connection-btn').on('click', function(){\n    jQuery(this).closest('.connection').toggleClass('show-customize-box');\n    return false;\n  });\n\n  jQuery('.connection-children-list').on('click', 'li', function(){\n    if(jQuery(this).hasClass('active')){\n      jQuery(this).removeClass('active');\n      jQuery(this).find('input.connection-child-is-connected').val('no');\n    }else{\n      jQuery(this).addClass('active');\n      jQuery(this).find('input.connection-child-is-connected').val('yes');\n    }\n    latepoint_count_active_connections(jQuery(this).closest('.connection'));\n    return false;\n  });\n\n  jQuery('.display-toggler-control').on('change', function(){\n    let group = jQuery(this).data('toggler-group');\n    let key = jQuery(this).val();\n    jQuery('.display-toggler-target[data-toggler-group=\"' + group + '\"]').hide();\n    jQuery('.display-toggler-target[data-toggler-group=\"' + group + '\"][data-toggler-key=\"'+ key +'\"]').show();\n    return false;\n  });\n\n  jQuery('.add-item-category-trigger').on('click', function(){\n    $('.add-item-category-box').toggle();\n    $('.os-new-item-category-form-w').toggle();\n    return false;\n  });\n\n  jQuery('.latepoint-top-search').on('keyup', function(event){\n    var $wrapper = jQuery(this).closest('.latepoint-top-search-w');\n    $wrapper.addClass('os-loading');\n    var query = jQuery(this).val();\n    if(event.keyCode == 27){\n      $wrapper.removeClass('typing');\n      jQuery('.latepoint-top-search-results-w').html('');\n      jQuery(this).val('');\n      $wrapper.removeClass('os-loading');\n      return;\n    }\n    if(query == ''){\n      $wrapper.removeClass('typing');\n      jQuery('.latepoint-top-search-results-w').html('');\n      $wrapper.removeClass('os-loading');\n      return;\n    }\n    var route = jQuery(this).data('route');\n    var params = 'query=' + query;\n    var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n    $wrapper.addClass('typing');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        if(!$wrapper.hasClass('typing')) return;\n        $wrapper.removeClass('os-loading');\n        if(data.status === \"success\"){\n          jQuery('.latepoint-top-search-results-w').html(data.message);\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n\n\n\n  jQuery('.add-custom-step-btn').on('click', function(e){\n    var $step = jQuery('.empty-step-w .step-w').clone();\n    var step_name = 'step_' + latepoint_random_text(6);\n    var step_order_number = $('.steps-ordering-w .step-w').length;\n    $step.find('input[name=\"step[name]\"]').val(step_name);\n    $step.find('input[name=\"step[order_number]\"]').val(step_order_number);\n\n    $step.addClass('editing').attr('data-step-name', step_name);\n    jQuery('.steps-ordering-w').append($step);\n    return false;\n  });\n\n\n\n  jQuery('.appointment-status-selector').on('click', function(e){\n    e.stopPropagation();\n  });\n\n  jQuery('.latepoint-show-license-details').on('click', function(e){\n    jQuery(this).closest('.active-license-info').find('.license-form-w').slideToggle(200);\n    return false;\n  });\n\n  jQuery('.aba-button-w').on('click', function(e){\n    e.stopPropagation();\n    var confirm_message = (jQuery(this).hasClass('aba-approve')) ? latepoint_helper.approve_confirm : latepoint_helper.reject_confirm;\n    if(confirm(confirm_message)){\n      var $box = jQuery(this).closest('.appointment-box-large');\n      $box.find('.appointment-status-selector select').val(jQuery(this).data('status')).change();\n    }\n    return false;\n  });\n\n\n  jQuery('select.agent_google_calendar_selector').on('change', function(e){\n    var route = $(this).data('route');\n    var calendar_id = $(this).val();\n    var agent_id = $(this).data('agent-id');\n    var data = { action: 'latepoint_route_call', \n                  route_name: route, \n                  params: {calendar_id: calendar_id, agent_id: agent_id}, \n                  layout: 'none', \n                  return_format: 'json' }\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        if(data.status === \"success\"){\n          latepoint_add_notification(data.message);\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n\n\n  jQuery('.appointment-status-selector select').on('change', function(e){\n    var $wrapper = jQuery(this).closest('.appointment-status-selector');\n    var route = $wrapper.data('route');\n    var booking_id = $wrapper.data('booking-id');\n    var status = jQuery(this).val();\n    jQuery(this).closest('.appointment-box-large').attr('class', 'appointment-box-large status-' + status);\n    var params = 'id=' + booking_id + '&status=' + status;\n    var data = { action: 'latepoint_route_call', route_name: route, params: params, layout: 'none', return_format: 'json' };\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        if(data.status === \"success\"){\n          latepoint_add_notification(data.message);\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n\n  jQuery('body').on('click', '.open-template-variables-panel', function(){\n    jQuery('.latepoint-template-variables').toggleClass('is-visible');\n    return false;\n  });\n\n  jQuery('body').on('click', '.close-template-variables-panel', function(){\n    jQuery('.latepoint-template-variables').removeClass('is-visible');\n    return false;\n  });\n\n  jQuery('body').on('click', '.os-notifications .os-notification-close', function(){\n    jQuery(this).closest('.item').remove();\n    return false;\n  });\n\n\n  jQuery('body').on('keyup', '.os-form-group .os-form-control', function(){\n    if(jQuery(this).val()){\n      jQuery(this).closest('.os-form-group').addClass('has-value');\n    }else{\n      jQuery(this).closest('.os-form-group').removeClass('has-value');\n    }\n  });\n\n\n\n  jQuery('.os-wizard-setup-w, .latepoint-settings-w, .custom-schedule-wrapper').on('click', '.ws-head', function(){\n    var $schedule_wrapper = jQuery(this).closest('.weekday-schedule-w');\n    $schedule_wrapper.toggleClass('is-editing').removeClass('day-off');\n    $schedule_wrapper.find('.os-toggler').removeClass('off');\n    $schedule_wrapper.find('input.is-active').val(1);\n  });\n\n\n  latepoint_mask_timefield(jQuery('.os-mask-time'));\n  latepoint_mask_phone(jQuery('.os-mask-phone'));\n\n  jQuery('.latepoint').on('click', '.wizard-add-edit-item-trigger', function(e){\n    jQuery(this).addClass('os-loading');\n    var add_item_route_name = jQuery(this).data('route');\n    var item_info = {  };\n    if(jQuery(this).data('id')){\n      item_info.id = jQuery(this).data('id');\n    }\n    var data = { action: 'latepoint_route_call', route_name: add_item_route_name, params: item_info, layout: 'none', return_format: 'json' };\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        jQuery('.wizard-add-edit-item-trigger.os-loading').removeClass('os-loading');\n        if(data.status === \"success\"){\n          jQuery('.os-wizard-step-content-i').html(data.message);\n          jQuery('.os-wizard-setup-w').addClass('is-sub-editing');\n          jQuery('.os-wizard-footer').hide();\n        }else{\n          // console.log(data.message);\n        }\n      }\n    });\n  });\n\n\n\n\n  // WIZARD NEXT BUTTON CLICK LOGIC\n  jQuery('.latepoint').on('click', '.os-wizard-next-btn', function(){\n    var $next_btn = jQuery(this);\n    $next_btn.addClass('os-loading');\n    var current_step = jQuery('#wizard_current_step').val();\n    var params = 'current_step='+current_step;\n    if(jQuery('.os-wizard-setup-w form.weekday-schedules-w').length){\n      params+= '&'+ jQuery('.os-wizard-setup-w form.weekday-schedules-w .weekday-schedule-w:not(.day-off) input').serialize();\n    }\n    var data = { action: 'latepoint_route_call', route_name: jQuery(this).data('route-name'), params: params, layout: 'none', return_format: 'json'};\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        $next_btn.removeClass('os-loading');\n        if(data.status === \"success\"){\n          jQuery('#wizard_current_step').val(data.step_name);\n          jQuery('.os-wizard-setup-w').attr('class', 'os-wizard-setup-w step-' + data.step_name);\n          jQuery('.os-wizard-step-content').html(data.message);\n          if(data.show_prev_btn){\n            jQuery('.os-wizard-prev-btn').show();\n          }else{\n            jQuery('.os-wizard-prev-btn').hide();\n          }\n          if(data.show_next_btn){\n            jQuery('.os-wizard-next-btn').show();\n          }else{\n            jQuery('.os-wizard-next-btn').hide();\n          }\n          if(!data.show_next_btn && !data.show_prev_btn){\n            jQuery('.os-wizard-footer').hide();\n          }else{\n            jQuery('.os-wizard-footer').show();\n          }\n        }\n      }\n    });\n    return false;\n  });\n\n  // WIZARD PREV BUTTON CLICK LOGIC\n  jQuery('.latepoint').on('click', '.os-wizard-prev-btn', function(){\n    var $prev_btn = jQuery(this);\n    $prev_btn.addClass('os-loading');\n    var current_step = jQuery('#wizard_current_step').val();\n    var params = 'current_step='+current_step;\n    var data = { action: 'latepoint_route_call', route_name: jQuery(this).data('route-name'), params: params, layout: 'none', return_format: 'json'};\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(data){\n        $prev_btn.removeClass('os-loading');\n        if(data.status === \"success\"){\n          jQuery('#wizard_current_step').val(data.step_name);\n          jQuery('.os-wizard-setup-w').attr('class', 'os-wizard-setup-w step-' + data.step_name);\n          jQuery('.os-wizard-step-content').html(data.message);\n          if(data.show_prev_btn){\n            jQuery('.os-wizard-prev-btn').show();\n          }else{\n            jQuery('.os-wizard-prev-btn').hide();\n          }\n          if(data.show_next_btn){\n            jQuery('.os-wizard-next-btn').show();\n          }else{\n            jQuery('.os-wizard-next-btn').hide();\n          }\n          if(!data.show_next_btn && !data.show_prev_btn){\n            jQuery('.os-wizard-footer').hide();\n          }else{\n            jQuery('.os-wizard-footer').show();\n          }\n        }\n      }\n    });\n    return false;\n  });\n\n  jQuery('.latepoint-content-w').on('change', '.os-widget .os-trigger-reload-widget', function(){\n    latepoint_reload_widget(jQuery(this).closest('.os-widget'));\n  });\n\n\n  dragula([].slice.apply(document.querySelectorAll('.os-categories-ordering-w .os-category-children')), {\n    moves: function (el, container, handle) {\n      return (handle.classList.contains('os-category-drag') || handle.classList.contains('os-category-item-drag'));\n    },\n  }).on('drop', function(el){\n    var $categories_wrapper = jQuery('.os-categories-ordering-w');\n    var category_datas = [];\n    var item_datas = [];\n\n    $categories_wrapper.find('.os-category-parent-w').each(function(index){\n      var order_number = jQuery(this).index() + 1;\n      var parent_id = jQuery(this).parent().closest('.os-category-parent-w').data('id') || 0;\n      category_datas.push({id: jQuery(this).data('id'), order_number: order_number, parent_id: parent_id});\n    });\n    $categories_wrapper.find('.item-in-category-w').each(function(index){\n      var item_order_number = jQuery(this).index() + 1;\n      var category_id = jQuery(this).closest('.os-category-parent-w').data('id') || 0;\n      item_datas.push({id: jQuery(this).data('id'), order_number: item_order_number, category_id: category_id});\n    });\n    latepoint_recalculate_items_count_in_category();\n    var data = { action: 'latepoint_route_call', route_name: $categories_wrapper.data('category-order-update-route'), params: {category_datas: category_datas, item_datas: item_datas}, return_format: 'json' } \n    $categories_wrapper.addClass('os-loading');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $categories_wrapper.removeClass('os-loading');\n        if(response.status === \"success\"){\n          // latepoint_add_notification(response.message);\n        }else{\n          alert(response.message);\n        }\n      }\n    });\n  });\n\n\n  // Custom Fields Order Dragging\n  dragula([jQuery('.os-custom-fields-ordering-w')[0]], {\n    moves: function (el, container, handle) {\n      return handle.classList.contains('os-custom-field-drag');\n    },\n  }).on('drop', function(el){\n    var custom_fields_order_data = {};\n    var $custom_fields_wrapper = jQuery('.os-custom-fields-ordering-w');\n    $custom_fields_wrapper.find('.os-custom-field-form').each(function(index){\n      var new_order_number = jQuery(this).index() + 1;\n      var $field_id = jQuery(this).find('.os-custom-field-id');\n      if($field_id.length && $field_id.val()) custom_fields_order_data[$field_id.val()] = new_order_number;\n    });\n    var data = { action: 'latepoint_route_call', \n                  route_name: $custom_fields_wrapper.data('order-update-route'), \n                  params: {ordered_fields: custom_fields_order_data, \n                  fields_for: $custom_fields_wrapper.data('fields-for')}, \n                  return_format: 'json' } \n    $custom_fields_wrapper.addClass('os-loading');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $custom_fields_wrapper.removeClass('os-loading');\n      }\n    });\n  });\n\n  // Steps Order Dragging\n  dragula([jQuery('.steps-ordering-w')[0]], {\n    moves: function (el, container, handle) {\n      return handle.classList.contains('step-drag');\n    },\n  }).on('drop', function(el){\n    var step_order_data = {};\n    var $steps_wrapper = jQuery('.steps-ordering-w');\n    $steps_wrapper.find('.step-w').each(function(index){\n      var new_order_number = jQuery(this).index() + 1;\n      jQuery(this).data('step-order-number', new_order_number);\n      jQuery(this).find('input[name=\"step[order_number]\"]').val(new_order_number);\n      step_order_data[jQuery(this).data('step-name')] = new_order_number;\n    });\n    var data = { action: 'latepoint_route_call', route_name: $steps_wrapper.data('step-order-update-route'), params: {steps: step_order_data}, return_format: 'json' } \n    $steps_wrapper.addClass('os-loading');\n    jQuery.ajax({\n      type : \"post\",\n      dataType : \"json\",\n      url : latepoint_helper.ajaxurl,\n      data : data,\n      success: function(response){\n        $steps_wrapper.removeClass('os-loading');\n      }\n    });\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.os-category-edit-btn, .os-category-edit-cancel-btn, .os-category-w .os-category-name', function(){\n    jQuery(this).closest('.os-category-w').toggleClass('editing');\n    return false;\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.step-edit-btn, .step-edit-cancel-btn, .step-w .step-name', function(){\n    jQuery(this).closest('.step-w').toggleClass('editing');\n    return false;\n  });\n    \n  jQuery('body.latepoint-admin').on('click', '.agent-info-change-agent-btn', function(){\n    jQuery(this).closest('.agent-info-w').removeClass('selected').addClass('selecting');\n    return false;\n  });\n  \n  jQuery('body.latepoint-admin').on('click', '.agent-info-change-agent-btn', function(){\n    jQuery(this).closest('.agent-info-w').removeClass('selected').addClass('selecting');\n    return false;\n  });\n  \n\n  jQuery('body.latepoint-admin').on('click', '.customer-info-create-btn', function(){\n    jQuery(this).closest('.customer-info-w').removeClass('selecting').addClass('selected');\n    return false;\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.customer-info-load-btn', function(){\n    jQuery(this).closest('.customer-info-w').removeClass('selected').addClass('selecting').find('.customers-selector-search-input').focus();\n    return false;\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.customers-selector-cancel', function(){\n    jQuery(this).closest('.customer-info-w').removeClass('selecting').addClass('selected ');\n    jQuery('.customers-options-list .customer-option').show();\n    jQuery('.customers-selector-search-input').val('');\n    return false;\n  });\n\n  // CUSTOMER SELECTOR\n\n  // SERVICES SELECTOR\n  jQuery('body.latepoint-admin').on('click', '.os-services-select-field-w .service-option-selected', function(){\n    var $select = jQuery(this).closest('.os-services-select-field-w');\n    if($select.hasClass('active')){\n      $select.removeClass('active');\n    }else{\n      $select.addClass('active').find('input').focus();\n    }\n    return false;\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.os-services-select-field-w service-option-selected', function(){\n\n    return false;\n  });\n\n\n  jQuery('body.latepoint-admin').on('keyup', '.service-options-filter-input', function(){\n    var $list = jQuery(this).closest('.services-options-list');\n    var text = jQuery(this).val().toLowerCase();\n    $list.find('.service-option').hide();\n\n    // Search \n    $list.find('.service-option').each(function(){\n\n      if(jQuery(this).text().toLowerCase().indexOf(\"\"+text+\"\") != -1 ){\n       jQuery(this).show();\n      }\n    });\n    return false;\n  });\n\n\n  jQuery('.calendar-week-agent-w').on('click', '.calendar-load-target-date', function(event){\n    jQuery(this).addClass('os-loading');\n    latepoint_load_calendar(jQuery(this).data('target-date'), jQuery('.calendar-agent-selector').val(), jQuery('.calendar-location-selector').val());\n    return false;\n  });\n\n  jQuery('.calendar-week-agent-w').on('change', '.calendar-agent-selector', function(event){\n    latepoint_load_calendar(jQuery('.calendar-start-date').val(), jQuery('.calendar-agent-selector').val(), jQuery('.calendar-location-selector').val());\n    return false;\n  });\n\n  jQuery('.calendar-week-agent-w').on('change', '.calendar-location-selector', function(event){\n    latepoint_load_calendar(jQuery('.calendar-start-date').val(), jQuery('.calendar-agent-selector').val(), jQuery('.calendar-location-selector').val());\n    return false;\n  });\n\n  jQuery('.latepoint-admin').on('click', '.os-complex-connections-selector .selector-trigger', function(){\n    var $connection_wrapper = jQuery(this).closest('.connection');\n    if($connection_wrapper.hasClass('active')){\n      latepoint_complex_selector_deselect($connection_wrapper);\n      jQuery(this).closest('.white-box').find('.os-select-all-toggler').prop('checked', false);\n    }else{\n      latepoint_complex_selector_select($connection_wrapper);\n    }\n    return false;\n  });\n\n  jQuery('.latepoint-admin').on('click', '.os-agents-selector .agent', function(){\n    if(jQuery(this).hasClass('active')){\n      jQuery(this).removeClass('active');\n      jQuery(this).find('.connection-child-is-connected').val('no');\n    }else{\n      jQuery(this).addClass('active');\n      jQuery(this).find('.connection-child-is-connected').val('yes');\n    }\n    return false;\n  });\n\n  jQuery('.latepoint-admin').on('click', '.os-services-selector .service', function(){\n    if(jQuery(this).hasClass('active')){\n      jQuery(this).removeClass('active');\n      jQuery(this).find('.connection-child-is-connected').val('no');\n    }else{\n      jQuery(this).addClass('active');\n      jQuery(this).find('.connection-child-is-connected').val('yes');\n    }\n    return false;\n  });\n\n  jQuery('.latepoint-admin').on( 'click', '.os-form-toggler-group label', function( event ){\n    jQuery(this).closest('.os-form-toggler-group').find('.os-toggler').click();\n    return false;\n  });\n\n  jQuery('.latepoint-admin').on( 'click', '.os-toggler', function( event ){\n    jQuery(this).toggleClass('off');\n    if(jQuery(this).data('for')){\n      var $hiddenInput = $('input[type=\"hidden\"]#' + jQuery(this).data('for'));\n      if($hiddenInput.length){\n        // hidden input\n        if(jQuery(this).data('is-string-value')){\n          $hiddenInput.val(jQuery(this).hasClass('off') ? 'off' : 'on');\n        }else{\n          $hiddenInput.val(jQuery(this).hasClass('off') ? 0 : 1);\n        }\n      }else{\n        // checkbox \n        $('#' + jQuery(this).data('for')).prop('checked', !jQuery(this).hasClass('off'));\n      }\n    }\n    if(jQuery(this).data('controlled-toggle-id')){\n      if(jQuery(this).hasClass('off')){\n        $('#' + jQuery(this).data('controlled-toggle-id')).hide();\n      }else{\n        $('#' + jQuery(this).data('controlled-toggle-id')).show();\n      }\n    }\n    jQuery(this).trigger('ostoggler:toggle');\n    return false;\n  });\n\n\n\n  // UPLOAD/REMOVE IMAGE LINK LOGIC\n  jQuery('.latepoint-admin').on( 'click', '.os-image-selector-trigger', function( event ){\n    var frame;\n\n    event.preventDefault();\n\n    var $image_uploader_trigger = jQuery(this);\n    var $image_selector_w = jQuery(this).closest('.os-image-selector-w');\n    var $image_container = $image_selector_w.find('.os-image-container');\n    var $image_id_holder = $image_selector_w.find('.os-image-id-holder');\n\n    var image_exists = $image_container.find('img').length;\n\n    if(image_exists){\n      $image_id_holder.val('');\n      $image_container.removeClass('has-image');\n      $image_container.html('');\n      $image_uploader_trigger.find('.os-text-holder').text($image_uploader_trigger.data('label-set-str'));\n    }else{\n      // If the media frame already exists, reopen it.\n      if ( frame ) {\n        frame.open();\n        return false;\n      }\n      \n      // Create a new media frame\n      frame = wp.media({\n        title: 'Select or Upload Media',\n        button: { text: 'Use this media' },\n        multiple: false\n      });\n\n      frame.on( 'select', function() {\n        var attachment = frame.state().get('selection').first().toJSON();\n        $image_container.append( '<img src=\"'+attachment.url+'\" alt=\"\"/>' );\n        $image_id_holder.val( attachment.id );\n        $image_container.addClass('has-image');\n        $image_uploader_trigger.find('.os-text-holder').text($image_uploader_trigger.data('label-remove-str'));\n      });\n\n      frame.open();\n    }\n    \n    return false;\n  });\n\n\n\n  jQuery('body').on('click', '.latepoint-lightbox-close', function(){\n    latepoint_lightbox_close();\n    return false;\n  });\n\n\n  jQuery('body').on('click', '.latepoint-side-panel-close-trigger', function(){\n    jQuery('.latepoint-side-panel-w').remove();\n    return false;\n  });\n\n\n  jQuery('body').on('click', '.latepoint-quick-availability-close', function(){\n    jQuery('.quick-availability-per-day-w').remove();\n    return false;\n  });\n  \n\n\n  jQuery('body.latepoint-admin').on('click', '.time-ampm-select', function(){\n    jQuery(this).closest('.time-ampm-w').find('.active').removeClass('active');\n    jQuery(this).addClass('active');\n    var ampm_value = jQuery(this).data('ampm-value');\n    jQuery(this).closest('.os-time-group').find('.ampm-value-hidden-holder').val(ampm_value);\n    return false;\n  });\n\n\n  jQuery('body.latepoint-admin').on('click', '.latepoint-lightbox-shadow', function(){\n    latepoint_lightbox_close();\n    return false;\n  });\n\n  jQuery('body.latepoint-admin').on('click', '.latepoint-side-panel-shadow', function(){\n    jQuery('.latepoint-side-panel-w').remove();\n    return false;\n  });\n\n  // SCHEDULE\n\n  jQuery('body.latepoint-admin').on('click', '.ws-period-remove', function(e){\n    jQuery(this).closest('.ws-period').remove();\n    return false;\n  });\n\n\n  jQuery('.latepoint-admin').on( 'click', '.weekday-schedule-w .os-toggler', function( event ){\n    if(jQuery(this).hasClass('off')){\n      jQuery(this).closest('.weekday-schedule-w').addClass('day-off').removeClass('is-editing').find('input.is-active').val(0);\n    }else{\n      jQuery(this).closest('.weekday-schedule-w').removeClass('day-off').addClass('is-editing').find('input.is-active').val(1);\n    }\n    return false;\n  });\n\n  \n\n});","(function($) {\n\n    $.fn.lateSelect = function() {\n\n      function os_build_selected_item($option){\n        var quantity_html = '';\n        if($option.data('quantity')) quantity_html = '<span class=\"os-late-quantity-selector-w\"><span class=\"os-late-quantity-selector minus\" data-sign=\"minus\"></span><input class=\"os-late-quantity-selector-input\" type=\"text\" data-max-quantity=\"'+ $option.data('max-quantity') +'\" value=\"' + $option.data('quantity') + '\"/><span class=\"os-late-quantity-selector plus\" data-sign=\"plus\"></span></span>';\n        return '<div class=\"ls-item\" data-value=\"' + $option.val() + '\"><span class=\"latepoint-icon latepoint-icon-x ls-item-remover\"></span><span>' + $option.text() + '</span>' + quantity_html + '</div>'\n      }\n\n      this.each( function() {\n          var lateselect_html = '';\n          var all_items = '';\n          var selected_items = '';\n          var is_selected = '';\n          $(this).hide();\n          $(this).find('option').each(function(){\n              if($(this).is(':selected')) selected_items+= os_build_selected_item($(this));\n              is_selected = $(this).is(':selected') ? 'selected' : '';\n              all_items+= '<div class=\"ls-item '+ is_selected +'\" data-value=\"' + $(this).val() + '\">' + $(this).text() + '</div>';\n          });\n          lateselect_html = $('<div class=\"lateselect-w\"></div>');\n          $(this).wrap(lateselect_html);\n          var $lateselect_wrapper = $(this).closest('.lateselect-w');\n          $lateselect_wrapper.append('<div class=\"ls-selected-items-w\">' + selected_items + '</div>');\n          $lateselect_wrapper.append('<div class=\"ls-all-items-w\">' + all_items + '</div>');\n\n\n          // ADD ITEM\n          $lateselect_wrapper.on('click', '.ls-all-items-w .ls-item:not(.selected)', function(){\n              var selected_value = $(this).data('value');\n              $lateselect_wrapper.find('.ls-selected-items-w').append(os_build_selected_item($lateselect_wrapper.find('select option[value=\"'+ selected_value +'\"]')));\n              $(this).addClass('selected');\n              $lateselect_wrapper.removeClass('ls-selecting');\n              $lateselect_wrapper.find('select option[value=\"'+ selected_value +'\"]').attr('selected', true);\n              $lateselect_wrapper.find('select').trigger('change');\n              return false;\n          });\n\n          // REMOVE ITEM\n          $lateselect_wrapper.on('click', '.ls-selected-items-w .ls-item-remover', function(){\n              var selected_value = $(this).closest('.ls-item').data('value');\n              $(this).closest('.ls-item').remove();\n              $lateselect_wrapper.find('.ls-all-items-w .ls-item.selected[data-value=\"' + selected_value + '\"]').removeClass('selected');\n              $lateselect_wrapper.find('select option[value=\"'+ selected_value +'\"]').removeAttr('selected');\n              $lateselect_wrapper.find('select').trigger('change');\n              return false;\n          });\n\n          $lateselect_wrapper.on('click', '.ls-selected-items-w', function(){\n              $lateselect_wrapper.toggleClass('ls-selecting');\n              return false;\n          });\n\n          $lateselect_wrapper.on('click', '.os-late-quantity-selector', function(){\n              var $input = $(this).closest('.ls-item').find('input.os-late-quantity-selector-input');\n              var current_value = parseInt($input.val());\n              var new_quantity = ($(this).data('sign') == 'minus') ? current_value - 1 : current_value + 1;\n              var max_quantity = $input.data('max-quantity');\n              if(new_quantity <= 0) new_quantity = 1;\n              if(max_quantity && (new_quantity > max_quantity)) new_quantity = max_quantity;\n              var selected_value = $(this).closest('.ls-item').data('value');\n              $lateselect_wrapper.find('select option[value=\"'+ selected_value +'\"]').data('quantity', new_quantity);\n              $input.val(new_quantity);\n              $lateselect_wrapper.find('select').trigger('change');\n              return false;\n          });\n\n          $(this).on('change', function(){\n              if($(this).data('hidden-connection')){\n                  var formatted_ids = '';\n                  if($(this).find('option:selected').length){\n                      $(this).find('option:selected').each(function(){\n                        var quantity = $(this).data('quantity') ? $(this).data('quantity') : 1;\n                        formatted_ids+= $(this).val() + ':' + quantity + ',';\n                      });\n                  }else{\n                    formatted_ids = '';\n                  }\n                  if(formatted_ids != '') formatted_ids = formatted_ids.slice(0, -1);\n                  $($(this).data('hidden-connection')).val(formatted_ids);\n              }\n          });\n      });\n    }\n}(jQuery));","class OsGoogleCalendar {\n  constructor(){\n  }\n  /**\n   *  On load, called to load the auth2 library and API client library.\n   */\n  init() {\n    gapi.load('client:auth2', () => {\n      gapi.client.init({\n                    clientId: latepoint_helper.google_calendar_client_id,\n                    discoveryDocs: [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"],\n                    scope: \"https://www.googleapis.com/auth/calendar\"\n                  }).then(() => {\n                    jQuery('.os-google-cal-authorize-btn').on('click', () => {\n                      try{\n                        gapi.auth2.getAuthInstance().grantOfflineAccess().then(this.saveAuthCode);\n                      }catch(err){\n                        jQuery('.channel-watch-status').before(latepoint_generate_form_message_html(err.message, 'error'));\n                      }\n                      return false;\n                    });\n                  }, (err) => { jQuery('.channel-watch-status').before(latepoint_generate_form_message_html(err.details, 'error')); });\n    });\n  }\n  saveAuthCode(authResult) {\n\n    var params = {  code: authResult['code'], \n                    agent_id: jQuery('.os-google-cal-authorize-btn').data('agent-id') \n                  };\n\n    var data = {  action: 'latepoint_route_call', \n                  route_name: jQuery('.os-google-cal-authorize-btn').data('route'), \n                  params: params, \n                  layout: 'none', \n                  return_format: 'json' \n                };\n\n    jQuery.ajax({\n      type: 'POST',\n      url: latepoint_helper.ajaxurl,\n      dataType : \"json\",\n      headers: { 'X-Requested-With': 'XMLHttpRequest' },\n      data: data,\n      success: function(response) {\n        latepoint_add_notification(response.message);\n        location.reload();\n      }\n    });\n  }\n}"]}